!function(root,factory){if(typeof module==="object"&&module.exports){module.exports=factory(root);module.exports["default"]=module.exports;}else{root.timeago=factory(root);}}(typeof window!=="undefined"?window:this,function(){var indexMapEn="second_minute_hour_day_week_month_year".split("_"),indexMapZh="秒_分钟_小时_天_周_月_年".split("_"),locales={"en":function(number,index){if(index===0){return["just now","right now"];
}var unit=indexMapEn[parseInt(index/2)];if(number>1){unit+="s";}return[number+" "+unit+" ago","in "+number+" "+unit];},"zh_CN":function(number,index){if(index===0){return["刚刚","片刻后"];}var unit=indexMapZh[parseInt(index/2)];return[number+unit+"前",number+unit+"后"];}},SEC_ARRAY=[60,60,24,7,365/7/12,12],SEC_ARRAY_LEN=6,ATTR_DATETIME="datetime",ATTR_DATA_TID="data-tid",timers={};
function toDate(input){if(input instanceof Date){return input;}if(!isNaN(input)){return new Date(toInt(input));}if(/^\d+$/.test(input)){return new Date(toInt(input));}input=(input||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");
return new Date(input);}function toInt(f){return parseInt(f);}function formatDiff(diff,locale,defaultLocale){locale=locales[locale]?locale:(locales[defaultLocale]?defaultLocale:"en");var i=0,agoin=diff<0?1:0,total_sec=diff=Math.abs(diff);for(;diff>=SEC_ARRAY[i]&&i<SEC_ARRAY_LEN;i++){diff/=SEC_ARRAY[i];
}diff=toInt(diff);i*=2;if(diff>(i===0?9:1)){i+=1;}return locales[locale](diff,i,total_sec)[agoin].replace("%s",diff);}function diffSec(date,nowDate){nowDate=nowDate?toDate(nowDate):new Date();return(nowDate-toDate(date))/1000;}function nextInterval(diff){var rst=1,i=0,d=Math.abs(diff);for(;diff>=SEC_ARRAY[i]&&i<SEC_ARRAY_LEN;
i++){diff/=SEC_ARRAY[i];rst*=SEC_ARRAY[i];}d=d%rst;d=d?rst-d:rst;return Math.ceil(d);}function getDateAttr(node){if(node.dataset.timeago){return node.dataset.timeago;}return getAttr(node,ATTR_DATETIME);}function getAttr(node,name){if(node.getAttribute){return node.getAttribute(name);}if(node.attr){return node.attr(name);
}}function setTidAttr(node,val){if(node.setAttribute){return node.setAttribute(ATTR_DATA_TID,val);}if(node.attr){return node.attr(ATTR_DATA_TID,val);}}function getTidFromNode(node){return getAttr(node,ATTR_DATA_TID);}function Timeago(nowDate,defaultLocale){this.nowDate=nowDate;this.defaultLocale=defaultLocale||"en";
}Timeago.prototype.doRender=function(node,date,locale){var diff=diffSec(date,this.nowDate),self=this,tid;node.innerHTML=formatDiff(diff,locale,this.defaultLocale);timers[tid=setTimeout(function(){self.doRender(node,date,locale);delete timers[tid];},Math.min(nextInterval(diff)*1000,2147483647))]=0;setTidAttr(node,tid);
};Timeago.prototype.format=function(date,locale){return formatDiff(diffSec(date,this.nowDate),locale,this.defaultLocale);};Timeago.prototype.render=function(nodes,locale){if(nodes.length===undefined){nodes=[nodes];}for(var i=0,len=nodes.length;i<len;i++){this.doRender(nodes[i],getDateAttr(nodes[i]),locale);
}};Timeago.prototype.setLocale=function(locale){this.defaultLocale=locale;};function timeagoFactory(nowDate,defaultLocale){return new Timeago(nowDate,defaultLocale);}timeagoFactory.register=function(locale,localeFunc){locales[locale]=localeFunc;};timeagoFactory.cancel=function(node){var tid;if(node){tid=getTidFromNode(node);
if(tid){clearTimeout(tid);delete timers[tid];}}else{for(tid in timers){clearTimeout(tid);}timers={};}};return timeagoFactory;});(function(){window.M8={data:{}};(function(){var config={"namespace":"M8","domains":["app","shims","all","utils"],"arbiters":{},"logging":1},ns=window[config.namespace],domains=config.domains,arbiters=[],exports={},DomReg=/^([\w]*)::/;
exports.M8={};exports.external={};exports.data=ns.data;delete ns.data;domains.forEach(function(e){exports[e]={};});Object.keys(config.arbiters).forEach(function(name){var arbAry=config.arbiters[name];arbiters.push(name);exports.M8[name]=window[arbAry[0]];arbAry.forEach(function(e){delete window[e];});
});function toAbsPath(pathName,relReqStr){var folders=pathName.split("/").slice(0,-1);while(relReqStr.slice(0,3)==="../"){folders=folders.slice(0,-1);relReqStr=relReqStr.slice(3);}return folders.concat(relReqStr.split("/")).join("/");}function makeRequire(dom,pathName){return function(reqStr){var o,scannable,k,skipFolder;
if(config.logging>=4){console.debug("modul8: "+dom+":"+pathName+" <- "+reqStr);}if(reqStr.slice(0,2)==="./"){scannable=[dom];reqStr=toAbsPath(pathName,reqStr.slice(2));}else{if(reqStr.slice(0,3)==="../"){scannable=[dom];reqStr=toAbsPath(pathName,reqStr);}else{if(DomReg.test(reqStr)){scannable=[reqStr.match(DomReg)[1]];
reqStr=reqStr.split("::")[1];}else{if(arbiters.indexOf(reqStr)>=0){scannable=["M8"];}else{scannable=[dom].concat(domains.filter(function(e){return e!==dom;}));}}}}reqStr=reqStr.split(".")[0];if(reqStr.slice(-1)==="/"||reqStr===""){reqStr+="index";skipFolder=true;}if(config.logging>=3){console.log("modul8: "+dom+":"+pathName+" <- "+reqStr);
}if(config.logging>=4){console.debug("modul8: scanned "+JSON.stringify(scannable));}for(k=0;k<scannable.length;k+=1){o=scannable[k];if(exports[o][reqStr]){return exports[o][reqStr];}if(!skipFolder&&exports[o][reqStr+"/index"]){return exports[o][reqStr+"/index"];}}if(config.logging>=1){console.error("modul8: Unable to resolve require for: "+reqStr);
}};}ns.define=function(name,domain,fn){var module={};fn(makeRequire(domain,name),module,exports[domain][name]={});if(module.exports){delete exports[domain][name];exports[domain][name]=module.exports;}};ns.inspect=function(domain){console.log(exports[domain]);};ns.domains=function(){return domains.concat(["external","data"]);
};ns.require=makeRequire("app","CONSOLE");ns.data=function(name,exported){if(exports.data[name]){delete exports.data[name];}if(exported){exports.data[name]=exported;}};ns.external=function(name,exported){if(exports.external[name]){delete exports.external[name];}if(exported){exports.external[name]=exported;
}};})();M8.define("index","utils",function(require,module,exports){var hasOwnProperty=Object.prototype.hasOwnProperty;var HTMLNames=["HTMLDocument","HTMLLinkElement","HTMLElement","HTMLHtmlElement","HTMLDivElement","HTMLAnchorElement","HTMLSelectElement","HTMLOptionElement","HTMLInputElement","HTMLHeadElement","HTMLSpanElement","XULElement","HTMLBodyElement","HTMLTableElement","HTMLTableCellElement","HTMLTextAreaElement","HTMLScriptElement","HTMLAudioElement","HTMLMediaElement","HTMLParagraphElement","HTMLButtonElement","HTMLLIElement","HTMLUListElement","HTMLFormElement","HTMLHeadingElement","HTMLImageElement","HTMLStyleElement","HTMLTableRowElement","HTMLTableSectionElement","HTMLBRElement"];
module.exports={addShimToInterface:addShimToInterface,throwDOMException:throwDOMException,clone:clone,recursivelyWalk:recursivelyWalk,HTMLNames:HTMLNames};function recursivelyWalk(nodes,cb){for(var i=0,len=nodes.length;i<len;i++){var node=nodes[i];var ret=cb(node);if(ret){return ret;}if(node.childNodes&&node.childNodes.length){var ret=recursivelyWalk(node.childNodes,cb);
if(ret){return ret;}}}}function throwDOMException(code){var ex=Object.create(DOMException.prototype);ex.code=code;throw ex;}function addShimToInterface(shim,proto,constructor){Object.keys(shim).forEach(function _eachShimProperty(name){if(name==="constants"){var constants=shim[name];Object.keys(constants).forEach(function _eachConstant(name){if(!hasOwnProperty.call(constructor,name)){constructor[name]=constants[name];
}});return;}if(!hasOwnProperty.call(proto,name)){var pd=shim[name];if(pd.value){pd.writable=false;}else{}pd.configurable=true;pd.enumerable=false;Object.defineProperty(proto,name,pd);}});}function clone(node,document,deep){document=document||node.ownerDocument;var copy;if(node.nodeType===Node.ELEMENT_NODE){var namespace=node.nodeName;
if(node.prefix){namespace=node.prefix+":"+namespace;}copy=document.createElementNS(node.namespaceURI,namespace);for(var i=0,len=node.attributes.length;i<len;i++){var attr=node.attributes[i];copy.setAttribute(attr.name,attr.value);}}else{if(node.nodeType===Node.DOCUMENT_NODE){copy=document.implementation.createDocument("","",null);
}else{if(node.nodeType===Node.DOCUMENT_FRAGMENT_NODE){copy=document.createDocumentFragment();}else{if(node.nodeType===Node.DOCUMENT_TYPE_NODE){copy=document.implementation.createDocumentType(node.name,node.publicId,node.systemId);}else{if(node.nodeType===Node.COMMENT_NODE){copy=document.createComment(node.data);
}else{if(node.nodeType===Node.TEXT_NODE){copy=document.createTextNode(node.data);}else{if(node.nodeType===Node.PROCESSING_INSTRUCTION_NODE){copy=document.createProcessingInstruction(node.target,node.data);}}}}}}}if(deep){var children=node.childNodes;for(var i=0,len=children.length;i<len;i++){copy.appendChild(children[i].cloneNode(node,document,deep));
}}return copy;}});M8.define("interfaces/DOMTokenList","all",function(require,module,exports){var utils=require("utils::index");var throwDOMException=utils.throwDOMException;module.exports={constructor:DOMTokenList,item:item,contains:contains,add:add,remove:remove,toggle:toggle,toString:_toString};module.exports.constructor.prototype=module.exports;
function DOMTokenList(getter,setter){this._getString=getter;this._setString=setter;fixIndex(this,validateAndSplit(getter()));}function fixIndex(clist,list){for(var i=0,len=list.length;i<len;i++){clist[i]=list[i];}delete clist[len];}function validateAndSplit(el){return(typeof el==="string"||el instanceof String)?el.split(" "):el.baseVal.split(" ");
}function handleErrors(token){if(token===""||token===undefined){throwDOMException(DOMException.SYNTAX_ERR);}if(token.indexOf(" ")>-1){throwDOMException(DOMException.INVALID_CHARACTER_ERR);}}function getList(clist){var str=clist._getString();if(str===""){return[];}else{return validateAndSplit(str);}}function item(index){if(index>=this.length){return null;
}return this._getString().split(" ")[index];}function contains(token){handleErrors(token);var list=getList(this);return list.indexOf(token)>-1;}function add(token){handleErrors(token);var list=getList(this);if(list.indexOf(token)>-1){return;}list.push(token);this._setString(list.join(" ").trim());fixIndex(this,list);
}function remove(token){handleErrors(token);var list=getList(this);var index=list.indexOf(token);if(index>-1){list.splice(index,1);this._setString(list.join(" ").trim());}fixIndex(this,list);}function toggle(token){if(this.contains(token)){this.remove(token);return false;}else{this.add(token);return true;
}}function _toString(){return this._getString();}});M8.define("interfaces/DOMSettableTokenList","all",function(require,module,exports){var utils=require("utils::index"),DOMTokenList=require("interfaces/DOMTokenList").constructor;module.exports={constructor:DOMSettableTokenList};module.exports.constructor.prototype=module.exports;
function DOMSettableTokenList(getter,setter){DOMTokenList.call(this,getter,setter);}(function inherit(Child,Parent){(Child.prototype=Object.create(Parent.prototype)).constructor=Child;})(DOMSettableTokenList,DOMTokenList);Object.defineProperty(DOMSettableTokenList.prototype,"value",{enumerable:true,get:function(){return this._getString();
},set:function(newValue){return this._setString(newValue);}});});M8.define("interfaces/CustomEvent","shims",function(require,module,exports){module.exports={constructor:constructor,interfacer:window.Event};function constructor(type,dict){var e=document.createEvent("CustomEvent");dict=dict||{};dict.detail=dict.detail||null;
dict.bubbles=dict.bubbles||false;dict.catchable=dict.catchable||false;if(e.initCustomEvent){e.initCustomEvent(type,dict.bubbles,dict.catchable,dict.detail);}else{e.initEvent(type,dict.bubbles,dict.catchable);e.detail=dict.detail;}return e;}});M8.define("interfaces/Element","shims",function(require,module,exports){var DOMTokenList=require("all::interfaces/DOMTokenList").constructor;
module.exports={parentElement:{get:getParentElement},classList:{get:getClassList}};function getParentElement(){var parent=this.parentNode;if(parent==null){return null;}if(parent.nodeType===Node.ELEMENT_NODE){return parent;}return null;}function getClassList(){var el=this;if(this._classList){return this._classList;
}else{var dtlist=new DOMTokenList(function _getClassName(){return el.className||"";},function _setClassName(v){el.className=v;});this._classList=dtlist;return dtlist;}}});M8.define("interfaces/Event","shims",function(require,module,exports){module.exports={constructor:constructor};function constructor(type,dict){var e=document.createEvent("Events");
dict=dict||{};dict.bubbles=dict.bubbles||false;dict.catchable=dict.catchable||false;e.initEvent(type,dict.bubbles,dict.catchable);return e;}});M8.define("interfaces/EventTarget","shims",function(require,module,exports){module.exports={interfacer:window.Node||window.Element};});M8.define("interfaces/Node","shims",function(require,module,exports){module.exports={contains:{value:contains},interfacer:window.Element};
function contains(other){var comparison=this.compareDocumentPosition(other);if(comparison===0||comparison&Node.DOCUMENT_POSITION_CONTAINED_BY){return true;}return false;}});M8.define("interfaces/index","shims",function(require,module,exports){module.exports={CustomEvent:require("./CustomEvent"),Element:require("./Element"),Event:require("./Event"),EventTarget:require("./EventTarget"),Node:require("./Node")};
});M8.define("bugs","shims",function(require,module,exports){var utils=require("utils::index");module.exports=run;function run(){(function(){var e=document.createElement("div");try{document.importNode(e);}catch(e){var importNode=document.importNode;delete document.importNode;document.importNode=function _importNode(node,bool){if(bool===undefined){bool=true;
}return importNode.call(this,node,bool);};}})();(function(){var el=document.createElement("p");try{el.cloneNode();}catch(e){[Node.prototype,Comment.prototype,Element.prototype,ProcessingInstruction.prototype,Document.prototype,DocumentType.prototype,DocumentFragment.prototype].forEach(fixNodeOnProto);
utils.HTMLNames.forEach(forAllHTMLInterfaces);}function forAllHTMLInterfaces(name){window[name]&&fixNodeOnProto(window[name].prototype);}function fixNodeOnProto(proto){var cloneNode=proto.cloneNode;delete proto.cloneNode;proto.cloneNode=function _cloneNode(bool){if(bool===undefined){bool=true;}return cloneNode.call(this,bool);
};}})();(function(){var count=0;var handler=function(){count++;};document.addEventListener("click",handler);var ev=new Event("click");document.dispatchEvent(ev);if(count===0){var oldListener=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(ev,cb,optional){optional=optional||false;
return oldListener.call(this,ev,cb,optional);};var oldRemover=EventTarget.prototype.removeEventListener;EventTarget.prototype.removeEventListener=function(ev,cb,optional){optional=optional||false;return oldRemover.call(this,ev,cb,optional);};window.addEventListener=EventTarget.prototype.addEventListener;
window.removeEventListener=EventTarget.prototype.removeEventListener;}document.removeEventListener("click",handler);})();}});(function(){M8.define("utils/index","app",function(require,module,exports){var hasOwnProperty=Object.prototype.hasOwnProperty;var HTMLNames=["HTMLDocument","HTMLLinkElement","HTMLElement","HTMLHtmlElement","HTMLDivElement","HTMLAnchorElement","HTMLSelectElement","HTMLOptionElement","HTMLInputElement","HTMLHeadElement","HTMLSpanElement","XULElement","HTMLBodyElement","HTMLTableElement","HTMLTableCellElement","HTMLTextAreaElement","HTMLScriptElement","HTMLAudioElement","HTMLMediaElement","HTMLParagraphElement","HTMLButtonElement","HTMLLIElement","HTMLUListElement","HTMLFormElement","HTMLHeadingElement","HTMLImageElement","HTMLStyleElement","HTMLTableRowElement","HTMLTableSectionElement","HTMLBRElement"];
module.exports={addShimToInterface:addShimToInterface,throwDOMException:throwDOMException,clone:clone,recursivelyWalk:recursivelyWalk,HTMLNames:HTMLNames};function recursivelyWalk(nodes,cb){for(var i=0,len=nodes.length;i<len;i++){var node=nodes[i];var ret=cb(node);if(ret){return ret;}if(node.childNodes&&node.childNodes.length){var ret=recursivelyWalk(node.childNodes,cb);
if(ret){return ret;}}}}function throwDOMException(code){var ex=Object.create(DOMException.prototype);ex.code=code;throw ex;}function addShimToInterface(shim,proto,constructor){Object.keys(shim).forEach(function _eachShimProperty(name){if(name==="constants"){var constants=shim[name];Object.keys(constants).forEach(function _eachConstant(name){if(!hasOwnProperty.call(constructor,name)){constructor[name]=constants[name];
}});return;}if(!hasOwnProperty.call(proto,name)){var pd=shim[name];if(pd.value){pd.writable=false;}else{}pd.configurable=true;pd.enumerable=false;Object.defineProperty(proto,name,pd);}});}function clone(node,document,deep){document=document||node.ownerDocument;var copy;if(node.nodeType===Node.ELEMENT_NODE){var namespace=node.nodeName;
if(node.prefix){namespace=node.prefix+":"+namespace;}copy=document.createElementNS(node.namespaceURI,namespace);for(var i=0,len=node.attributes.length;i<len;i++){var attr=node.attributes[i];copy.setAttribute(attr.name,attr.value);}}else{if(node.nodeType===Node.DOCUMENT_NODE){copy=document.implementation.createDocument("","",null);
}else{if(node.nodeType===Node.DOCUMENT_FRAGMENT_NODE){copy=document.createDocumentFragment();}else{if(node.nodeType===Node.DOCUMENT_TYPE_NODE){copy=document.implementation.createDocumentType(node.name,node.publicId,node.systemId);}else{if(node.nodeType===Node.COMMENT_NODE){copy=document.createComment(node.data);
}else{if(node.nodeType===Node.TEXT_NODE){copy=document.createTextNode(node.data);}else{if(node.nodeType===Node.PROCESSING_INSTRUCTION_NODE){copy=document.createProcessingInstruction(node.target,node.data);}}}}}}}if(deep){var children=node.childNodes;for(var i=0,len=children.length;i<len;i++){copy.appendChild(children[i].cloneNode(node,document,deep));
}}return copy;}});M8.define("main","app",function(require,module,exports){var shims=require("shims::interfaces"),utils=require("utils");Object.keys(shims).forEach(function _eachShim(name){var shim=shims[name];var constructor=window[name];if(!constructor){constructor=window[name]=shim.interfacer;}delete shim.interfacer;
var proto=constructor.prototype;if(shim.prototype){proto=constructor.prototype=shim.prototype;delete shim.prototype;}console.log("adding interface ",name);if(shim.hasOwnProperty("constructor")){window[name]=constructor=shim.constructor;shim.constructor.prototype=proto;delete shim.constructor;}utils.addShimToInterface(shim,proto,constructor);
});require("shims::bugs")();});})();})();
/*!
  * domready (c) Dustin Diaz 2014 - License MIT
  */
!function(name,definition){if(typeof module!="undefined"){module.exports=definition();}else{if(typeof define=="function"&&typeof define.amd=="object"){define(definition);}else{this[name]=definition();}}}("domready",function(){var fns=[],listener,doc=document,hack=doc.documentElement.doScroll,domContentLoaded="DOMContentLoaded",loaded=(hack?/^loaded|^c/:/^loaded|^i|^c/).test(doc.readyState);
if(!loaded){doc.addEventListener(domContentLoaded,listener=function(){doc.removeEventListener(domContentLoaded,listener);loaded=1;while(listener=fns.shift()){listener();}});}return function(fn){loaded?setTimeout(fn,0):fns.push(fn);};});
/*! Hammer.JS - v2.0.8 - 2016-04-23
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(a,b,c,d){function e(a,b,c){return setTimeout(j(a,c),b);
}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1;}function g(a,b,c){var e;if(a){if(a.forEach){a.forEach(b,c);}else{if(a.length!==d){for(e=0;e<a.length;){b.call(c,a[e],e,a),e++;}}else{for(e in a){a.hasOwnProperty(e)&&b.call(c,a[e],e,a);}}}}}function h(b,c,d){var e="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";
return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments);
};}function i(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&la(d,c);}function j(a,b){return function(){return a.apply(b,arguments);};}function k(a,b){return typeof a==oa?a.apply(b?b[0]||d:d,b):a;}function l(a,b){return a===d?b:a;}function m(a,b,c){g(q(b),function(b){a.addEventListener(b,c,!1);
});}function n(a,b,c){g(q(b),function(b){a.removeEventListener(b,c,!1);});}function o(a,b){for(;a;){if(a==b){return !0;}a=a.parentNode;}return !1;}function p(a,b){return a.indexOf(b)>-1;}function q(a){return a.trim().split(/\s+/g);}function r(a,b,c){if(a.indexOf&&!c){return a.indexOf(b);}for(var d=0;
d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b){return d;}d++;}return -1;}function s(a){return Array.prototype.slice.call(a,0);}function t(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];r(e,g)<0&&d.push(a[f]),e[f]=g,f++;}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b];}):d.sort()),d;
}function u(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ma.length;){if(c=ma[g],e=c?c+f:b,e in a){return e;}g++;}return d;}function v(){return ua++;}function w(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a;}function x(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){k(a.options.enable,[a])&&c.handler(b);
},this.init();}function y(a){var b,c=a.options.inputClass;return new (b=c?c:xa?M:ya?P:wa?R:L)(a,z);}function z(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&Ea&&d-e===0,g=b&(Ga|Ha)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,A(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c;
}function A(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=D(b)),e>1&&!c.firstMultiple?c.firstMultiple=D(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=E(d);b.timeStamp=ra(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=I(h,i),b.distance=H(h,i),B(c,b),b.offsetDirection=G(b.deltaX,b.deltaY);
var j=F(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=qa(j.x)>qa(j.y)?j.x:j.y,b.scale=g?K(g.pointers,d):1,b.rotation=g?J(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,C(c,b);
var k=a.element;o(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k;}function B(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};b.eventType!==Ea&&f.eventType!==Ga||(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y);
}function C(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ha&&(i>Da||h.velocity===d)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=F(i,j,k);e=l.x,f=l.y,c=qa(l.x)>qa(l.y)?l.x:l.y,g=G(j,k),a.lastInterval=b;}else{c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;}b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g;
}function D(a){for(var b=[],c=0;c<a.pointers.length;){b[c]={clientX:pa(a.pointers[c].clientX),clientY:pa(a.pointers[c].clientY)},c++;}return{timeStamp:ra(),pointers:b,center:E(b),deltaX:a.deltaX,deltaY:a.deltaY};}function E(a){var b=a.length;if(1===b){return{x:pa(a[0].clientX),y:pa(a[0].clientY)};}for(var c=0,d=0,e=0;
b>e;){c+=a[e].clientX,d+=a[e].clientY,e++;}return{x:pa(c/b),y:pa(d/b)};}function F(a,b,c){return{x:b/a||0,y:c/a||0};}function G(a,b){return a===b?Ia:qa(a)>=qa(b)?0>a?Ja:Ka:0>b?La:Ma;}function H(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e);}function I(a,b,c){c||(c=Qa);
var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI;}function J(a,b){return I(b[1],b[0],Ra)+I(a[1],a[0],Ra);}function K(a,b){return H(b[0],b[1],Ra)/H(a[0],a[1],Ra);}function L(){this.evEl=Ta,this.evWin=Ua,this.pressed=!1,x.apply(this,arguments);}function M(){this.evEl=Xa,this.evWin=Ya,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[];
}function N(){this.evTarget=$a,this.evWin=_a,this.started=!1,x.apply(this,arguments);}function O(a,b){var c=s(a.touches),d=s(a.changedTouches);return b&(Ga|Ha)&&(c=t(c.concat(d),"identifier",!0)),[c,d];}function P(){this.evTarget=bb,this.targetIds={},x.apply(this,arguments);}function Q(a,b){var c=s(a.touches),d=this.targetIds;
if(b&(Ea|Fa)&&1===c.length){return d[c[0].identifier]=!0,[c,c];}var e,f,g=s(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return o(a.target,i);}),b===Ea){for(e=0;e<f.length;){d[f[e].identifier]=!0,e++;}}for(e=0;e<g.length;){d[g[e].identifier]&&h.push(g[e]),b&(Ga|Ha)&&delete d[g[e].identifier],e++;
}return h.length?[t(f.concat(h),"identifier",!0),h]:void 0;}function R(){x.apply(this,arguments);var a=j(this.handler,this);this.touch=new P(this.manager,a),this.mouse=new L(this.manager,a),this.primaryTouch=null,this.lastTouches=[];}function S(a,b){a&Ea?(this.primaryTouch=b.changedPointers[0].identifier,T.call(this,b)):a&(Ga|Ha)&&T.call(this,b);
}function T(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches,e=function(){var a=d.indexOf(c);a>-1&&d.splice(a,1);};setTimeout(e,cb);}}function U(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;
d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(db>=f&&db>=g){return !0;}}return !1;}function V(a,b){this.manager=a,this.set(b);}function W(a){if(p(a,jb)){return jb;}var b=p(a,kb),c=p(a,lb);return b&&c?jb:b||c?b?kb:lb:p(a,ib)?ib:hb;}function X(){if(!fb){return !1;}var b={},c=a.CSS&&a.CSS.supports;
return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(d){b[d]=c?a.CSS.supports("touch-action",d):!0;}),b;}function Y(a){this.options=la({},this.defaults,a||{}),this.id=v(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=nb,this.simultaneous={},this.requireFail=[];
}function Z(a){return a&sb?"cancel":a&qb?"end":a&pb?"move":a&ob?"start":"";}function $(a){return a==Ma?"down":a==La?"up":a==Ja?"left":a==Ka?"right":"";}function _(a,b){var c=b.manager;return c?c.get(a):a;}function aa(){Y.apply(this,arguments);}function ba(){aa.apply(this,arguments),this.pX=null,this.pY=null;
}function ca(){aa.apply(this,arguments);}function da(){Y.apply(this,arguments),this._timer=null,this._input=null;}function ea(){aa.apply(this,arguments);}function fa(){aa.apply(this,arguments);}function ga(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0;
}function ha(a,b){return b=b||{},b.recognizers=l(b.recognizers,ha.defaults.preset),new ia(a,b);}function ia(a,b){this.options=la({},ha.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=y(this),this.touchAction=new V(this,this.options.touchAction),ja(this,!0),g(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));
a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3]);},this);}function ja(a,b){var c=a.element;if(c.style){var d;g(a.options.cssProps,function(e,f){d=u(c.style,f),b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||"";}),b||(a.oldCssProps={});}}function ka(a,c){var d=b.createEvent("Event");
d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d);}var la,ma=["","webkit","Moz","MS","ms","o"],na=b.createElement("div"),oa="function",pa=Math.round,qa=Math.abs,ra=Date.now;la="function"!=typeof Object.assign?function(a){if(a===d||null===a){throw new TypeError("Cannot convert undefined or null to object");
}for(var b=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(e!==d&&null!==e){for(var f in e){e.hasOwnProperty(f)&&(b[f]=e[f]);}}}return b;}:Object.assign;var sa=h(function(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;){(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;}return a;},"extend","Use `assign`."),ta=h(function(a,b){return sa(a,b,!0);
},"merge","Use `assign`."),ua=1,va=/mobile|tablet|ip(ad|hone|od)|android/i,wa="ontouchstart" in a,xa=u(a,"PointerEvent")!==d,ya=wa&&va.test(navigator.userAgent),za="touch",Aa="pen",Ba="mouse",Ca="kinect",Da=25,Ea=1,Fa=2,Ga=4,Ha=8,Ia=1,Ja=2,Ka=4,La=8,Ma=16,Na=Ja|Ka,Oa=La|Ma,Pa=Na|Oa,Qa=["x","y"],Ra=["clientX","clientY"];
x.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler);},destroy:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(w(this.element),this.evWin,this.domHandler);
}};var Sa={mousedown:Ea,mousemove:Fa,mouseup:Ga},Ta="mousedown",Ua="mousemove mouseup";i(L,x,{handler:function(a){var b=Sa[a.type];b&Ea&&0===a.button&&(this.pressed=!0),b&Fa&&1!==a.which&&(b=Ga),this.pressed&&(b&Ga&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:Ba,srcEvent:a}));
}});var Va={pointerdown:Ea,pointermove:Fa,pointerup:Ga,pointercancel:Ha,pointerout:Ha},Wa={2:za,3:Aa,4:Ba,5:Ca},Xa="pointerdown",Ya="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Xa="MSPointerDown",Ya="MSPointerMove MSPointerUp MSPointerCancel"),i(M,x,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Va[d],f=Wa[a.pointerType]||a.pointerType,g=f==za,h=r(b,a.pointerId,"pointerId");
e&Ea&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ga|Ha)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1));}});var Za={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},$a="touchstart",_a="touchstart touchmove touchend touchcancel";
i(N,x,{handler:function(a){var b=Za[a.type];if(b===Ea&&(this.started=!0),this.started){var c=O.call(this,a,b);b&(Ga|Ha)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a});}}});var ab={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},bb="touchstart touchmove touchend touchcancel";
i(P,x,{handler:function(a){var b=ab[a.type],c=Q.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a});}});var cb=2500,db=25;i(R,x,{handler:function(a,b,c){var d=c.pointerType==za,e=c.pointerType==Ba;if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d){S.call(this,b,c);
}else{if(e&&U.call(this,c)){return;}}this.callback(a,b,c);}},destroy:function(){this.touch.destroy(),this.mouse.destroy();}});var eb=u(na.style,"touchAction"),fb=eb!==d,gb="compute",hb="auto",ib="manipulation",jb="none",kb="pan-x",lb="pan-y",mb=X();V.prototype={set:function(a){a==gb&&(a=this.compute()),fb&&this.manager.element.style&&mb[a]&&(this.manager.element.style[eb]=a),this.actions=a.toLowerCase().trim();
},update:function(){this.set(this.manager.options.touchAction);},compute:function(){var a=[];return g(this.manager.recognizers,function(b){k(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()));}),W(a.join(" "));},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented){return void b.preventDefault();
}var d=this.actions,e=p(d,jb)&&!mb[jb],f=p(d,lb)&&!mb[lb],g=p(d,kb)&&!mb[kb];if(e){var h=1===a.pointers.length,i=a.distance<2,j=a.deltaTime<250;if(h&&i&&j){return;}}return g&&f?void 0:e||f&&c&Na||g&&c&Oa?this.preventSrc(b):void 0;},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault();
}};var nb=1,ob=2,pb=4,qb=8,rb=qb,sb=16,tb=32;Y.prototype={defaults:{},set:function(a){return la(this.options,a),this.manager&&this.manager.touchAction.update(),this;},recognizeWith:function(a){if(f(a,"recognizeWith",this)){return this;}var b=this.simultaneous;return a=_(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this;
},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=_(a,this),delete this.simultaneous[a.id],this);},requireFailure:function(a){if(f(a,"requireFailure",this)){return this;}var b=this.requireFail;return a=_(a,this),-1===r(b,a)&&(b.push(a),a.requireFailure(this)),this;},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this)){return this;
}a=_(a,this);var b=r(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this;},hasRequireFailures:function(){return this.requireFail.length>0;},canRecognizeWith:function(a){return !!this.simultaneous[a.id];},emit:function(a){function b(b){c.manager.emit(b,a);}var c=this,d=this.state;qb>d&&b(c.options.event+Z(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),d>=qb&&b(c.options.event+Z(d));
},tryEmit:function(a){return this.canEmit()?this.emit(a):void (this.state=tb);},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(tb|nb))){return !1;}a++;}return !0;},recognize:function(a){var b=la({},a);return k(this.options.enable,[this,b])?(this.state&(rb|sb|tb)&&(this.state=nb),this.state=this.process(b),void (this.state&(ob|pb|qb|sb)&&this.tryEmit(b))):(this.reset(),void (this.state=tb));
},process:function(a){},getTouchAction:function(){},reset:function(){}},i(aa,Y,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b;},process:function(a){var b=this.state,c=a.eventType,d=b&(ob|pb),e=this.attrTest(a);return d&&(c&Ha||!e)?b|sb:d||e?c&Ga?b|qb:b&ob?b|pb:ob:tb;
}}),i(ba,aa,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pa},getTouchAction:function(){var a=this.options.direction,b=[];return a&Na&&b.push(lb),a&Oa&&b.push(kb),b;},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Na?(e=0===f?Ia:0>f?Ja:Ka,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ia:0>g?La:Ma,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction;
},attrTest:function(a){return aa.prototype.attrTest.call(this,a)&&(this.state&ob||!(this.state&ob)&&this.directionTest(a));},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=$(a.direction);b&&(a.additionalEvent=this.options.event+b),this._super.emit.call(this,a);}}),i(ca,aa,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jb];
},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&ob);},emit:function(a){if(1!==a.scale){var b=a.scale<1?"in":"out";a.additionalEvent=this.options.event+b;}this._super.emit.call(this,a);}}),i(da,Y,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[hb];
},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ga|Ha)&&!f){this.reset();}else{if(a.eventType&Ea){this.reset(),this._timer=e(function(){this.state=rb,this.tryEmit();},b.time,this);}else{if(a.eventType&Ga){return rb;
}}}return tb;},reset:function(){clearTimeout(this._timer);},emit:function(a){this.state===rb&&(a&&a.eventType&Ga?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=ra(),this.manager.emit(this.options.event,this._input)));}}),i(ea,aa,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jb];
},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&ob);}}),i(fa,aa,{defaults:{event:"swipe",threshold:10,velocity:0.3,direction:Na|Oa,pointers:1},getTouchAction:function(){return ba.prototype.getTouchAction.call(this);},attrTest:function(a){var b,c=this.options.direction;
return c&(Na|Oa)?b=a.overallVelocity:c&Na?b=a.overallVelocityX:c&Oa&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&qa(b)>this.options.velocity&&a.eventType&Ga;},emit:function(a){var b=$(a.offsetDirection);
b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a);}}),i(ga,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ib];},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;
if(this.reset(),a.eventType&Ea&&0===this.count){return this.failTimeout();}if(d&&f&&c){if(a.eventType!=Ga){return this.failTimeout();}var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||H(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;
var i=this.count%b.taps;if(0===i){return this.hasRequireFailures()?(this._timer=e(function(){this.state=rb,this.tryEmit();},b.interval,this),ob):rb;}}return tb;},failTimeout:function(){return this._timer=e(function(){this.state=tb;},this.options.interval,this),tb;},reset:function(){clearTimeout(this._timer);
},emit:function(){this.state==rb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input));}}),ha.VERSION="2.0.8",ha.defaults={domEvents:!1,touchAction:gb,enable:!0,inputTarget:null,inputClass:null,preset:[[ea,{enable:!1}],[ca,{enable:!1},["rotate"]],[fa,{direction:Na}],[ba,{direction:Na},["swipe"]],[ga],[ga,{event:"doubletap",taps:2},["tap"]],[da]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};
var ub=1,vb=2;ia.prototype={set:function(a){return la(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this;},stop:function(a){this.session.stopped=a?vb:ub;},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);
var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&rb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;){c=d[f],b.stopped===vb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(ob|pb|qb)&&(e=b.curRecognizer=c),f++;}}},get:function(a){if(a instanceof Y){return a;}for(var b=this.recognizers,c=0;
c<b.length;c++){if(b[c].options.event==a){return b[c];}}return null;},add:function(a){if(f(a,"add",this)){return this;}var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a;},remove:function(a){if(f(a,"remove",this)){return this;}if(a=this.get(a)){var b=this.recognizers,c=r(b,a);
-1!==c&&(b.splice(c,1),this.touchAction.update());}return this;},on:function(a,b){if(a!==d&&b!==d){var c=this.handlers;return g(q(a),function(a){c[a]=c[a]||[],c[a].push(b);}),this;}},off:function(a,b){if(a!==d){var c=this.handlers;return g(q(a),function(a){b?c[a]&&c[a].splice(r(c[a],b),1):delete c[a];
}),this;}},emit:function(a,b){this.options.domEvents&&ka(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault();};for(var d=0;d<c.length;){c[d](b),d++;}}},destroy:function(){this.element&&ja(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null;
}},la(ha,{INPUT_START:Ea,INPUT_MOVE:Fa,INPUT_END:Ga,INPUT_CANCEL:Ha,STATE_POSSIBLE:nb,STATE_BEGAN:ob,STATE_CHANGED:pb,STATE_ENDED:qb,STATE_RECOGNIZED:rb,STATE_CANCELLED:sb,STATE_FAILED:tb,DIRECTION_NONE:Ia,DIRECTION_LEFT:Ja,DIRECTION_RIGHT:Ka,DIRECTION_UP:La,DIRECTION_DOWN:Ma,DIRECTION_HORIZONTAL:Na,DIRECTION_VERTICAL:Oa,DIRECTION_ALL:Pa,Manager:ia,Input:x,TouchAction:V,TouchInput:P,MouseInput:L,PointerEventInput:M,TouchMouseInput:R,SingleTouchInput:N,Recognizer:Y,AttrRecognizer:aa,Tap:ga,Pan:ba,Swipe:fa,Pinch:ca,Rotate:ea,Press:da,on:m,off:n,each:g,merge:ta,extend:sa,assign:la,inherit:i,bindFn:j,prefixed:u});
var wb="undefined"!=typeof a?a:"undefined"!=typeof self?self:{};wb.Hammer=ha,"function"==typeof define&&define.amd?define(function(){return ha;}):"undefined"!=typeof module&&module.exports?module.exports=ha:a[c]=ha;}(window,document,"Hammer");!function(e){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=e();
}else{if("function"==typeof define&&define.amd){define([],e);}else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.hoverintent=e();}}}(function(){return function e(t,n,o){function r(u,f){if(!n[u]){if(!t[u]){var s="function"==typeof require&&require;
if(!f&&s){return s(u,!0);}if(i){return i(u,!0);}var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c;}var a=n[u]={exports:{}};t[u][0].call(a.exports,function(e){var n=t[u][1][e];return r(n?n:e);},a,a.exports,e,t,n,o);}return n[u].exports;}for(var i="function"==typeof require&&require,u=0;
u<o.length;u++){r(o[u]);}return r;}({1:[function(e,t,n){!function(n){var o=e("xtend"),r=function(e,t,n){function r(e,t){return p&&(p=clearTimeout(p)),m=0,n.call(e,t);}function i(e){c=e.clientX,a=e.clientY;}function u(e,n){return p&&(p=clearTimeout(p)),Math.abs(v-c)+Math.abs(l-a)<y.sensitivity?(m=1,t.call(e,n)):(v=c,l=a,p=setTimeout(function(){u(e,n);
},y.interval),void 0);}function f(t){return p&&(p=clearTimeout(p)),e.removeEventListener("mousemove",i,!1),1!==m&&(v=t.clientX,l=t.clientY,e.addEventListener("mousemove",i,!1),p=setTimeout(function(){u(e,t);},y.interval)),this;}function s(t){return p&&(p=clearTimeout(p)),e.removeEventListener("mousemove",i,!1),1===m&&(p=setTimeout(function(){r(e,t);
},y.timeout)),this;}var c,a,v,l,d={},m=0,p=0,y={sensitivity:7,interval:100,timeout:0};return d.options=function(e){return y=o({},y,e),d;},d.remove=function(){e&&(e.removeEventListener("mouseover",f,!1),e.removeEventListener("mouseout",s,!1));},e&&(e.addEventListener("mouseover",f,!1),e.addEventListener("mouseout",s,!1)),d;
};n.hoverintent=r,"undefined"!=typeof t&&t.exports&&(t.exports=r);}(this);},{xtend:2}],2:[function(e,t,n){function o(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var o in n){r.call(n,o)&&(e[o]=n[o]);}}return e;}t.exports=o;var r=Object.prototype.hasOwnProperty;},{}]},{},[1])(1);});
/*! https://github.com/taylorhakes/promise-polyfill v8.1.0 */
(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory():typeof define==="function"&&define.amd?define(factory):(factory());}(this,(function(){function finallyConstructor(callback){var constructor=this.constructor;
return this.then(function(value){return constructor.resolve(callback()).then(function(){return value;});},function(reason){return constructor.resolve(callback()).then(function(){return constructor.reject(reason);});});}var setTimeoutFunc=setTimeout;function noop(){}function bind(fn,thisArg){return function(){fn.apply(thisArg,arguments);
};}function Promise(fn){if(!(this instanceof Promise)){throw new TypeError("Promises must be constructed via new");}if(typeof fn!=="function"){throw new TypeError("not a function");}this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];doResolve(fn,this);}function handle(self,deferred){while(self._state===3){self=self._value;
}if(self._state===0){self._deferreds.push(deferred);return;}self._handled=true;Promise._immediateFn(function(){var cb=self._state===1?deferred.onFulfilled:deferred.onRejected;if(cb===null){(self._state===1?resolve:reject)(deferred.promise,self._value);return;}var ret;try{ret=cb(self._value);}catch(e){reject(deferred.promise,e);
return;}resolve(deferred.promise,ret);});}function resolve(self,newValue){try{if(newValue===self){throw new TypeError("A promise cannot be resolved with itself.");}if(newValue&&(typeof newValue==="object"||typeof newValue==="function")){var then=newValue.then;if(newValue instanceof Promise){self._state=3;
self._value=newValue;finale(self);return;}else{if(typeof then==="function"){doResolve(bind(then,newValue),self);return;}}}self._state=1;self._value=newValue;finale(self);}catch(e){reject(self,e);}}function reject(self,newValue){self._state=2;self._value=newValue;finale(self);}function finale(self){if(self._state===2&&self._deferreds.length===0){Promise._immediateFn(function(){if(!self._handled){Promise._unhandledRejectionFn(self._value);
}});}for(var i=0,len=self._deferreds.length;i<len;i++){handle(self,self._deferreds[i]);}self._deferreds=null;}function Handler(onFulfilled,onRejected,promise){this.onFulfilled=typeof onFulfilled==="function"?onFulfilled:null;this.onRejected=typeof onRejected==="function"?onRejected:null;this.promise=promise;
}function doResolve(fn,self){var done=false;try{fn(function(value){if(done){return;}done=true;resolve(self,value);},function(reason){if(done){return;}done=true;reject(self,reason);});}catch(ex){if(done){return;}done=true;reject(self,ex);}}Promise.prototype["catch"]=function(onRejected){return this.then(null,onRejected);
};Promise.prototype.then=function(onFulfilled,onRejected){var prom=new this.constructor(noop);handle(this,new Handler(onFulfilled,onRejected,prom));return prom;};Promise.prototype["finally"]=finallyConstructor;Promise.all=function(arr){return new Promise(function(resolve,reject){if(!arr||typeof arr.length==="undefined"){throw new TypeError("Promise.all accepts an array");
}var args=Array.prototype.slice.call(arr);if(args.length===0){return resolve([]);}var remaining=args.length;function res(i,val){try{if(val&&(typeof val==="object"||typeof val==="function")){var then=val.then;if(typeof then==="function"){then.call(val,function(val){res(i,val);},reject);return;}}args[i]=val;
if(--remaining===0){resolve(args);}}catch(ex){reject(ex);}}for(var i=0;i<args.length;i++){res(i,args[i]);}});};Promise.resolve=function(value){if(value&&typeof value==="object"&&value.constructor===Promise){return value;}return new Promise(function(resolve){resolve(value);});};Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value);
});};Promise.race=function(values){return new Promise(function(resolve,reject){for(var i=0,len=values.length;i<len;i++){values[i].then(resolve,reject);}});};Promise._immediateFn=(typeof setImmediate==="function"&&function(fn){setImmediate(fn);})||function(fn){setTimeoutFunc(fn,0);};Promise._unhandledRejectionFn=function _unhandledRejectionFn(err){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",err);
}};var globalNS=(function(){if(typeof self!=="undefined"){return self;}if(typeof window!=="undefined"){return window;}if(typeof global!=="undefined"){return global;}throw new Error("unable to locate global object");})();if(!("Promise" in globalNS)){globalNS["Promise"]=Promise;}else{if(!globalNS.Promise.prototype["finally"]){globalNS.Promise.prototype["finally"]=finallyConstructor;
}}})));domready(function(){Appx.init();(function(DOMParser){var proto=DOMParser.prototype,nativeParse=proto.parseFromString;try{var htmlEl=document.documentElement;if(htmlEl.classList.contains("flexboxtweener")){proto.parseFromString=function(markup,type){if(/^\s*text\/html\s*(?:;|$)/i.test(type)){var doc=document.implementation.createHTMLDocument("");
if(markup.toLowerCase().indexOf("<!doctype")>-1){doc.documentElement.innerHTML=markup;}else{doc.body.innerHTML=markup;}return doc;}else{return nativeParse.apply(this,arguments);}};}else{return;}}catch(ex){}}(DOMParser));});var Appx={debounceTime:250,staticResourcesFolder:null,init:function(){Appx.hideModalEventsCTA();
Appx.displayLimits();},findAncestor:function(el,cls){while((el=el.parentElement)&&!el.classList.contains(cls)){}return el;},closest:function(el,selector){var matchesFn;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(fn){if(typeof document.body[fn]=="function"){matchesFn=fn;
return true;}return false;});var parent;while(el){parent=el.parentElement;if(parent&&parent[matchesFn](selector)){return parent;}el=parent;}return null;},openBackDrop:function(eventType,dominant){if(typeof eventType==="undefined"){var eventType="generic";}if(typeof dominant==="undefined"){var dominant=false;
}if(dominant===true){var backDrop=document.getElementById("appx_backdrop_dominant");}else{var backDrop=document.getElementById("appx_backdrop");}backDrop.classList.add("slds-backdrop_open");backDrop.classList.add("appx-backdrop--open");backDrop.setAttribute("data-event",eventType);},closeBackDrop:function(eventType,dominant){if(typeof eventType==="undefined"){var eventType="generic";
}if(typeof dominant==="undefined"){var dominant=false;}if(dominant===true){var backDrop=document.getElementById("appx_backdrop_dominant");}else{var backDrop=document.getElementById("appx_backdrop");}if(backDrop){var backDropType=backDrop.getAttribute("data-event");if(backDropType===null){backDropType="generic";
}if(eventType===backDropType){backDrop.classList.remove("slds-backdrop_open");backDrop.classList.remove("appx-backdrop--open");backDrop.removeAttribute("data-event");}}},getCurrentSiteState:function(){var state="no";var el_xs=document.getElementById("appx_test_xs");var el_s=document.getElementById("appx_test_s");
var el_m=document.getElementById("appx_test_m");var el_l=document.getElementById("appx_test_l");var el_xl=document.getElementById("appx_test_xl");var style_xs=window.getComputedStyle(el_xs,null);var style_s=window.getComputedStyle(el_s,null);var style_m=window.getComputedStyle(el_m,null);var style_l=window.getComputedStyle(el_l,null);
var style_xl=window.getComputedStyle(el_xl,null);if(style_xs.display==="block"){state="xs";}else{if(style_s.display==="block"){state="s";}else{if(style_m.display==="block"){state="m";}else{if(style_l.display==="block"){state="l";}else{if(style_xl.display==="block"){state="xl";}}}}}return state;},createSvg:function(id,classname,ariaHidden,hrefPrefix,container,containerClassname){if(typeof hrefPrefix==="undefined"){hrefPrefix="";
}var svg=document.createElementNS("http://www.w3.org/2000/svg","svg");var u=document.createElementNS("http://www.w3.org/2000/svg","use");svg.setAttribute("class",classname);svg.setAttribute("aria-hidden",ariaHidden);u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",hrefPrefix+"#"+id);svg.appendChild(u);
if(typeof container==="undefined"){return svg;}else{var cont=document.createElement(container);if(typeof containerClassname!=="undefined"){cont.className=containerClassname;}cont.appendChild(svg);return cont;}},preventContentScroll:function(){document.body.classList.add("appx-no-scroll");},allowContentScroll:function(){document.body.classList.remove("appx-no-scroll");
},getScrollYPosition:function(){return Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop);},getPosition:function(el,isFixed){isFixed=(typeof isFixed!=="undefined")?isFixed:false;var xPos=0;var yPos=0;if(isFixed){xPos=el.getBoundingClientRect().left;yPos+=el.getBoundingClientRect().top;
}else{while(el){if(el.tagName==="BODY"){if(!isFixed){var xScroll=el.scrollLeft||document.documentElement.scrollLeft;var yScroll=Appx.getScrollYPosition();xPos+=(el.offsetLeft-xScroll+el.clientLeft);yPos+=(el.offsetTop-yScroll+el.clientTop);}}else{xPos+=(el.offsetLeft-el.scrollLeft+el.clientLeft);yPos+=(el.offsetTop-el.scrollTop+el.clientTop);
}el=el.offsetParent;}}return{x:xPos,y:yPos};},getDimensions:function(el){return{w:el.offsetWidth,h:el.offsetHeight};},getWindowDimensions:function(){return{w:window.innerWidth,h:window.innerHeight};},fixAllMultilines:function(){var elToFix=document.getElementsByClassName("appx-multi-line-to-fix");var elLength=elToFix.length;
for(var i=0;i<elLength;i++){if(!elToFix[i].classList.contains("appx-multi-line-fixed")){Appx.fixMultilines(elToFix[i]);}}},fixMultilines:function(el){el.innerHTML=el.innerHTML.replace(/##/g,"<br/>");el.classList.add("appx-multi-line-fixed");},getCookie:function(cname){var name=cname+"=";var decodedCookie=decodeURIComponent(document.cookie);
var ca=decodedCookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1);}if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}return"";},is_touch_device:function(){if(!!("ontouchstart" in window)){Appx.is_touch=true;return true;}else{Appx.is_touch=false;
return false;}},is_touch:false,disableButton:function(buttonId){var button=document.getElementById(buttonId);if(button){button.setAttribute("disabled","");}},enableButton:function(buttonId){var button=document.getElementById(buttonId);if(button){button.removeAttribute("disabled");}},disableButtons:function(className){var buttons=document.getElementsByClassName(className);
if(buttons){for(var i=0;i<buttons.length;i++){buttons[i].setAttribute("disabled","");}}},enableButtons:function(className){var buttons=document.getElementsByClassName(className);if(buttons){for(var i=0;i<buttons.length;i++){buttons[i].removeAttribute("disabled");}}},showSpinnerButton:function(buttonId){var button=document.getElementById(buttonId);
if(button){var spans=button.getElementsByTagName("span");if(spans.length>0){spans[0].classList.add("appx-button-disabled");var spinner=Appx.createSpinner(true,"button");button.appendChild(spinner);}}},hideSpinnerButton:function(buttonId){var button=document.getElementById(buttonId);if(button){var spans=button.getElementsByTagName("span");
if(spans.length>0){spans[0].classList.remove("appx-button-disabled");var spinners=button.getElementsByClassName("slds-spinner_container");if(spinners.length>0){button.removeChild(spinners[0]);}}}},showSpinnerOnButtons:function(className){var buttons=document.getElementsByClassName(className);if(buttons){for(var i=0;
i<buttons.length;i++){var spans=buttons[i].getElementsByTagName("span");if(spans.length>0){spans[0].classList.add("appx-button-disabled");var spinner=Appx.createSpinner(true,"button");buttons[i].appendChild(spinner);}}}},hideSpinnerOnButtons:function(className){var buttons=document.getElementsByClassName(className);
if(buttons){for(var i=0;i<buttons.length;i++){var spans=buttons[i].getElementsByTagName("span");if(spans.length>0){spans[0].classList.remove("appx-button-disabled");var spinners=buttons[i].getElementsByClassName("slds-spinner_container");if(spinners.length>0){buttons[i].removeChild(spinners[0]);}}}}},createSpinner:function(withContainer,type){var spinner=document.createElement("div");
var classes;if(type=="row"){classes="slds-spinner slds-spinner_small appx-spinner-ie-fix";}else{if(type=="table"){classes="slds-spinner slds-spinner_medium appx-table-spinner-position";}else{if(type=="button"){classes="slds-spinner slds-spinner_x-small";}}}spinner.setAttribute("class",classes);spinner.setAttribute("role","status");
var dot_a=document.createElement("div");dot_a.setAttribute("class","slds-spinner__dot-a");var dot_b=document.createElement("div");dot_b.setAttribute("class","slds-spinner__dot-b");spinner.appendChild(dot_a);spinner.appendChild(dot_b);if(withContainer){var spinnerContainer=document.createElement("div");
if(type=="table"){spinnerContainer.setAttribute("class","slds-spinner_container slds-is-fixed");}else{if(type=="button"){spinnerContainer.setAttribute("class","slds-spinner_container slds-is-relative");spinner.style.marginTop="-1rem";}}spinnerContainer.appendChild(spinner);}return(withContainer)?spinnerContainer:spinner;
},showModal:function(modalId){var modal=document.getElementById(modalId);if(modal){Appx.preventContentScroll();modal.classList.add("slds-fade-in-open");var dominant=false;if(modal.classList.contains("appx-modal-dominant")){dominant=true;}Appx.openBackDrop("modal",dominant);}},hideModalEvents:function(){var hideModalEls=document.querySelectorAll(".appx-modal-close");
var hideModalElsLength=hideModalEls.length;for(var i=0;i<hideModalElsLength;i++){hideModalEls[i].addEventListener("click",Appx.hideModalCancel,false);}},hideModalCancel:function(e){var modal=Appx.findAncestor(e.target,"appx-modal-outer");if(modal){var checkedCheckboxes=modal.querySelectorAll("input[type='checkbox']:checked");
for(var i=0;i<checkedCheckboxes.length;i++){checkedCheckboxes[i].checked=false;}Appx.hideModal(modal,true);}},hideModal:function(modal,canceling,backdrop){Appx.allowContentScroll();modal.classList.remove("slds-fade-in-open");var dominant=false;if(modal.classList.contains("appx-modal-dominant")){dominant=true;
}if(canceling){modal.classList.add("slds-slide-down-cancel");modal.classList.add("appx-modal-fadeout");window.setTimeout(function(){modal.classList.remove("slds-slide-down-cancel");modal.classList.remove("appx-modal-fadeout");Appx.closeBackDrop("modal",dominant);},100);}else{if(backdrop){Appx.closeBackDrop("modal",dominant);
}}},hideModalShowModal:function(modalToHideId,modalToShowId){var modalToHide=document.getElementById(modalToHideId);if(modalToHide){Appx.hideModal(modalToHide);}Appx.showModal(modalToShowId);},displayLimits:function(){var vs_size;var vs_perc;var view_state=document.getElementById("view_state_size");var load_stats=document.getElementById("view_load_stats");
if(view_state){try{vs_size=atob(document.getElementById("com.salesforce.visualforce.ViewState").value.substring(2)).length/1024;vs_perc=Math.round((vs_size/135)*100);view_state.innerHTML="View State: <span id=view_state_size_actual>"+Math.round(vs_size)+"</span>kb of 135kb ("+vs_perc+"% of limit)";}catch(ex){view_state.innerHTML="View State: <span id=view_state_size_actual>size not found</span>";
}}window.onload=function(){if(load_stats){var loadTime=window.performance.timing.domContentLoadedEventEnd-window.performance.timing.navigationStart;load_stats.innerText="Elapsed Page load: "+loadTime;}};},httpGetAsync:function(theUrl,callback){var xmlHttp=new XMLHttpRequest();xmlHttp.onreadystatechange=function(){if(xmlHttp.readyState==4&&xmlHttp.status==200){callback(xmlHttp.responseText);
}};xmlHttp.open("GET",theUrl,true);xmlHttp.send(null);},extractUrlValue:function(key,url){if(typeof(url)==="undefined"){url=window.location.href;}var match=url.match("[?&]"+key+"=([^&]+)");return match?match[1]:null;},hideModalCTA:function(modal,canceling){var currentUrl=encodeURI(window.location.href);
var hasCtaParam=Appx.extractUrlValue("cta",currentUrl);if(hasCtaParam==null){Appx.hideModal(modal,canceling,true);}else{Appx.redirectToNewListingDetail();}},hideModalEventsCTA:function(){var currentUrl=encodeURI(window.location.href);var hasYesterdayParam=Appx.extractUrlValue("cta",currentUrl);if(hasYesterdayParam==null){Appx.hideModalEvents();
}},redirectToNewListingDetail:function(){var currentUrl=encodeURI(window.location.href);var redirectUrl=currentUrl.split("?")[0],param,params_arr=[],hasCtaParam=false,queryString=(currentUrl.indexOf("?")!==-1)?currentUrl.split("?")[1]:"";if(queryString!==""){params_arr=queryString.split("&");for(var i=params_arr.length-1;
i>=0;i-=1){param=params_arr[i].split("=")[0];if(param==="cta"){params_arr.splice(i,1);hasCtaParam=true;}}if(params_arr.length){redirectUrl=redirectUrl+"?"+params_arr.join("&");}}if(hasCtaParam){AppxListingDetailsFooter.sameTab(redirectUrl);}},redirectToNewListingDetailOnCloseModal:function(){var closeBtns=document.getElementsByClassName("appx-modal-close");
var btnsCount=closeBtns.length;for(i=0;i<btnsCount;i++){closeBtns[i].addEventListener("click",Appx.redirectToNewListingDetail);}},};function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate){func.apply(context,args);
}};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow){func.apply(context,args);}};}function log(){if(typeof(console)!=="undefined"&&console.log!==undefined){try{console.log.apply(console,arguments);}catch(e){var log=Function.prototype.bind.call(console.log,console);
log.apply(console,arguments);}}}var Eventbus={topics:{},subscribe:function(topic,block){topic=topic.toLowerCase();if(!this.topics[topic]){this.topics[topic]=[];}this.topics[topic].push(block);},publish:function(topic,arguments_obj){topic=topic.toLowerCase();var args=(typeof arguments_obj!=="undefined")?arguments_obj:{};
args.topic=topic;if(this.topics[topic]){this.topics[topic].forEach(function(listener){listener.init(args);});}}};var ScrubbedPageReferrer={init:function(attributes,base_url){var iframe=document.getElementById("TrackingPixels");iframe.addEventListener("load",function(){this.setAttribute("data-loaded",true);
});this._referrer=document.referrer?document.referrer:"no_referrer?&";this._referrer_url=this._referrer.split("?")[0];this._referrer_url=this._referrer_url.split("#")[0];this._referrer_params=this._referrer.split("?")[1]?this._referrer.split("?")[1]:"no_params";this._location_url=location.protocol+"//"+location.host+location.pathname;
this._location_url=this._location_url.split("#")[0];this._location_params=window.location.href.split("?")[1]?window.location.href.split("?")[1]:"no_params";this._allowed_attributes=attributes;var obj=this._clean();iframe.src=base_url+"/pixel?"+this._collapse(obj);},_clean:function(){var append_obj=[];
append_obj["referrer_url"]=this._referrer_url;append_obj["location_url"]=this._location_url;for(var i=0;i<this._allowed_attributes.length;i++){var attr=this._allowed_attributes[i].Name;if(attr!=="url"){var val1=this._get_param(attr,this._referrer_params);if(attr!==null&&val1!==null){append_obj["referrer_"+attr]=val1;
}var val2=this._get_param(attr,this._location_params);if(attr!==null&&val2!==null){append_obj["location_"+attr]=val2;}}}return append_obj;},_get_param:function(key,parameters){var params=parameters.split("&");for(var i=0;i<params.length;i++){var p=params[i].split("=");if(p[0]===key){return decodeURIComponent(p[1]);
}}return false;},_collapse:function(obj){var parts=[];for(var i in obj){if(obj.hasOwnProperty(i)){parts.push(encodeURIComponent(i)+"="+encodeURIComponent(obj[i]));}}return parts.join("&");}};var LegacySiteEvents={events_to_suppress_marketplace:["analytics_page_load","analytics_carousel_shown_impression","analytics_load_impression"],events_to_suppress_coveo:["analytics_carousel_shown_impression","analytics_shown_impression","analytics_listing_tab_switch"],suppressEventForCta:function(topic,analytics_target){var events_to_suppress=analytics_target=="marketplace_analytics"?LegacySiteEvents.events_to_suppress_marketplace:LegacySiteEvents.events_to_suppress_coveo;
var url_params=new URLSearchParams(window.location.search);return url_params.has("cta")&&events_to_suppress.indexOf(topic)>-1;}};var AppxAnalyticsBeacon={sendMessage:function(message){if(collection_config.enabled===true&&collection_config.endpoint){navigator.sendBeacon(collection_config.endpoint,JSON.stringify(message));
}}};var SubscribeTrackingEvents={registered_images:[],init:function(pixels){var pixel_block=function(){var img=new Image();img.src=this.source;var name_id="pixel_"+this.p_name.split(" ").join("_");img.setAttribute("data-event",this.p_event);img.setAttribute("id",name_id);SubscribeTrackingEvents.registered_images.push(img);
var iframe_element=document.getElementById("TrackingPixels");var insert_pixel=function(){if(SubscribeTrackingEvents.registered_images.length>0){for(var i=0;i<SubscribeTrackingEvents.registered_images.length;i++){var img=SubscribeTrackingEvents.registered_images[i];var exists=iframe_element.contentWindow.document.getElementById(img.getAttribute("id"));
if(exists===null){try{img=document.importNode(img,true);}catch(e){img=importNode(img,true);}iframe_element.contentWindow.document.body.appendChild(img);}}}};if(iframe_element.src.indexOf("location_url")>1){insert_pixel();}var importNode=function(node,allChildren){switch(node.nodeType){case document.ELEMENT_NODE:var newNode=document.createElementNS(node.namespaceURI,node.nodeName);
if(node.attributes&&node.attributes.length>0){for(var attribute in node.attributes){newNode.setAttribute(attribute.nodeName,node.getAttribute(attribute.nodeName));}}if(allChildren&&node.childNodes&&node.childNodes.length>0){for(var child in node.childNodes){newNode.appendChild(importNode(child,allChildren));
}}return newNode;default:return document.createTextNode(node.nodeValue);}};return true;};for(var i=0;i<pixels.length;i++){var pixel_event={source:pixels[i].Source__c,p_event:pixels[i].Tracking_Event__r.Name,p_name:pixels[i].Name,init:pixel_block};if(SubscribeTrackingEvents.isCookieAvailable()){Eventbus.subscribe(pixels[i].Tracking_Event__r.Name,pixel_event);
}}},isCookieAvailable:function(){var cookieConsentFF=document.getElementById("cookieConsentFF").value;var pixelsCookieGroup=document.getElementById("pixelsCookieGroup").value;if(cookieConsentFF=="false"){return true;}var name="OptanonConsent=";var decodedCookie=decodeURIComponent(document.cookie);var ca=decodedCookie.split(";");
for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1);}if(c.indexOf(name)==0){var cookieAsUrl="dummy?"+c.substring(name.length,c.length);var query=cookieAsUrl.substr(1);var result={};query.split("&").forEach(function(part){var item=part.split("=");result[item[0]]=decodeURIComponent(item[1]);
});var groups=result.groups;if(groups==undefined){return false;}var splittedGroups=groups.split(",");for(var j=0;j<splittedGroups.length;j++){var splittedElement=splittedGroups[j].split(":");if(splittedElement[0]==pixelsCookieGroup&&splittedElement[1]=="1"){return true;}}}}return false;},getCookie:function(name){var v=document.cookie.match("(^|;) ?"+name+"=([^;]*)(;|$)");
return v?v[2]:null;},get_listingId_from_meta:function(){var ele=document.getElementsByName("listingId");return ele.length>0?ele[0].getAttribute("content"):null;},get_listingId_from_js:function(){try{return externalListingId;}catch(err){return null;}},get_amp_campaign_info_from_meta:function(){var ele=document.getElementsByName("ampCampaignInfo");
return ele.length>0?ele[0].getAttribute("content"):null;},setupEventListener:function(){var getCurrentPageParams=function(){var url=window.location.href.split("?")[1];var params={};if(url){var paramsArray=url.split("&");for(var i=0;i<paramsArray.length;i++){var arr=paramsArray[i].split("=");params[arr[0]]=arr[1];
}}return params;};var onScreen=function(elm){var rect=elm.getBoundingClientRect();var viewHeight=Math.max(document.documentElement.clientHeight,window.innerHeight);return !(rect.bottom<0||rect.top-viewHeight>=0);};var onSearch=function(){return getCurrentPageParams().hasOwnProperty("keywords");};var getSearchKeyword=function(){return getCurrentPageParams().keywords;
};var get_parents=function(element){var els=[];while(element){var element_obj={elem_identifier:get_identifier(element),elem_context:get_event_context(element)};if(element_obj!=={}){els.unshift(element_obj);}element=element.parentNode;}return els;};var get_identifier=function(element){try{return get_event(element)||element.getAttribute("name")||element.id||"unidentified";
}catch(e){return"unidentified";}};var get_event=function(element){return data_element(element,"event");};var get_event_context=function(element){try{return data_element(element,"eventContext")||"unidentified";}catch(e){return"unidentified";}};var get_context_object=function(collection_config){return{ip:collection_config.client_ip,viewport_height:Math.max(document.documentElement.clientHeight,window.innerHeight),viewport_width:Math.max(document.documentElement.clientWidth,window.innerWidth),device_height:window.screen.height,device_width:window.screen.width,browser:navigator.appVersion,language:window.navigator.language,url:document.URL,referrer:document.referrer,authenticated:isAuthenticated,token:SubscribeTrackingEvents.getCookie(collection_config.cookieName),page_listing:SubscribeTrackingEvents.get_listingId_from_meta()||SubscribeTrackingEvents.get_listingId_from_js()};
};var gen_primary_key=function(){return([10000000]+-1000+-4000+-8000+-100000000000).replace(/[018]/g,function(temp){return(temp^Math.random()*16|0&15>>temp/4).toString(16);});};var analytic_block=function(args){args.timestamp=Date.now();args.parents=get_parents(args.element);var context_obj=get_context_object(collection_config);
args.trace=trace_event(args,events_ratios,context_obj);args.primary_key=gen_primary_key();var merged_args=merge_arguments(args,context_obj);if(!LegacySiteEvents.suppressEventForCta(merged_args.topic,"marketplace_analytics")){AppxAnalyticsBeacon.sendMessage(merged_args);}};var merge_arguments=function(args,context_object){return[args,context_object].reduce(function(r,o){Object.keys(o).forEach(function(k){r[k]=o[k];
});return r;},{});};var analytic_event={init:analytic_block};var trace_event=function(event,events_ratios,context_obj){if((!context_obj.page_listing)&&url_is_listing_detail(context_obj.url)&&event.topic=="analytics_page_load"){return true;}var ratio=events_ratios[event.topic];if(ratio){return Math.random()<=ratio;
}return false;};var url_is_listing_detail=function(url){if(url&&(/\/appxListingDetail/.test(url)||/\/appxConsultingListingDetail/.test(url))){return true;}return false;};var unshown_tiles=[];var hovered_tiles=[];var publishTilesEvents=function(tiles){[].forEach.call(tiles,function(tile){var args={};args.listing=get_listing_from_element(tile);
args.element=tile;args.featured=data_element(tile,"analytic-featured");args.recommended=data_element(tile,"analytic-recommended")||"false";args.sponsored=data_element(tile,"analytic-sponsored")||"false";args=add_placement(tile,args);args=add_amp_campaign_fields(tile,args);Eventbus.publish("analytics_load_impression",args);
if(onSearch()){Eventbus.publish("analytics_load_search_results",args);}if(onScreen(tile)){Eventbus.publish("analytics_shown_impression",args);}else{unshown_tiles.push(tile);}});};var data_element=function(element,data_key){try{return element.getAttribute("data-"+data_key);}catch(e){return"unidentified";
}};var carousel_position=function(element){for(;element&&element.nodeName!=="HTML";element=element.parentNode){var carousel_pos=data_element(element,"carousel-position");if(carousel_pos){return parseInt(carousel_pos);}}return null;};var get_listing_from_element=function(element){return(data_element(element,"external-listing-id")||data_element(element,"listingId")||data_element(element,"listing-id"));
};var traverse=function(element){for(;element&&element.nodeName!=="HTML";element=element.parentNode){if(get_event(element)){return element;}}return{};};var traverse_for_listing=function(element){for(;element&&element.nodeName!=="HTML";element=element.parentNode){var listing=get_listing_from_element(element);
if(listing!==null){return listing;}}return null;};var traverse_for_placement=function(element){for(;element&&element.nodeName!="HTML";element=element.parentNode){var placement=data_element(element,"placement-id");if(placement){return placement;}}return undefined;};var traverse_for_campaign_info=function(element){for(;
element&&element.nodeName!="HTML";element=element.parentNode){var campaign_info=data_element(element,"amp-campaign-info");if(campaign_info!="null"){return campaign_info;}}return undefined;};var add_placement=function(element,args){var placement=data_element(element,"placement-id")||traverse_for_placement(element);
if(placement){args.placement_id=placement;}return args;};var add_amp_campaign_fields=function(element,args,from_meta_only){var campaign_info;if(from_meta_only){campaign_info=SubscribeTrackingEvents.get_amp_campaign_info_from_meta();}else{campaign_info=SubscribeTrackingEvents.get_amp_campaign_info_from_meta()||data_element(element,"amp-campaign-info")||traverse_for_campaign_info(element);
}return parse_campaign_info(campaign_info,args);};var parse_campaign_info=function(campaign_info,args){if(campaign_info){var campaign_obj=JSON.parse(campaign_info);args.campaign_name=campaign_obj.campaign_name;args.campaign_start_date=campaign_obj.planned_start_date;args.campaign_end_date=campaign_obj.planned_end_date;
}return args;};var publishCarouselEvents=function(event,args){var body=document.getElementsByTagName("body");var carouselSlider=body[0].getElementsByClassName("appx-carousel-navigator");carouselSlider=carouselSlider[0];if(!args.carousel_position&&carouselSlider){var position=carousel_position(event);
if(position){args.carousel_position=position;}}Eventbus.publish("analytics_carousel_shown_impression",args);};Eventbus.subscribe("analytics_click",analytic_event);Eventbus.subscribe("analytics_hover",analytic_event);Eventbus.subscribe("analytics_load_impression",analytic_event);Eventbus.subscribe("analytics_shown_impression",analytic_event);
Eventbus.subscribe("analytics_load_search_results",analytic_event);Eventbus.subscribe("analytics_page_load",analytic_event);Eventbus.subscribe("analytics_search_done",analytic_event);Eventbus.subscribe("analytics_tile_open",analytic_event);Eventbus.subscribe("analytics_user_install",analytic_event);Eventbus.subscribe("analytics_carousel_shown_impression",analytic_event);
Eventbus.subscribe("analytics_user_activity",analytic_event);Eventbus.subscribe("analytics_chat_init",analytic_event);var campaign_info=add_amp_campaign_fields(null,analytic_event,true);Eventbus.publish("analytics_page_load",campaign_info);var body=document.getElementsByTagName("body");body=body[0];["click","analyticsClick"].forEach(function(event){body.addEventListener(event,function(ev){var event_element=ev.detail.element||ev.target||ev.srcElement;
var obj_type=event_element.nodeName.toUpperCase();var listing=get_listing_from_element(event_element);if(listing==null){listing=traverse_for_listing(event_element);}var cp=carousel_position(event_element);var click_allowed_children=["SPAN","DIV","P","IMG","SVG","USE"];if(click_allowed_children.indexOf(obj_type)>-1){ev=traverse(event_element);
obj_type=ev.nodeName||"DISALLOW";}else{ev=event_element;}var click_allowed_nodes=["A","BUTTON"];if((click_allowed_nodes.indexOf(obj_type)>-1)||cp){var obj_event=get_identifier(ev);if(obj_event!==null){Eventbus.publish(obj_type+"["+obj_event+"]");var args={};args.element=event_element;args.object_type=obj_type;
args.object_identifier=obj_event;args.listing=listing;args=add_placement(event_element,args);args=add_amp_campaign_fields(ev,args);if(cp){publishCarouselEvents(ev,args);}else{Eventbus.publish("analytics_click",args);}}}});});body.addEventListener("mouseover",function(ev){var event_element=ev.target||ev.srcElement;
if(event_element.nodeName!==undefined){var obj_type=event_element.nodeName.toUpperCase();var hover_disallowed_nodes=["BASE","BDO","BR","HEAD","HTML","IFRAME","META","PARAM","SCRIPT","STYLE","TITLE","SVG","USE"];if(hover_disallowed_nodes.indexOf(obj_type)>-1){ev=traverse(event_element);obj_type=ev.nodeName||"DISALLOW";
}else{ev=event_element;}var cp=carousel_position(event_element);if(hover_disallowed_nodes.indexOf(obj_type)<=-1||cp){var obj_event=get_identifier(ev);var args={};args.object_type=obj_type;args.element=ev;args.object_identifier=obj_event;args.mouse_x=ev.clientX;args.mouse_y=ev.clientY;if(cp){args.carousel_position=cp;
}if(onSearch()){args.keyword=getSearchKeyword();}args=add_placement(event_element,args);args=add_amp_campaign_fields(event_element,args);Eventbus.publish("analytics_hover",args);}}});body.addEventListener("analytic_tile_open",function(ev){var tile=ev.detail.tile;var args={listing:tile.dataset.externalListingId,featured:tile.dataset.analyticFeatured,recommended:tile.dataset.analyticRecommended,sponsored:tile.dataset.analyticSponsored};
args=add_placement(tile,args);args=add_amp_campaign_fields(tile,args);if(hovered_tiles.indexOf(args.listing)===-1){Eventbus.publish("analytics_tile_open",args);hovered_tiles.push(args.listing);}});body.addEventListener("analytic_user_install",function(ev){var action=ev.detail.action;var listing=ev.detail.listing;
var args={};var event_element=ev.detail.element;if(event_element){args.element=event_element;args.object_type=event_element.nodeName;args.object_identifier=get_identifier(event_element);}args.listing=listing;args.action=action;args=add_amp_campaign_fields(null,args,true);Eventbus.publish("analytics_user_install",args);
});var carousel=body.getElementsByClassName("appx-carousel-media-slider");var carouselDescription=body.getElementsByClassName("appx-carousel-navigator-description");if(carousel.length>0&&carousel[0].querySelectorAll("span").length>0&&carouselDescription.length>0){var args={"carousel_position":1};var element=carouselDescription[0];
args.element=element;var obj_type=element.nodeName.toUpperCase();args.object_type=obj_type;var obj_event=get_identifier(element);args.object_identifier=obj_event;args=add_amp_campaign_fields(null,args,true);publishCarouselEvents(element,args);}body.addEventListener("analytic_user_activity",function(ev){var action=ev.detail.action;
var listing=ev.detail.listing;var obj_event=get_identifier(ev.detail.element);var args={};args.object_identifier=obj_event;args.listing=listing;args.action=action;args=add_amp_campaign_fields(null,args,true);Eventbus.publish("analytics_user_activity",args);});body.addEventListener("analytic_async_tiles",function(ev){publishTilesEvents(ev.detail.tiles);
});var tiles=body.getElementsByClassName("appx-tile");if(onSearch()){var args={};args.keyword=getSearchKeyword();Eventbus.publish("analytics_search_done",args);tiles=body.getElementsByClassName("appx-tile-table");}publishTilesEvents(tiles);var didScroll=false;window.onscroll=scrollenator;function scrollenator(){didScroll=true;
}setInterval(function(){if(didScroll){didScroll=false;[].forEach.call(unshown_tiles,function(tile){if(onScreen(tile)){var args={};args.element=tile;args.listing=get_listing_from_element(tile);args.featured=data_element(tile,"analytic-featured");args.recommended=data_element(tile,"analytic-recommended")||"false";
args.sponsored=data_element(tile,"analytic-sponsored")||"false";args=add_placement(tile,args);args=add_amp_campaign_fields(tile,args);Eventbus.publish("analytics_shown_impression",args);unshown_tiles.splice(unshown_tiles.indexOf(tile),1);}});}},100);}};var SendAnalyticsCustomEvents={element:"",listing:"",init:function(element,listing,options){this.element=element;
this.listing=listing;var clickEnabled=!options||(options&&options.click);if(clickEnabled){document.body.dispatchEvent(new CustomEvent("analyticsClick",{detail:{element:element}}));}return this;},addUserInstall:function(action){if(!action){action=this.element.getAttribute("data-event");}document.body.dispatchEvent(new CustomEvent("analytic_user_install",{detail:{element:this.element,action:action,listing:this.listing,}}));
return this;},addUserActivity:function(action){if(!action){action=this.element.getAttribute("data-event");}document.body.dispatchEvent(new CustomEvent("analytic_user_activity",{detail:{element:this.element,listing:this.listing,action:action}}));return this;},asyncTilesEvent:function(loaded_tiles){if(loaded_tiles&&loaded_tiles.length>0){var ev=new CustomEvent("analytic_async_tiles",{detail:{tiles:loaded_tiles}});
document.body.dispatchEvent(ev);}return this;}};var GoogleAnalyticsEventManager={initialize:function(){var pushToDataLayer=function(args){args.timestamp=Date.now();if(args.listingName){args.listingName=parseText(args.listingName);}dataLayer.push(args);};var parseText=function(text){var tag=document.createElement("textarea");
tag.innerHTML=text;return tag.value;};var ga_tile_hover={init:function(args){args.event="AppEx_tile_hover";pushToDataLayer(args);},};var ga_confirm_install={init:function(args){var installActionType=args.action;if((installActionType=="Get It Now - Production")||(installActionType=="Get It Now - Sandbox")){args.event="AppEx_confirm_install";
pushToDataLayer(args);}},};var alreadyClicked=new Set();var ga_tc_click_event={init:function(args){args.event="AppEx_TC";var valid_actions=["Demo","Test Drive","Get It Now - Production","Get It Now - Sandbox"];if(valid_actions.indexOf(args.gin_org_type)>-1){var listing_action_key=[args.listingId,args.gin_org_type].join("-");
if(!alreadyClicked.has(listing_action_key)){if(args.gin_org_type=="Demo"||args.gin_org_type=="Test Drive"){args.gin_org_type="";}pushToDataLayer(args);alreadyClicked.add(listing_action_key);}}},};var ga_hovered_tiles=[];var body=document.getElementsByTagName("body");body=body[0];body.addEventListener("analytic_tile_open",function(ev){var tile=ev.detail.tile;
var args={"analytic-featured":tile.dataset.analyticFeatured,"analytic-recommended":tile.dataset.analyticRecommended,"analytic-ignorehover":tile.dataset.ignorehover,listingId:tile.dataset.listingId,listingInternalarticle:tile.dataset.listingInternalarticle,listingName:tile.dataset.listingName,listingType:tile.dataset.listingType,"listing-url":tile.dataset.listingUrl,hoverintent:tile.dataset.hoverintent,eventContext:"",};
if(ga_hovered_tiles.indexOf(args.listingId)===-1){Eventbus.publish("ga_tile_open",args);ga_hovered_tiles.push(args.listingId);}});body.addEventListener("analytic_user_install",function(ev){var args={listing:ev.detail.listing,action:ev.detail.action,};var event_element=ev.detail.element;if(event_element){args.listingName=event_element.dataset.listingName;
}Eventbus.publish("ga_user_install",args);});body.addEventListener("ga_submit_event",function(ev){var actionType=ev.detail.args.le_type;if((actionType)&&(actionType=="Demo"||actionType=="Test Drive")){pushToDataLayer(ev.detail.args);}});["click","analyticsClick"].forEach(function(event){body.addEventListener(event,function(ev){var event_element=ev.detail.element||ev.target||ev.srcElement;
var obj_type=event_element.nodeName.toUpperCase();var click_allowed_nodes=["INPUT"];var args={};var valid_ids=["checkbox-terms-and_condition-lead-form","checkbox-terms-and-condition-confirm-install"];if(click_allowed_nodes.indexOf(obj_type)>-1){if(valid_ids.indexOf(event_element.id)>-1&&event_element.checked){args.listingId=event_element.dataset.listingId;
args.listingName=event_element.dataset.listingName;args.gin_org_type=event_element.dataset.event;Eventbus.publish("ga_tc_click_event",args);}}});});Eventbus.subscribe("ga_tile_open",ga_tile_hover);Eventbus.subscribe("ga_user_install",ga_confirm_install);Eventbus.subscribe("ga_tc_click_event",ga_tc_click_event);
}};var CoveoEventManager={hoverRemoteAction:"",tileViewRemoteAction:"",screenShotRemoteAction:"",clickRemoteAction:"",customClickRemoteAction:"",tabSwitchRemoteAction:"",storeAnalyticCookie:"",initialize:function(token){var action=function(args,remoteAction,callback){if(args&&(!LegacySiteEvents.suppressEventForCta(JSON.parse(args).topic,"coveo"))){var cb=callback||function(result,event){};
Visualforce.remoting.Manager.invokeAction(remoteAction,args,cb,{escape:true,buffer:false});}};var coveo_tile_hover={init:function(args){args.userAgent=navigator.userAgent;args.visitorId=token;action(JSON.stringify(args),CoveoEventManager.hoverRemoteAction);},};var coveo_tile_view={init:function(args){args.userAgent=navigator.userAgent;
args.visitorId=token;action(JSON.stringify(args),CoveoEventManager.tileViewRemoteAction);},};var coveo_screenshot_view={init:function(args){args.listing=SubscribeTrackingEvents.get_listingId_from_meta();args.userAgent=navigator.userAgent;args.visitorId=token;action(JSON.stringify(args),CoveoEventManager.screenShotRemoteAction);
}};var coveo_custom_click={init:function(ele){redirectUserToExtContent.setValues(ele);var args={listing:redirectUserToExtContent.listingId,userAgent:navigator.userAgent,visitorId:token};action(JSON.stringify(args),CoveoEventManager.customClickRemoteAction,redirectUserToExtContent.evaluateRedirection());
},};var coveo_search_click={init:function(ele){redirectUserToExtContent.setValues(ele);var args=ele.getAttribute("data-analytic");action(args,CoveoEventManager.clickRemoteAction,redirectUserToExtContent.evaluateRedirection());},};var already_visited_tab=[];var coveo_listing_tab_switch={init:function(args){if(!already_visited_tab.includes(args.content)){args.listing=SubscribeTrackingEvents.get_listingId_from_meta();
args.userAgent=navigator.userAgent;args.visitorId=token;already_visited_tab=[args.content];action(JSON.stringify(args),CoveoEventManager.tabSwitchRemoteAction);}}};Eventbus.subscribe("analytics_shown_impression",coveo_tile_view);Eventbus.subscribe("analytics_tile_open",coveo_tile_hover);Eventbus.subscribe("analytics_carousel_shown_impression",coveo_screenshot_view);
Eventbus.subscribe("coveo_search_click",coveo_search_click);Eventbus.subscribe("coveo_custom_click",coveo_custom_click);Eventbus.subscribe("analytics_listing_tab_switch",coveo_listing_tab_switch);}};domready(function(){SubscribeTrackingEvents.setupEventListener();GoogleAnalyticsEventManager.initialize();
});var ToastManager={_index:0,_activeToasts:[],toastSpacing:5,duration:{brief:3*1000,medium:6*1000,extended:10*1000,sticky:-1},severity:{success:"success",info:"info",warning:"warning",error:"error"},createToast:function(cfg){this._validateConfig(cfg);var toast=this._buildToast(cfg);document.body.appendChild(toast);
this._activeToasts[toast.index]=toast;this._runLayout();},_buildToast:function(cfg){cfg.toastEl=this._generateToastDom(cfg);cfg.dismissFn=function(){document.body.removeChild(cfg.toastEl);ToastManager._activeToasts.splice(cfg.index,1);ToastManager._runLayout();if(cfg.dismissCallback){cfg.dismissCallback.call(cfg);
}};cfg.toastEl.querySelector(".slds-notify__close").addEventListener("click",cfg.dismissFn);if(cfg.duration!==ToastManager.duration.sticky){cfg.dismissTimeout=setTimeout(cfg.dismissFn,cfg.duration);cfg.toastEl.addEventListener("mouseover",function(){if(cfg.dismissTimeout){clearTimeout(cfg.dismissTimeout);
delete cfg.dismissTimeout;}});cfg.toastEl.addEventListener("mouseout",function(){cfg.dismissTimeout=setTimeout(cfg.dismissFn,cfg.duration);});}return cfg.toastEl;},_runLayout:function(){var activeToasts=document.querySelectorAll(".appx-managed-toast");var currentOffset=0;for(var i=0;i<activeToasts.length;
i++){activeToasts[i].style.marginTop=currentOffset+"px";currentOffset+=(activeToasts[i].scrollHeight+this.toastSpacing);}},_validateConfig:function(cfg){if(!cfg){throw new Error("Toast Configuration is required to call createToast");}cfg.duration=(cfg.duration?cfg.duration:ToastManager.duration.brief);
cfg.severity=(cfg.severity?cfg.severity:ToastManager.severity.info);if(!cfg.title){throw new Error("Toast must have a non-blank title");}else{if(ToastManager._values(ToastManager.duration).indexOf(cfg.duration)===-1){throw new Error("Unsupported duration value: "+cfg.duration);}else{if(ToastManager._values(ToastManager.severity).indexOf(cfg.severity)===-1){throw new Error("Unsupported severity value: "+cfg.severity);
}}}},_generateToastDom:function(cfg){var toastEl,bodyContent;var toastTpl='<div class="slds-notify_container appx-managed-toast">                <div class="slds-notify slds-notify_toast slds-theme_{{toastSeverity}} appx-toast-content" role="alert">                    <span class="slds-assistive-text">{{toastSeverity}}</span>                    <span class="slds-icon_container slds-icon-utility-{{toastSeverity}} slds-m-right_small slds-no-flex slds-align-top">                        <svg class="slds-icon slds-icon_small" aria-hidden="true">                            <use id="toast-icon-target" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+Appx.staticResourcesFolder+"/icons/symbols.svg#"+cfg.severity+'"></use>                        </svg>                    </span>                    <div class="slds-notify__content">                        <h2 class="slds-text-heading_small">{{toastTitle}}</h2>                        <p id="toast-content-detail">{{toastBody}}</p>                    </div>                    <button class="slds-button slds-button_icon slds-notify__close slds-button_icon-inverse" title="Close">                        <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true" >                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+Appx.staticResourcesFolder+'/icons/symbols.svg#close"></use>                        </svg>                            <span class="slds-assistive-text" data-role="close">Close</span>                    </button>                </div>            </div>';
toastTpl=toastTpl.replace(new RegExp("{{toastSeverity}}","g"),cfg.severity);toastEl=document.createElement("div");toastEl.innerHTML=toastTpl;toastEl.childNodes[0].setAttribute("data-toast-index",(++this._index).toString());cfg.index=this._index;toastEl.querySelector(".slds-notify__content .slds-text-heading_small").textContent=cfg.title;
toastEl.querySelector("span[data-role='close']").textContent=Appx.label.close;bodyContent=toastEl.querySelector("#toast-content-detail");if(cfg.body instanceof Node){bodyContent.textContent=null;bodyContent.appendChild(cfg.body);}else{if(typeof(cfg.body)==="string"){bodyContent.innerText=cfg.body;}else{toastEl.querySelector(".slds-notify__content").removeChild(bodyContent);
}}return toastEl.childNodes[0];},_values:function(obj){return Object.keys(obj).map(function(e){return obj[e];});},};var AppxNav={ulItem:null,listItems:null,init:function(){AppxNav.initDesktop();AppxNav.phoneOpenCloseInit();AppxNav.phoneMenuOpenCloseInit();AppxNav.subMenuExtraInit();},initDesktop:function(){AppxNav.ulItem=document.getElementsByClassName("appx-grid-nav")[0];
if(AppxNav.ulItem){AppxNav.listItems=AppxNav.ulItem.getElementsByClassName("appx-context-bar__item");var listItems=AppxNav.listItems;var phoneView=(Appx.getCurrentSiteState()==="s"||Appx.getCurrentSiteState()==="xs");for(var i=0;i<listItems.length;i++){var listItem=listItems[i];var listItemHref=listItem.getElementsByTagName("a")[0];
if(listItemHref){if(phoneView){listItemHref.removeEventListener("click",AppxNav.click,false);}else{listItemHref.addEventListener("click",AppxNav.click,false);listItemHref.addEventListener("mouseenter",AppxNav.mouseIn,false);listItemHref.addEventListener("focus",AppxNav.mouseIn,false);}}}}},subMenuExtraInit:function(){var extraSubMenuBlocks=document.getElementsByClassName("appx-sub-menu-block-extra");
for(var i=0;i<extraSubMenuBlocks.length;i++){var menuBlockOuter=Appx.findAncestor(extraSubMenuBlocks[i],"appx-dropdown-trigger");if(menuBlockOuter){menuBlockOuter.classList.add("appx-dropdown-trigger-with-extra-sub-menu-block");}}},mouseIn:function(event){var listItemHref=this;var desktopNavOpen=AppxNav.ulItem.classList.contains("appx-grid-nav--active-submenu");
var listItem=Appx.findAncestor(listItemHref,"appx-context-bar__item");if(listItem&&desktopNavOpen&&!listItem.classList.contains("appx-context-bar__item-active")&&listItem.classList.contains("appx-dropdown-trigger")){listItemHref.focus();AppxNav.openMenu(listItem);}},click:function(event){var listItemHref=this;
var listItem=Appx.findAncestor(listItemHref,"appx-context-bar__item");if(listItem){if(listItem.classList.contains("appx-context-bar__item-active")){AppxNav.closeMenu(listItem);}else{if(listItem.classList.contains("appx-dropdown-trigger")){AppxNav.openMenu(listItem);}}}},openMenu:function(listItem){AppxNav.removeAllClassNameActive();
AppxNav.addClassNameActive(listItem);setTimeout(function(){document.addEventListener("touchend",AppxNav.documentClick,false);document.addEventListener("click",AppxNav.documentClick,false);document.addEventListener("keyup",AppxNav.keyU,false);},100);},closeMenu:function(listItem){document.removeEventListener("touchend",AppxNav.documentClick,false);
document.removeEventListener("click",AppxNav.documentClick,false);document.removeEventListener("keyup",AppxNav.keyU,false);AppxNav.removeClassNameActive(listItem);},addClassNameActive:function(listItem){var ulItem=AppxNav.ulItem;listItem.classList.add("appx-context-bar__item-active");ulItem.classList.add("appx-grid-nav--active");
ulItem.classList.add("appx-grid-nav--active-submenu");},removeClassNameActive:function(listItem){var ulItem=AppxNav.ulItem;listItem.classList.remove("appx-context-bar__item-active");ulItem.classList.remove("appx-grid-nav--active");ulItem.classList.remove("appx-grid-nav--active-submenu");},removeAllClassNameActive:function(){var listItems=AppxNav.listItems;
for(var i=0;i<listItems.length;i++){AppxNav.closeMenu(listItems[i]);}},documentClick:function(event){var clickTarget=event.target;var insideClick=clickTarget.classList.contains("appx-dropdown")||Appx.findAncestor(clickTarget,"appx-dropdown");if(!insideClick){AppxNav.removeAllClassNameActive();}},keyU:function(event){switch(event.keyCode){case 27:AppxNav.removeAllClassNameActive();
break;}},phoneOpenCloseInit:function(){var phoneTrigger=document.getElementById("appx_phone_nav_trigger");if(phoneTrigger){phoneTrigger.addEventListener("click",AppxNav.phoneOpen,false);}var phoneTriggerSearch=document.getElementById("appx_phone_nav_trigger_search");if(phoneTriggerSearch){phoneTriggerSearch.addEventListener("click",AppxNav.phoneOpen,false);
}},phoneMenuOpenCloseInit:function(){var mainMenuItems=document.querySelectorAll(".appx-context-bar .appx-dropdown-trigger");var mainMenuItemsLength=mainMenuItems.length;var phoneView=(Appx.getCurrentSiteState()==="s"||Appx.getCurrentSiteState()==="xs");for(var i=0;i<mainMenuItemsLength;i++){if(phoneView){mainMenuItems[i].addEventListener("click",AppxNav.phoneMenuOpenClose,false);
}else{mainMenuItems[i].removeEventListener("click",AppxNav.phoneMenuOpenClose,false);}}},phoneOpen:function(){var outer=document.getElementById("appx_outer");if(outer){var body=document.body;var header=document.getElementById("appx_header");var content=document.getElementById("appx_content");body.style.overflow="hidden";
var outerW=Appx.getDimensions(outer).w;body.style.overflow="";header.style.width=outerW+"px";content.style.width=outerW+"px";outer.classList.add("appx-nav-phone--open");}Appx.openBackDrop("phoneNav");var backDrop=document.getElementById("appx_backdrop");if(backDrop){backDrop.addEventListener("click",AppxNav.phoneClose,false);
}Appx.preventContentScroll();},phoneClose:function(){var outer=document.getElementById("appx_outer");if(outer){var header=document.getElementById("appx_header");var content=document.getElementById("appx_content");outer.classList.remove("appx-nav-phone--open");header.style.width="";content.style.width="";
}Appx.closeBackDrop("phoneNav");var backDrop=document.getElementById("appx_backdrop");if(backDrop){backDrop.removeEventListener("click",AppxNav.phoneClose,false);}Appx.allowContentScroll();},phoneMenuOpenClose:function(event){var mainMenuItem=this;var evtTarget=event.target;var dropDown=Appx.findAncestor(evtTarget,"appx-dropdown");
if(dropDown===null){var subMenu=mainMenuItem.querySelector(".appx-dropdown");if(subMenu){if(!subMenu.classList.contains("appx-dropdown--open")){subMenu.classList.add("appx-dropdown--open");mainMenuItem.classList.add("appx-dropdown-trigger--open");}else{subMenu.classList.remove("appx-dropdown--open");
mainMenuItem.classList.remove("appx-dropdown-trigger--open");}}}},resize:function(){var phoneNavOpen=document.getElementById("appx_outer").classList.contains("appx-nav-phone--open");var desktopNavOpen=false;if(AppxNav.ulItem){desktopNavOpen=AppxNav.ulItem.classList.contains("appx-grid-nav--active-submenu");
}if(phoneNavOpen){var curSiteState=Appx.getCurrentSiteState();if(curSiteState!=="s"&&curSiteState!=="xs"){AppxNav.phoneClose();}}else{if(desktopNavOpen){var curSiteState=Appx.getCurrentSiteState();if(curSiteState==="s"||curSiteState==="xs"){AppxNav.removeAllClassNameActive();}}}AppxNav.initDesktop();
AppxNav.phoneMenuOpenCloseInit();},orientationChange:function(){var phoneNavOpen=document.getElementById("appx_outer").classList.contains("appx-nav-phone--open");if(phoneNavOpen){var curSiteState=Appx.getCurrentSiteState();if(curSiteState==="s"||curSiteState==="xs"){AppxNav.phoneClose();window.setTimeout(function(){AppxNav.phoneOpen();
},300);}}AppxNav.initDesktop();AppxNav.phoneMenuOpenCloseInit();}};domready(function(){AppxNav.init();});var appxNavWindowResize=debounce(function(){AppxNav.resize();},Appx.debounceTime);window.addEventListener("resize",appxNavWindowResize);window.addEventListener("orientationchange",AppxNav.orientationChange);
var AppxHeaderSearch={typeDelay:200,typeDelayTimer:null,inAppExchangeSuffix:"in AppExchange",init:function(){var searchField=document.getElementById("appx-search-01");var searchFieldBackdrop=document.querySelector(".appx-lookup-backdrop");if(searchField){searchField.addEventListener("focus",function(event){AppxHeaderSearch.searchFocus(this,event);
},false);searchField.addEventListener("blur",function(event){AppxHeaderSearch.searchBlur(this,event);},false);searchField.addEventListener("keydown",function(event){AppxHeaderSearch.keyD(this,event);},false);searchField.addEventListener("keyup",function(event){AppxHeaderSearch.keyU(this,event);},false);
if(searchFieldBackdrop){searchFieldBackdrop.addEventListener("click",function(event){AppxHeaderSearch.searchBlur(searchField,event);},false);}}},searchFocus:function(searchField,event){AppxHeaderSearchTray.initTray(searchField);},searchBlur:function(searchField,event){AppxHeaderSearchTray.initTray(searchField,"hide");
},keyD:function(searchField,event){switch(event.keyCode){case 38:AppxHeaderSearchTray.selectTrayItem("up");event.preventDefault();return false;break;case 40:AppxHeaderSearchTray.selectTrayItem("down");event.preventDefault();return false;break;case 13:AppxHeaderSearchTray.selectTrayItem("go",searchField);
break;case 27:AppxHeaderSearchTray.showHideTray(searchField,"hide");break;}},keyU:function(searchField,event){if(event.keyCode!==27&&event.keyCode!==37&&event.keyCode!==38&&event.keyCode!==39&&event.keyCode!==40&&event.keyCode!==13){clearTimeout(AppxHeaderSearch.typeDelayTimer);AppxHeaderSearch.typeDelayTimer=setTimeout(function(){AppxHeaderSearchTray.initTray(searchField);
},AppxHeaderSearch.typeDelay);}}};var AppxHeaderSearchTray={initTray:function(searchField,showHide){if(typeof showHide==="undefined"){showHide="show";}if(showHide==="hide"){AppxHeaderSearchTray.showHideTray(searchField,"hide");return;}var searchQuery=AppxHeaderSearchTray.searchFieldValue(searchField);
AppxHeaderSearchTray.modifySearchtermTrayItem();document.body.addEventListener("appxBuildSearchTray",AppxHeaderSearchTray.buildTray,false);var appxShowSearchTrayEvent=new CustomEvent("appxShowSearchTray",{detail:{searchFieldValue:searchQuery,searchField:searchField}});document.body.dispatchEvent(appxShowSearchTrayEvent);
AppxHeaderSearchTray.renderSVGIcons("global_search_list_01");},showHideTray:function(searchField,showHide){var theParent=Appx.findAncestor(searchField,"appx-lookup");if(theParent){if(showHide==="show"){theParent.classList.add("slds-is-open");}else{if(showHide==="hide"){window.setTimeout(function(){theParent.classList.remove("slds-is-open");
clearTimeout(AppxHeaderSearch.typeDelayTimer);},200);}}}},searchFieldValue:function(searchField){return searchField.value.trim();},buildTray:function(e){var searchField=e.detail.searchField;var searchFieldValue=e.detail.searchFieldValue;var trayType=e.detail.trayType;var trayData=e.detail.trayData;var trayTitle=e.detail.trayTitle;
var urlPrefix=e.detail.urlPrefix;if(typeof trayData.listings==="undefined"&&trayType==="recent"){AppxHeaderSearchTray.showHideTray(searchField,"hide");}else{var trayUl=document.getElementById("global_search_list_01_ul");while(trayUl.firstChild){trayUl.removeChild(trayUl.firstChild);}if(trayType==="recent"){AppxHeaderSearchTray.buildTrayTitleRecent(trayTitle,trayUl);
}else{AppxHeaderSearchTray.buildTrayTitleSuggestions(searchFieldValue,urlPrefix,trayTitle,trayUl);}AppxHeaderSearchTray.buildTrayItems(trayType,trayData,urlPrefix,trayUl);AppxHeaderSearchTray.showHideTray(searchField,"show");if(trayType!=="recent"){AppxHeaderSearchTray.selectTrayItem("down");}}},buildTrayTitleRecent:function(trayTitle,trayUl){var li=document.createElement("LI");
var h3=document.createElement("H3");var t=document.createTextNode(trayTitle);li.setAttribute("role","presentation");li.setAttribute("class","appx-search-tray-title");h3.setAttribute("role","presentation");h3.setAttribute("class","slds-lookup__item_label slds-text-body_small");h3.appendChild(t);li.appendChild(h3);
trayUl.appendChild(li);},buildTrayTitleSuggestions:function(searchFieldValue,urlPrefix,trayTitleSuffix,trayUl){var searchField=document.getElementById("appx-search-01");if(searchField){var searchQuery=AppxHeaderSearchTray.searchFieldValue(searchField);if(searchQuery!==""){searchFieldValue=searchQuery;
}}var li=document.createElement("LI");var a=document.createElement("A");var span=document.createElement("SPAN");var span2=document.createElement("SPAN");var t2=document.createTextNode('"'+searchFieldValue+'" '+trayTitleSuffix);li.setAttribute("role","presentation");a.setAttribute("role","option");a.setAttribute("tabindex","-1");
a.setAttribute("href",urlPrefix+encodeURIComponent(searchFieldValue));a.setAttribute("class","slds-lookup__item-action slds-media slds-media_center appx-search-tray-item appx-search-tray-item--suggestion appx-search-tray-item-searchterm");a.setAttribute("data-i","0");span.setAttribute("class","slds-media__body");
span2.setAttribute("class","slds-lookup__result-text");span2.appendChild(t2);span.appendChild(span2);if(Appx.staticResourcesFolder!==null){var svg=Appx.createSvg("search","slds-input__icon","true",Appx.staticResourcesFolder+"/icons/symbols.svg","DIV","slds-media__figure");a.appendChild(svg);}a.appendChild(span);
li.appendChild(a);trayUl.appendChild(li);a.addEventListener("mouseover",function(event){AppxHeaderSearchTray.trayItemMouseOver(this,event);},false);},buildTrayItems:function(trayType,trayData,urlPrefix,trayUl){if(trayType==="recent"){var data=trayData.listings;for(var i=0;i<data.length;i++){var j=parseInt(i)+1;
var itemText=data[i].name;var itemId=data[i].id;var itemImg=data[i].logoUrl;var itemType=data[i].typeLabel;var itemRecordType=data[i].type;var itemProvider=data[i].publisherName;var itemUrl=data[i].url;AppxHeaderSearchTray.buildTrayItemRecent(j,itemText,itemId,itemImg,itemType,itemProvider,itemUrl,trayUl,itemRecordType);
}}else{var data=trayData.completions;for(var i=0;i<data.length;i++){var j=parseInt(i)+1;var itemText=data[i].expression;var itemTextHighlighted=data[i].highlighted;AppxHeaderSearchTray.buildTrayItemSuggestions(j,itemText,itemTextHighlighted,urlPrefix,trayUl);}}},buildTrayItemRecent:function(i,itemText,itemId,itemImg,itemType,itemProvider,urlPrefix,trayUl,itemRecordType){var li=document.createElement("LI");
var a=document.createElement("A");var div=document.createElement("DIV");var img=document.createElement("IMG");var span=document.createElement("SPAN");var span2=document.createElement("SPAN");var span3=document.createElement("SPAN");var spanDummySVG=document.createElement("SPAN");var t1=itemProvider===""?itemType:itemType+" "+String.fromCharCode(8226)+" "+itemProvider;
var t2=document.createTextNode(itemText);var t3=document.createTextNode(t1);li.setAttribute("role","presentation");a.setAttribute("role","option");a.setAttribute("tabindex","-1");var url=urlPrefix;a.setAttribute("href",url);a.setAttribute("class","slds-lookup__item-action slds-media slds-media appx-search-tray-item");
a.setAttribute("data-i",i);div.setAttribute("class","slds-media__figure");if(itemRecordType==="content"){a.setAttribute("target","_blank");spanDummySVG.setAttribute("data-path",Appx.staticResourcesFolder+"/icons/symbols.svg");spanDummySVG.setAttribute("class","svg-dummy-container slds-icon_container");
spanDummySVG.setAttribute("data-size","small");spanDummySVG.setAttribute("data-name",itemImg);spanDummySVG.setAttribute("data-role","content-icon");spanDummySVG.setAttribute("data-color","#54698D");spanDummySVG.setAttribute("data-category","category");spanDummySVG.setAttribute("data-svg-rendered","0");
spanDummySVG.setAttribute("data-className"," ");spanDummySVG.setAttribute("data-containerClass"," ");}else{img.setAttribute("src",itemImg);}span.setAttribute("class","slds-media__body");span2.setAttribute("class","slds-lookup__result-text");span3.setAttribute("class","slds-lookup__result-meta slds-text-body_small");
span2.appendChild(t2);span3.appendChild(t3);span.appendChild(span2);span.appendChild(span3);if(itemRecordType==="content"){div.appendChild(spanDummySVG);}else{div.appendChild(img);}a.appendChild(div);a.appendChild(span);li.appendChild(a);trayUl.appendChild(li);a.addEventListener("mouseover",function(event){AppxHeaderSearchTray.trayItemMouseOver(this,event);
},false);},buildTrayItemSuggestions:function(i,itemText,itemTextHighlighted,urlPrefix,trayUl){var markedItemText=AppxHeaderSearchTray.buildTrayItemSuggestionsText(itemText,itemTextHighlighted);var li=document.createElement("LI");var a=document.createElement("A");var span=document.createElement("SPAN");
var span2=document.createElement("SPAN");li.setAttribute("role","presentation");a.setAttribute("role","option");a.setAttribute("href",urlPrefix+encodeURIComponent(itemText));a.setAttribute("class","slds-lookup__item-action slds-media slds-media_center appx-search-tray-item appx-search-tray-item--suggestion");
a.setAttribute("data-i",i);a.setAttribute("data-itemtext",itemText);span.setAttribute("class","slds-media__body");span2.setAttribute("class","slds-lookup__result-text");span2.appendChild(markedItemText);span.appendChild(span2);if(Appx.staticResourcesFolder!==null){var svg=Appx.createSvg("search","slds-input__icon","true",Appx.staticResourcesFolder+"/icons/symbols.svg","DIV","slds-media__figure");
a.appendChild(svg);}a.appendChild(span);li.appendChild(a);trayUl.appendChild(li);a.addEventListener("mouseover",function(event){AppxHeaderSearchTray.trayItemMouseOver(this,event);},false);a.addEventListener("click",function(event){AppxHeaderSearchTray.trayItemClick(this,event);},false);},buildTrayItemSuggestionsText:function(itemText,itemTextHighlighted){var pattern=/\)|\(|\[|\]/ig;
var itemTextHighlighted2=itemTextHighlighted.replace(pattern,"");matchesCurlyBrackets=itemTextHighlighted2.match(/\{(.*?)\}/gi);var itemTextWithMarks=document.createTextNode(itemText);if(matchesCurlyBrackets&&matchesCurlyBrackets.length>0){var itemTextWithMarksTemp=document.createElement("SPAN");for(var i=0;
i<matchesCurlyBrackets.length;i++){var markMatch=matchesCurlyBrackets[i];var markMatch2=matchesCurlyBrackets[i].replace("{","");var markMatch2=markMatch2.replace("}","");var itemTextSplit=itemTextHighlighted2.split(markMatch,2);var itemTextWithMarks1=document.createTextNode(itemTextSplit[0]);var itemTextWithMarks2=document.createTextNode(markMatch2);
var mark=document.createElement("MARK");mark.appendChild(itemTextWithMarks2);itemTextWithMarksTemp.appendChild(itemTextWithMarks1);itemTextWithMarksTemp.appendChild(mark);if(i<matchesCurlyBrackets.length-1){var n=itemTextHighlighted2.indexOf(markMatch);var l=markMatch.length;itemTextHighlighted2=itemTextHighlighted2.substring(n+l);
}else{var itemTextWithMarks3=document.createTextNode(itemTextSplit[1]);itemTextWithMarksTemp.appendChild(itemTextWithMarks3);}}itemTextWithMarks=itemTextWithMarksTemp;}return itemTextWithMarks;},trayItemMouseOver:function(el,e){AppxHeaderSearchTray.selectTrayItemNow(el.getAttribute("data-i"),"force");
},trayItemClick:function(el,e){var searchField=document.getElementById("appx-search-01");var itemText=el.getAttribute("data-itemtext");if(searchField&&itemText!==null&&itemText!==undefined&&itemText!==""){searchField.value=itemText;}},selectTrayItem:function(action,searchField){var trayUl=document.getElementById("global_search_list_01_ul");
var trayLi=trayUl.getElementsByTagName("li");var trayLiLength=trayLi.length;var curSel=AppxHeaderSearchTray.selectedTrayItem();var newSel=curSel;var j=0;if(action==="go"){AppxHeaderSearchTray.modifySearchtermTrayItem();}if(typeof searchField!=="undefined"&&(curSel===-1||curSel===0)&&action==="go"){var searchQuery=AppxHeaderSearchTray.searchFieldValue(searchField);
if(searchQuery!==""&&typeof appxSimpleSearch==="function"){appxSimpleSearch(searchQuery);return;}}if(trayLi[0].classList.contains("appx-search-tray-title")){j=1;}if(action==="up"){newSel--;if(newSel<0+j){newSel=trayLiLength-1;}}else{if(action==="down"){newSel++;if(newSel>trayLiLength-1){newSel=0+j;}else{if(newSel<0+j){newSel=j;
}}}}AppxHeaderSearchTray.selectTrayItemNow(newSel,action);},selectTrayItemNow:function(newSel,action){newSel=parseInt(newSel);var trayUl=document.getElementById("global_search_list_01_ul");var trayLi=trayUl.getElementsByTagName("li");var trayLiLength=trayLi.length;for(var i=0;i<trayLiLength;i++){var trayHref=trayLi[i].querySelector(".appx-search-tray-item");
if(trayHref){if(action==="go"&&i===newSel){trayHref.click();return;}trayHref.classList.remove("appx-search-tray-item-selected");if(i===newSel){trayHref.classList.add("appx-search-tray-item-selected");}}}},selectedTrayItem:function(){var trayUl=document.getElementById("global_search_list_01_ul");var trayLi=trayUl.getElementsByTagName("li");
var trayLiLength=trayLi.length;for(var i=0;i<trayLiLength;i++){var trayHref=trayLi[i].querySelector(".appx-search-tray-item");if(trayHref){if(trayHref.classList.contains("appx-search-tray-item-selected")){return i;}}}return -1;},modifySearchtermTrayItem:function(){var trayUl=document.getElementById("global_search_list_01_ul");
if(trayUl){var searchField=document.getElementById("appx-search-01");var searchQuery=AppxHeaderSearchTray.searchFieldValue(searchField);var TrayItemSearchterm=trayUl.getElementsByClassName("appx-search-tray-item-searchterm")[0];if(TrayItemSearchterm){var currentHref=TrayItemSearchterm.getAttribute("href");
var startHref=currentHref.substring(0,currentHref.indexOf("=")+1);var newHref=startHref+encodeURIComponent(searchQuery);TrayItemSearchterm.setAttribute("href",newHref);var textWrapper=TrayItemSearchterm.getElementsByClassName("slds-lookup__result-text")[0];if(textWrapper){var t2=document.createTextNode('"'+searchQuery+'" '+AppxHeaderSearch.inAppExchangeSuffix);
textWrapper.innerHTML="";textWrapper.appendChild(t2);}}}},renderSVGIcons:function(scope){var defaultScope=".svg-dummy-container";if(scope){defaultScope="#"+scope+" "+defaultScope;}var dummies=document.querySelectorAll(defaultScope);for(var i=0;i<dummies.length;i++){var isRendered=dummies[i].getAttribute("data-svg-rendered")==="1";
if(!isRendered){AppxHeaderSearchTray.buildSVG(dummies[i]);}}},buildSVG:function(container){if(container){var size=container.getAttribute("data-size");var name=container.getAttribute("data-name");var role=container.getAttribute("data-role");var color=container.getAttribute("data-color");var className=container.getAttribute("data-className");
var containerClass=container.getAttribute("data-containerClass");var category=container.getAttribute("data-category");var path=container.getAttribute("data-path");var prefix="slds-";var svgns="http://www.w3.org/2000/svg";var xlinkns="http://www.w3.org/1999/xlink";var containerClassName=[prefix+"icon_container",prefix+"icon-"+category+"-"+name,containerClass].join(" ");
var iconClassName=prefix+"icon "+prefix+"icon--"+size+" "+className;var svgroot=document.createElementNS(svgns,"svg");svgroot.setAttribute("aria-hidden","true");svgroot.setAttribute("class",iconClassName);svgroot.setAttribute("name",name);svgroot.setAttribute("role",role);svgroot.setAttribute("size",size);
svgroot.setAttribute("style","fill:"+color);svgroot.setAttribute("xmlns",svgns);svgroot.setAttribute("xmlns:xlink",xlinkns);var shape=document.createElementNS(svgns,"use");var svgPath=path+"#"+name;shape.setAttributeNS(xlinkns,"xlink:href",svgPath);svgroot.appendChild(shape);container.insertBefore(svgroot,container.firstChild);
container.setAttribute("data-svg-rendered","1");}}};domready(function(){AppxHeaderSearch.init();});var AppxHeaderUsermenu={phoneInitDone:0,init:function(){var phoneView=(Appx.getCurrentSiteState()==="s"||Appx.getCurrentSiteState()==="xs");if(phoneView){AppxHeaderUsermenu.phoneInit();}else{var userImage=document.getElementById("appx_header_user");
if(userImage){userImage.addEventListener("click",AppxHeaderUsermenu.openClose,false);}}},phoneInit:function(){if(AppxHeaderUsermenu.phoneInitDone===0){AppxHeaderUsermenu.phonepopulateUserBlock();AppxHeaderUsermenu.phoneAddLinks();AppxHeaderUsermenu.phoneInitDone=1;}},phonepopulateUserBlock:function(){var phoneUserBlock=document.getElementById("appx_nav_phone_user");
var headerUserButton=document.getElementById("appx_header_user");if(phoneUserBlock&&headerUserButton){var usermenuProfileLink=document.getElementById("appx_usermenu_link_profile");if(usermenuProfileLink){var profileUrl=usermenuProfileLink.getAttribute("href");phoneUserBlock.setAttribute("href",profileUrl);
}var userImage=document.getElementById("appx_nav_phone_user_image");var headerUserImage=headerUserButton.getElementsByTagName("img")[0];if(userImage&&headerUserImage){var headerUserImageSrc=headerUserImage.getAttribute("src");userImage.setAttribute("src",headerUserImageSrc);}var userNameEl=document.getElementById("appx_nav_phone_user_name");
var usermenuNameEl=document.getElementById("appx_usermenu_name");if(userNameEl&&usermenuNameEl){var userName=usermenuNameEl.innerHTML;var t=document.createTextNode(userName);userNameEl.appendChild(t);}var userEmailEl=document.getElementById("appx_nav_phone_user_email");var usermenuEmailEl=document.getElementById("appx_usermenu_email");
if(userEmailEl&&usermenuEmailEl){var userEmail=usermenuEmailEl.innerHTML;var t=document.createTextNode(userEmail);userEmailEl.appendChild(t);}phoneUserBlock.classList.remove("appx-nav-phone--user-hidden");}},phoneAddLinks:function(){var phoneUsermenu=document.getElementById("appx_nav_phone_usermenu");
if(phoneUsermenu){var usermenuProfileLink=document.getElementById("appx_usermenu_link_profile");if(usermenuProfileLink){AppxHeaderUsermenu.phoneCreateAndAddLink(usermenuProfileLink,phoneUsermenu);}var savedListLink=document.getElementById("appx_saved_list_link");if(savedListLink){var savedListLinkText=savedListLink.querySelector(".slds-assistive-text").innerHTML;
AppxHeaderUsermenu.phoneCreateAndAddLink(savedListLink,phoneUsermenu,savedListLinkText);}var bottomLinks=document.getElementsByClassName("appx-usermenu__bottom-link");for(var i=0;i<bottomLinks.length;i++){AppxHeaderUsermenu.phoneCreateAndAddLink(bottomLinks[i],phoneUsermenu);}var logoutLink=document.getElementById("appx_usermenu_link_logout");
if(logoutLink){AppxHeaderUsermenu.phoneCreateAndAddLink(logoutLink,phoneUsermenu);}phoneUsermenu.classList.remove("appx-nav-phone--usermenu-hidden");}},phoneCreateAndAddLink:function(link,menu,linkText){if(typeof linkText==="undefined"){var linkText=link.text;if(linkText===undefined){linkText=link.innerHTML;
}}var linkUrl=link.getAttribute("href");var a=document.createElement("A");var t=document.createTextNode(linkText);a.setAttribute("href",linkUrl);a.appendChild(t);menu.appendChild(a);},openClose:function(event,action){var userImage=document.getElementById("appx_header_user");var userMenu=document.getElementById("appx_usermenu");
var userBackdrop=document.getElementById("appx_usermenu_backdrop");var forceClose=0;if(typeof action!=="undefined"){if(action==="close"){forceClose=1;}}if(userMenu.classList.contains("appx-usermenu--open")||forceClose===1){document.removeEventListener("keyup",AppxHeaderUsermenu.keyU,false);userMenu.classList.remove("appx-usermenu--open");
if(userImage){userImage.classList.remove("appx-userimage--open");userImage.focus();}if(userBackdrop){userBackdrop.removeEventListener("click",AppxHeaderUsermenu.close,false);}}else{userMenu.classList.add("appx-usermenu--open");document.addEventListener("keyup",AppxHeaderUsermenu.keyU,false);if(userImage){userImage.classList.add("appx-userimage--open");
}if(userBackdrop){userBackdrop.addEventListener("click",AppxHeaderUsermenu.close,false);}}},close:function(event){AppxHeaderUsermenu.openClose(event,"close");},keyU:function(event){switch(event.keyCode){case 27:AppxHeaderUsermenu.close();break;case 9:var focused=AppxHeaderUsermenu.focusedEl();var usermenuLinks=AppxHeaderUsermenu.getUsermenuLinks();
var usermenuLinksLength=usermenuLinks.length;if(event.shiftKey&&focused===null){usermenuLinks[usermenuLinksLength-1].focus();}else{if(!event.shiftKey&&focused===null){usermenuLinks[0].focus();}}break;}},focusedEl:function(){var usermenuLinks=AppxHeaderUsermenu.getUsermenuLinks();var curElement=document.activeElement;
var cur=null;for(var i=0;i<usermenuLinks.length;i++){if(usermenuLinks[i]===curElement){cur=i;}}return cur;},getUsermenuLinks:function(){var usermenu=document.getElementById("appx_usermenu");var usermenuLinks=usermenu.getElementsByTagName("a");return usermenuLinks;}};domready(function(){AppxHeaderUsermenu.init();
});var appxHeaderUsermenuWindowResize=debounce(function(){AppxHeaderUsermenu.init();},Appx.debounceTime);window.addEventListener("resize",appxHeaderUsermenuWindowResize);var AppxTile={useBackDrop:false,displayHoverCloseToTitleName:false,tileFrontInTimeDelay:100,tileFocusOutTimeDelay:200,tileTimeoutClose:null,windowFocusJustHappened:false,windowFocusDelay:100,isRedirecting:false,disallowedTypes:[],hoverintentOptions:{sensitivity:4,interval:100,timeout:100},init:function(){window.clearTimeout(AppxTile.tileTimeout);
AppxTile.loadImages();AppxTile.addEvents();AppxTile.frontOutAll();AppxTile.linkClick();AppxTile.onUnload();if(AppxTile.useBackDrop===true){var backDrop=document.getElementById("appx_backdrop");if(backDrop){var backDropEvent=backDrop.getAttribute("data-event");if(backDropEvent==="generic"){Appx.closeBackDrop();
}}}AppxSvgIE.buildSVGForIEAfterRerender();},loadImages:function(){if(Appx.getCurrentSiteState()==="s"||Appx.getCurrentSiteState()==="xs"){var tileImgs=document.querySelectorAll(".appx-tile .appx-tile-img-s img");for(var i=0;i<tileImgs.length;i++){if(tileImgs[i].getAttribute("data-src")){tileImgs[i].setAttribute("src",tileImgs[i].getAttribute("data-src"));
tileImgs[i].removeAttribute("data-src");}}}else{var tileImgs=document.querySelectorAll(".appx-tile .appx-tile-img img, .appx-tile .appx-tile-logo-img img, .appx-tile-table .appx-tile-logo-img img, .appx-tile-s .appx-tile-img-s img");for(var i=0;i<tileImgs.length;i++){if(tileImgs[i].getAttribute("data-src")){tileImgs[i].setAttribute("src",tileImgs[i].getAttribute("data-src"));
tileImgs[i].removeAttribute("data-src");var gp=tileImgs[i].parentNode.parentNode;var ggp=tileImgs[i].parentNode.parentNode.parentNode;if(gp.classList.contains("appx-tile-content-1")&&!ggp.classList.contains("appx-tile-s")){gp.classList.add("appx-tile-content-1-img-loaded");}}}}},addEvents:function(){window.addEventListener("focus",AppxTile.windowFocusIn,false);
var htmlEl=document.querySelector("html");var htmlElCLassNames=htmlEl.classList;var tiles=document.querySelectorAll(".appx-tile, .appx-tile-table");for(var i=0;i<tiles.length;i++){var tile=tiles[i];var saveB=tile.querySelector(".appx-btn-save");var categorySpans=tile.querySelectorAll(".appx-tile-content-el-value-category");
var applyB=tile.querySelector(".appx-btn-applynow-tile");if(saveB!==null){saveB.removeEventListener("click",AppxTile.save,false);}if(applyB!==null){applyB.removeEventListener("click",AppxTile.apply,false);}for(var j=0;j<categorySpans.length;j++){categorySpans[j].removeEventListener("click",AppxTile.categoryClick,false);
}tile.removeEventListener("focus",AppxTile.focusIn,false);tile.removeEventListener("blur",AppxTile.focusOut,false);if(tile.getAttribute("data-ignorehover")==="false"&&(Appx.getCurrentSiteState()==="m"||Appx.getCurrentSiteState()==="l"||Appx.getCurrentSiteState()==="xl")){if(tile.getAttribute("data-hoverintent")!=="yes"){hoverintent(tile,AppxTile.frontIn,AppxTile.frontOut).options(AppxTile.hoverintentOptions);
tile.setAttribute("data-hoverintent","yes");}if(applyB!==null){applyB.addEventListener("click",AppxTile.apply,false);}if(saveB!==null){saveB.addEventListener("click",AppxTile.save,false);document.body.addEventListener("appxTileWasSaved",AppxTile.saveEnd,false);}for(var j=0;j<categorySpans.length;j++){categorySpans[j].addEventListener("click",AppxTile.categoryClick,false);
}if(!htmlElCLassNames.contains("no-flexbox")&&!htmlElCLassNames.contains("flexboxtweener")){tile.addEventListener("focus",AppxTile.focusIn,false);tile.addEventListener("blur",AppxTile.focusOut,false);}var multiLineEl=tile.getElementsByClassName("appx-multi-line-to-fix");for(var k=0;k<multiLineEl.length;
k++){Appx.fixMultilines(multiLineEl[k]);}}}},frontIn:function(event,tile,action){if(typeof action!=="undefined"){var action="hoverIn";}if(action==="focusIn"){AppxTile.tileFocusOutTimeDelay=100;}else{AppxTile.tileFocusOutTimeDelay=200;}var theTile=AppxTile.findTile(event,tile);var tileExtra=theTile.querySelector(".appx-tile-content-2");
if(!theTile.classList.contains("appx-tile-open")&&(Appx.getCurrentSiteState()==="m"||Appx.getCurrentSiteState()==="l"||Appx.getCurrentSiteState()==="xl")){AppxTile.tileTimeout=window.setTimeout(function(){if(!theTile.classList.contains("appx-tile-table")&&AppxTile.useBackDrop===true){Appx.openBackDrop();
theTile.classList.add("appx-tile-open--with-backdrop");}var tilePos=AppxTile.getPosition(theTile);var tileDim=AppxTile.getDimensions(theTile);var windDim=AppxTile.getWindowDimensions();var extraClassNameHor="";var spaceL=tilePos.x;var spaceR=windDim.w-tilePos.x-tileDim.w;if(spaceL>spaceR){extraClassNameHor="appx-tile-open-left";
}theTile.classList.add("appx-tile-open");if(!AppxTile.disallowedTypes.includes(theTile.dataset.listingType)){var appxTileOpen=new CustomEvent("analytic_tile_open",{detail:{tile:theTile}});document.body.dispatchEvent(appxTileOpen);}if(theTile.classList.contains("appx-tile-table")){var trParent=Appx.findAncestor(theTile,"appx-result-section-table-tr");
if(trParent){trParent.classList.add("slds-is-selected");}}var openTilePos=AppxTile.getPosition(tileExtra);var openTileDim=AppxTile.getDimensions(tileExtra);var spaceBelowTile=windDim.h-openTilePos.y-openTileDim.h;var bottomTopMargin=5;if(spaceBelowTile<bottomTopMargin){var tileExtraTop=spaceBelowTile-bottomTopMargin;
if(tilePos.y+tileExtraTop+openTileDim.h<tilePos.y+tileDim.h){tileExtraTop=tileDim.h-openTileDim.h;}tileExtra.style.top=tileExtraTop+"px";}var openTilePos=AppxTile.getPosition(tileExtra);if(openTilePos.y<0){var tileExtraTop=-tilePos.y+bottomTopMargin;if(tileExtraTop-bottomTopMargin>tilePos.y){tileExtraTop=0;
}tileExtra.style.top=tileExtraTop+"px";}if(typeof tileExtraTop==="undefined"){var tileExtraTop=0;}var tileH=tileDim.h;var arrowH=18;var extraH=0;if(theTile.classList.contains("appx-tile-table")){extraH=10;}var mTop=tileH/2-arrowH/2+extraH-tileExtraTop;var arrowBefore=tileExtra.querySelector(".arrow-before");
var arrowAfter=tileExtra.querySelector(".arrow-after");if(arrowBefore){arrowBefore.style.marginTop=mTop+"px";}if(arrowAfter){arrowAfter.style.marginTop=mTop+"px";}if(extraClassNameHor!==""){theTile.classList.add(extraClassNameHor);}var tileExtraLeft=tileDim.w;if(extraClassNameHor==="appx-tile-open-left"){tileExtraLeft=-(openTileDim.w);
}tileExtra.style.left=tileExtraLeft+"px";var tileTitleEl=theTile.querySelector(".appx-listing-title-el");if(tileTitleEl&&(Appx.getCurrentSiteState()==="l"||Appx.getCurrentSiteState()==="xl")&&AppxTile.displayHoverCloseToTitleName===true){var tileLeft=AppxTile.getPosition(theTile).x;var titleLeft=AppxTile.getPosition(tileTitleEl).x;
var titleWidth=AppxTile.getDimensions(tileTitleEl).w;var titleRight=titleLeft+titleWidth;var titleDeltaRight=tileLeft+tileExtraLeft-titleRight-8;tileExtra.style.marginLeft=-titleDeltaRight+"px";}theTile.classList.add("appx-tile-open-100");theTile.focus();},AppxTile.tileFrontInTimeDelay);}},frontOut:function(event,tile,timer,mode){window.clearTimeout(AppxTile.tileTimeout);
var theTile=AppxTile.findTile(event,tile);var tileExtra=theTile.querySelector(".appx-tile-content-2");if(typeof timer==="undefined"){timer=10;}if(typeof mode==="undefined"){var theMode="one";}else{var theMode=mode;}if(theTile.classList.contains("appx-tile-open")){AppxTile.tileTimeoutClose=window.setTimeout(function(){theTile.classList.remove("appx-tile-open","appx-tile-open-right","appx-tile-open-left","appx-tile-open-bottom","appx-tile-open-top","appx-tile-open-100","appx-tile-focused","appx-tile-table-1","appx-tile-table-2","appx-tile-table-3","appx-tile-table-4","appx-tile-open--with-backdrop");
tileExtra.removeAttribute("style");var arrowBefore=theTile.querySelector(".arrow-before");var arrowAfter=theTile.querySelector(".arrow-after");if(arrowBefore){arrowBefore.removeAttribute("style");}if(arrowAfter){arrowAfter.removeAttribute("style");}if(theTile.classList.contains("appx-tile-table")){var trParent=Appx.findAncestor(theTile,"appx-result-section-table-tr");
if(trParent){trParent.classList.remove("slds-is-selected");}}if(theMode==="one"&&AppxTile.useBackDrop===true){Appx.closeBackDrop();}},timer);}},frontOutAll:function(){var tiles=document.querySelectorAll(".appx-tile, .appx-tile-table");for(var i=0;i<tiles.length;i++){if(tiles[i].classList.contains("appx-tile-open")){AppxTile.frontOut(null,tiles[i],1,"all");
}}},focusIn:function(event,tile){var theTile=AppxTile.findTile(event,tile);if(!theTile.classList.contains("appx-tile-open")){AppxTile.frontOutAll();if(AppxTile.windowFocusJustHappened===false){theTile.classList.add("appx-tile-focused");AppxTile.frontIn(event,theTile,"focusIn");theTile.addEventListener("keydown",AppxTile.keyD,false);
AppxTile.tileFocusOutTimeDelay=100;}}},focusOut:function(event,tile){var theTile=AppxTile.findTile(event,tile);var actEl=document.activeElement;if(!theTile.contains(actEl)&&theTile!==actEl){theTile.classList.remove("appx-tile-focused");AppxTile.frontOut(event,theTile,AppxTile.tileFocusOutTimeDelay);theTile.removeEventListener("keydown",AppxTile.keyD,false);
}},findTile:function(event,tile){if(typeof tile!=="undefined"){var theTile=tile;}else{var evtTarget=event.target;if(evtTarget.classList.contains("appx-tile")||evtTarget.classList.contains("appx-tile-table")){var theTile=evtTarget;}else{var evtTargetTag=evtTarget.tagName.toUpperCase();if(evtTargetTag==="LI"||evtTargetTag==="UL"||evtTargetTag==="TD"||evtTargetTag==="TR"){var evtTargetChildA=theTile.querySelector(".appx-tile, .appx-tile-table");
}else{var evtTargetChildA=Appx.findAncestor(evtTarget,"appx-tile");if(!evtTargetChildA){evtTargetChildA=Appx.findAncestor(evtTarget,"appx-tile-table");}}if(evtTargetChildA){var theTile=evtTargetChildA;}}}return theTile;},windowFocusIn:function(event){AppxTile.windowFocusJustHappened=true;windowFocusTimeout=window.setTimeout(function(){AppxTile.windowFocusJustHappened=false;
},AppxTile.windowFocusDelay);},keyD:function(event){var theTile=event.target;switch(event.keyCode){case 27:if(theTile.classList.contains("appx-tile-open")){theTile.classList.remove("appx-tile-focused");AppxTile.frontOut(event,theTile);theTile.removeEventListener("keydown",AppxTile.keyD,false);}break;
}},save:function(event,btn){event.preventDefault();event.stopPropagation();window.clearTimeout(AppxTile.tileTimeoutClose);if(typeof btn==="undefined"){var evtTarget=event.target;var evtTargetTag=evtTarget.tagName.toUpperCase();if(evtTargetTag==="SVG"||evtTargetTag==="USE"||evtTargetTag==="SPAN"){var btn=Appx.findAncestor(evtTarget,"appx-btn-save");
}else{var btn=evtTarget;}}btn.classList.add("appx-btn-save--active");btn.disabled=true;var theRow;var theTile=Appx.findAncestor(btn,"appx-tile");if(!theTile){theTile=Appx.findAncestor(btn,"appx-tile-table");theRow=Appx.findAncestor(btn,"appx-favorites-table-tr");}var withinSavedListingsPage=false;if(theRow){withinSavedListingsPage=true;
}if(theTile){var saveBtnCover=theTile.querySelector(".appx-btn-save-cover");if(saveBtnCover){saveBtnCover.classList.add("appx-btn-save-cover-active");}}var listingId=theTile.getAttribute("data-listing-id");var state="save";if(btn.classList.contains("appx-btn-save-saved")){state="saved";}var appxAnalyticsSaveClick=new CustomEvent("analyticsClick",{detail:{element:btn}});
document.body.dispatchEvent(appxAnalyticsSaveClick);if(withinSavedListingsPage){var appxTileSaveBtnWithinFavEvent=new CustomEvent("appxTileSaveBtnWithinFav",{detail:{listingId:listingId,tile:theTile,btn:btn,state:state}});document.body.dispatchEvent(appxTileSaveBtnWithinFavEvent);}else{var appxTileSaveBtnEvent=new CustomEvent("appxTileSaveBtn",{detail:{listingId:listingId,tile:theTile,btn:btn,state:state}});
document.body.dispatchEvent(appxTileSaveBtnEvent);}},saveEnd:function(e){var btn=e.detail.btn;var state=e.detail.state;btn.classList.remove("appx-btn-save--active");if(state==="saved"){btn.classList.add("appx-btn-save-saved");}else{btn.classList.remove("appx-btn-save-saved");}var theTile=Appx.findAncestor(btn,"appx-tile");
if(!theTile){theTile=Appx.findAncestor(btn,"appx-tile-table");}btn.disabled=false;if(theTile){var saveBtnCover=theTile.querySelector(".appx-btn-save-cover");if(saveBtnCover){saveBtnCover.classList.remove("appx-btn-save-cover-active");}}},categoryClick:function(e){e.preventDefault();e.stopPropagation();
window.clearTimeout(AppxTile.tileTimeoutClose);categoryLink=e.target;var url=categoryLink.getAttribute("data-url");document.location=url;},apply:function(e){console.log("##### boucha calling apply");},getPosition:function(el){var xPos=0;var yPos=0;while(el){if(el.tagName=="BODY"){var xScroll=el.scrollLeft||document.documentElement.scrollLeft;
var yScroll=el.scrollTop||document.documentElement.scrollTop;xPos+=(el.offsetLeft-xScroll+el.clientLeft);yPos+=(el.offsetTop-yScroll+el.clientTop);}else{xPos+=(el.offsetLeft-el.scrollLeft+el.clientLeft);yPos+=(el.offsetTop-el.scrollTop+el.clientTop);}el=el.offsetParent;}return{x:xPos,y:yPos};},getDimensions:function(el){return{w:el.offsetWidth,h:el.offsetHeight};
},getWindowDimensions:function(){return{w:window.innerWidth,h:window.innerHeight};},onUnload:function(){window.onbeforeunload=function(){if(!AppxTile.isRedirecting){AppxTile.isRedirecting=true;setTimeout(function(){AppxTile.isRedirecting=false;},4000);}};},linkClick:function(){var tileLinks=document.querySelectorAll(".tile-link-click");
for(var i=0;i<tileLinks.length;i++){tileLinks[i].addEventListener("click",function(__event){__event.preventDefault();if(!AppxTile.isRedirecting){AppxTile.isRedirecting=true;setTimeout(function(){AppxTile.isRedirecting=false;},4000);sendClickEvent(this);}});}}};domready(function(){AppxTile.init();});var appxTileWindowResize=debounce(function(){AppxTile.init();
},Appx.debounceTime);window.addEventListener("resize",appxTileWindowResize);var AppxCategoryMenu={init:function(){var menuoptions=document.getElementsByClassName("appx-menu-option");if(menuoptions.length===0){return;}for(var i=0;i<menuoptions.length;i++){menuoptions[i].addEventListener("click",AppxCategoryMenu.markOptionSelected,false);
}var appxSubmenu=document.getElementsByClassName("appx-submenu-parent");for(var i=0;i<appxSubmenu.length;i++){appxSubmenu[i].addEventListener("click",AppxCategoryMenu.openSubCategoryMenuTrigger,false);}var appxCatMenuLink=document.getElementById("appx-menu-trigger");appxCatMenuLink.addEventListener("click",AppxCategoryMenu.toggleCategoryMenu,false);
AppxCategoryMenu.fixMenuPosition();var phoneView=(Appx.getCurrentSiteState()==="s"||Appx.getCurrentSiteState()==="xs");if(phoneView){AppxCategoryMenu.closeMenu();}},openSubCategoryMenu:function(childid,openFromJs){var element=document.getElementById(childid);if(!openFromJs){AppxCategoryMenu.closeAllCategoryMenusFnc(element,true);
}element.classList.add("appx-subcategory-visible");element.classList.remove("appx-subcategory-hidden");if(!Modernizr.flexbox){document.getElementsByClassName("appx-subcategory-level0")[0].style.width="0px";document.getElementsByClassName("appx-subcategory-level0")[0].style.width="";}var menuItems=element.querySelectorAll(".appx-menu-option");
if(!openFromJs){for(var i=0;i<menuItems.length;i++){menuItems[i].classList.remove("appx-menu-option-selected");}}},toggleCategoryMenu:function(){if(this.parentNode.classList.contains("appx-menu-is-open")){AppxCategoryMenu.closeMenu();}else{AppxCategoryMenu.openMenu();AppxCategoryMenu.generateMenuTree(document.getElementsByClassName("appx-menu-opener")[0].getAttribute("appx-menu-opener-id"));
}},openMenu:function(){document.getElementById("appx-menu-trigger").parentNode.classList.add("appx-menu-is-open");Appx.openBackDrop("categoryMenu");document.addEventListener("click",AppxCategoryMenu.hideMenu,false);},closeMenu:function(){document.getElementById("appx-menu-trigger").parentNode.classList.remove("appx-menu-is-open");
Appx.closeBackDrop("categoryMenu");document.removeEventListener("click",AppxCategoryMenu.hideMenu,false);},openSubCategoryMenuTrigger:function(){AppxCategoryMenu.openSubCategoryMenuTriggerFnc(this,false);},openSubCategoryMenuTriggerFnc:function(obj,openFromJs){var childClass=obj.getAttribute("submenu-id");
setTimeout(function(){AppxCategoryMenu.openSubCategoryMenu(childClass,openFromJs);},0);},closeAllCategoryMenus:function(){AppxCategoryMenu.closeAllCategoryMenusFnc(this,false);},closeAllCategoryMenusFnc:function(obj,isInMenu){var elements=[];if(obj==null){elements=document.getElementsByClassName("appx-subcategory-visible");
}else{var childClass=obj.getAttribute("submenu-id");if(childClass){return;}if(obj.parentNode.parentNode.parentNode.classList.contains("appx-subcategory-level1")||(isInMenu&&obj.classList.contains("appx-subcategory-level2"))){elements=document.getElementsByClassName("appx-subcategory-level2");}else{if(!obj.parentNode.parentNode.parentNode.classList.contains("appx-subcategory-level2")||(isInMenu&&!obj.classList.contains("appx-subcategory-level1"))){elements=Array.prototype.slice.call(document.querySelectorAll(".appx-subcategory-level1")).concat(Array.prototype.slice.call(document.querySelectorAll(".appx-subcategory-level2")));
}}}for(var i=elements.length-1;i>-1;i--){elements[i].classList.add("appx-subcategory-hidden");elements[i].classList.remove("appx-subcategory-visible");}},markOptionSelected:function(){AppxCategoryMenu.closeAllCategoryMenusFnc(this,false);AppxCategoryMenu.markOptionSelectedFnc(this,false);},markOptionSelectedFnc:function(obj,openFromJs){var elements=obj.parentNode.parentNode.parentNode.querySelectorAll(".appx-menu-option");
if(!openFromJs){for(var i=0;i<elements.length;i++){elements[i].classList.remove("appx-menu-option-selected");}}obj.classList.add("appx-menu-option-selected");},generateMenuTree:function(leafName){var a=document.getElementsByClassName("appx-subcategory-level0")[0].querySelectorAll(".appx-menu-option");
AppxCategoryMenu.closeAllCategoryMenusFnc(null,false);var elements=document.getElementsByClassName("appx-menu-option");for(var i=0;i<elements.length;i++){elements[i].classList.remove("appx-menu-option-selected");}for(var i=0;i<a.length;i++){if(a[i].getAttribute("appx-menu-id")==leafName){AppxCategoryMenu.markOptionSelectedFnc(a[i],true);
return;}if(a[i].getAttribute("submenu-id")){var result=AppxCategoryMenu.generateSubMenuTree(a[i],leafName);if(typeof result=="boolean"&&result){AppxCategoryMenu.markOptionSelectedFnc(a[i],true);AppxCategoryMenu.openSubCategoryMenuTriggerFnc(a[i],true);}}}},generateSubMenuTree:function(obj,leafName){if(obj.getAttribute("submenu-id")!=null){var a=document.getElementById(obj.getAttribute("submenu-id")).querySelectorAll(".appx-menu-option");
for(var i=0;i<a.length;i++){var aux=AppxCategoryMenu.generateSubMenuTree(a[i],leafName);if(a[i].getAttribute("appx-menu-id")==leafName){AppxCategoryMenu.markOptionSelectedFnc(a[i],true);if(a[i].getAttribute("submenu-id")){AppxCategoryMenu.openSubCategoryMenuTriggerFnc(a[i],true);}return true;}if(typeof aux=="boolean"&&aux){AppxCategoryMenu.markOptionSelectedFnc(a[i],true);
AppxCategoryMenu.openSubCategoryMenuTriggerFnc(a[i],true);return true;}}return false;}else{if(obj.getAttribute("appx-menu-id")==leafName){AppxCategoryMenu.markOptionSelectedFnc(obj,true);return true;}return false;}},fixMenuPosition:function(){var oldObj=document.getElementsByClassName("appx-menu-trigger")[0];
var oldObjParent=oldObj.parentNode;oldObjParent.removeChild(oldObj);var newObj=oldObj.cloneNode(true);newObj.setAttribute("id","cosaRara");document.getElementById("appx_content").appendChild(newObj);var toIter=newObj.querySelectorAll(".appx-subcategory-hidden");for(var i=0;i<toIter.length;i++){toIter[i].classList.remove("appx-subcategory-hidden");
toIter[i].classList.add("appx-subcategory-visible");}var a=newObj.getElementsByClassName("appx-subcategory-level0")[0].querySelectorAll(".appx-menu-option");var maxWidth=a[0].parentNode.parentNode.parentNode.getBoundingClientRect().width;var childMaxWidth=0;for(var i=0;i<a.length;i++){if(a[i].getAttribute("submenu-id")){var result=AppxCategoryMenu.generateSubMenuWidth(a[i]);
if(result>childMaxWidth){childMaxWidth=result;}}}oldObjParent.appendChild(oldObj);var bannerDiv=document.getElementsByClassName("appx-subcategory-banner")[0];var bannerDivWidth=0;if(bannerDiv){bannerDivWidth=bannerDiv.getBoundingClientRect().width;}var windowWidth=document.body.getBoundingClientRect().width;
var menuWidth=AppxCategoryMenu.getPageTopLeft(document.getElementsByClassName("appx-menu-trigger")[0]).left+maxWidth+childMaxWidth+bannerDivWidth;triggerWidth=document.getElementsByClassName("appx-menu-trigger")[0].getBoundingClientRect().width;if((menuWidth+10)>windowWidth){var perfectFit=menuWidth+8-windowWidth;
var maxMargin=AppxCategoryMenu.getPageTopLeft(document.getElementsByClassName("appx-menu-trigger")[0]).left;var neededMargin=(maxWidth+bannerDivWidth)-triggerWidth;var newMargin=maxMargin<neededMargin?maxMargin:neededMargin;var finalMargin=newMargin<perfectFit?newMargin:perfectFit;document.getElementById("appx-menu-list").style.marginLeft="-"+finalMargin+"px";
}else{document.getElementById("appx-menu-list").style.marginLeft="0px";}document.getElementById("appx_content").removeChild(newObj);},generateSubMenuWidth:function(obj){var a=document.getElementById(obj.getAttribute("submenu-id")).querySelectorAll(".appx-menu-option");var maxWidth=document.getElementById(obj.getAttribute("submenu-id")).getBoundingClientRect().width;
var childMaxWidth=0;for(var i=0;i<a.length;i++){if(a[i].getAttribute("submenu-id")){var aux=AppxCategoryMenu.generateSubMenuWidth(a[i]);if(aux>childMaxWidth){childMaxWidth=aux;}}}return(maxWidth+childMaxWidth);},hideMenu:function(e){var target=(e&&e.target)||(event&&event.srcElement);if(!AppxCategoryMenu.checkParent(target,document.getElementById("appx-menu-trigger").parentNode)){AppxCategoryMenu.closeMenu();
}},checkParent:function(t,elm){while(t.parentNode){if(t==elm){return true;}t=t.parentNode;}return false;},getPageTopLeft:function(el){var rect=el.getBoundingClientRect();var docEl=document.documentElement;return{left:rect.left+(window.pageXOffset||docEl.scrollLeft||0),top:rect.top+(window.pageYOffset||docEl.scrollTop||0)};
}};domready(function(){AppxCategoryMenu.init();});var appxCategoryMenuWindowResize=debounce(function(){AppxCategoryMenu.init();},Appx.debounceTime);window.addEventListener("resize",appxCategoryMenuWindowResize);var AppxFavorites={removeTimeout:1000,sortBy:null,sortOrder:null,sortId:null,deleteContainerWidth:80,TileLogoSpace:70,TouchListenersOnResize:false,swipe_options:{dragLockToAxis:true,dragBlockHorizontal:true},swipped_once:null,swipe_delay:"width 200ms",swipe_delay_td:"left 200ms",swipe_drag_limit:100,mockup_data_loaded:0,isScrolling:0,sort:function(element){var sortId=element.getAttribute("id");
AppxFavorites.sortId=sortId;var currentSort=AppxFavorites.sortBy;switch(sortId){case"appx-saved-listing-title-a-id":AppxFavorites.sortBy="title";break;case"appx-saved-listing-type-a-id":AppxFavorites.sortBy="type";break;case"appx-saved-listing-date-a-id":AppxFavorites.sortBy="date";break;case"appx-saved-listing-rating-a-id":AppxFavorites.sortBy="rating";
break;case"appx-saved-listing-price-a-id":AppxFavorites.sortBy="price";break;case"appx-my-installs-title-a-id":AppxFavorites.sortBy="title";break;case"appx-my-installs-type-a-id":AppxFavorites.sortBy="type";break;case"appx-my-installs-updated-a-id":AppxFavorites.sortBy="updated";break;case"appx-my-installs-installed-a-id":AppxFavorites.sortBy="installed";
break;case"appx-my-installs-payment-a-id":AppxFavorites.sortBy="payment";break;default:AppxFavorites.sortBy="title";}var isNewSorting=(currentSort!=AppxFavorites.sortBy);AppxFavorites.sortOrder=(AppxFavorites.sortOrder=="desc"||isNewSorting)?"asc":"desc";},updateArrow:function(){var arrow=document.getElementById(AppxFavorites.sortId).getElementsByTagName("use")[0];
var xlinkParts;if(arrow&&arrow.href.baseVal!=="undefined"&&arrow.href.baseVal!=null){xlinkParts=arrow.href.baseVal.split("#");var arrowName=(AppxFavorites.sortOrder=="asc")?"arrowup":"arrowdown";arrow.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",xlinkParts[0]+"#"+arrowName);}},getDeleteContainer:function(element){return element.getElementsByClassName("appx-delete")[0];
},getDeleteElement:function(element){return element.getElementsByTagName("a")[0];},showTrashIcon:function(element){if(element.classList.contains("appx-delete-el-hide")){element.classList.remove("appx-delete-el-hide");element.classList.add("appx-delete-el-show");}},hideTrashIcon:function(element){if(element.classList.contains("appx-delete-el-show")){element.classList.add("appx-delete-el-hide");
element.classList.remove("appx-delete-el-show");}},getListingName:function(element){var tds=element.getElementsByTagName("td");var title=tds[0].getElementsByClassName("appx-listing-title")[0].innerText;return title;},createSpinner:function(withContainer,type){var spinner=document.createElement("div");
var classes;if(type=="row"){classes="slds-spinner slds-spinner_small appx-spinner-ie-fix";}else{if(type=="table"){classes="slds-spinner slds-spinner_medium appx-table-spinner-position";}else{if(type=="button"){classes="slds-spinner slds-spinner_x-small";}}}spinner.setAttribute("class",classes);spinner.setAttribute("role","status");
var dot_a=document.createElement("div");dot_a.setAttribute("class","slds-spinner__dot-a");var dot_b=document.createElement("div");dot_b.setAttribute("class","slds-spinner__dot-b");spinner.appendChild(dot_a);spinner.appendChild(dot_b);if(withContainer){var spinnerContainer=document.createElement("div");
if(type=="table"){spinnerContainer.setAttribute("class","slds-spinner_container slds-is-fixed");}else{if(type=="button"){spinnerContainer.setAttribute("class","slds-spinner_container slds-is-relative");spinner.style.marginTop="-1rem";}}spinnerContainer.appendChild(spinner);}return(withContainer)?spinnerContainer:spinner;
},showSpinnerButton:function(){var button=document.getElementById("appx-load-more-button-id");var span=button.getElementsByTagName("span")[0];span.classList.add("appx-button-disabled");var spinner=AppxFavorites.createSpinner(true,"button");button.appendChild(spinner);},hideSpinnerButton:function(){var button=document.getElementById("appx-load-more-button-id");
var span=button.getElementsByTagName("span")[0];span.classList.remove("appx-button-disabled");var spinner=button.getElementsByClassName("slds-spinner_container")[0];if(spinner){button.removeChild(spinner);}},showSpinnerTable:function(tableContainerId){var spinner=AppxFavorites.createSpinner(true,"table");
var tableWrapper=document.getElementById(tableContainerId);var rectObjTableBody=tableWrapper.getBoundingClientRect();spinner.style.top=rectObjTableBody.top+"px";spinner.style.left=rectObjTableBody.left+"px";spinner.style.right=rectObjTableBody.left+"px";spinner.style.height=tableWrapper.offsetHeight+"px";
tableWrapper.appendChild(spinner);},hideSpinnerTable:function(tableContainerId){var tableWrapper=document.getElementById(tableContainerId);var spinner=tableWrapper.getElementsByClassName("slds-spinner_container")[0];if(spinner){tableWrapper.removeChild(spinner);}},showSpinner:function(element,listing){var spinner=AppxFavorites.createSpinner(false,"row");
var tr=Appx.closest(element,"TR");var oldTrHeight=tr.offsetHeight;var newHeight=oldTrHeight+"px";if(oldTrHeight<30){newHeight="42px";}tr.setAttribute("deleted","true");var tbody=document.getElementById("appx-favorites-table-body");var newTd=document.createElement("td");newTd.setAttribute("height",newHeight);
newTd.setAttribute("width","100%");newTd.style.position="relative";var currentSiteState=Appx.getCurrentSiteState();newTd.setAttribute("colspan",(currentSiteState!="s"&&currentSiteState!="xs")?6:1);var dummyDiv=document.createElement("div");dummyDiv.setAttribute("id","myfavoriteDummyDiv_"+listing.id);
dummyDiv.setAttribute("height",newHeight);dummyDiv.setAttribute("width","100%");if(Modernizr.flexbox&&Modernizr.flexboxtweener){spinner.style.marginTop="20px";}dummyDiv.appendChild(spinner);newTd.appendChild(dummyDiv);var cols=tr.getElementsByTagName("td");tr.replaceChild(newTd,cols[0]);for(var i=1;i<cols.length;
i++){cols[i].style.display="none";}},hideSpinner:function(element,listing,label){var tbody=document.getElementById("appx-favorites-table-body");var oldTr=document.getElementById("myfavorite_"+listing.id);var oldTrHeight=oldTr.offsetHeight;var newHeight=oldTrHeight+"px";if(oldTrHeight<30){newHeight="42px";
}var newTd=document.createElement("td");newTd.setAttribute("height",newHeight);newTd.setAttribute("width","100%");newTd.setAttribute("class","appx-favorites-table-tr-fade-in-show");newTd.style.textAlign="center";newTd.style.whiteSpace="normal";var currentSiteState=Appx.getCurrentSiteState();newTd.setAttribute("colspan",(currentSiteState!="s"&&currentSiteState!="xs")?6:1);
var dummyDiv=document.createElement("div");dummyDiv.setAttribute("id","myfavoriteDummyDiv_"+listing.id);dummyDiv.setAttribute("height",newHeight);dummyDiv.setAttribute("width","100%");var dummyDiv=document.createElement("div");dummyDiv.setAttribute("id","myfavorite_"+listing.id);dummyDiv.setAttribute("deleted","true");
var a=document.createElement("a");a.href=listing.url;var linkText=document.createTextNode(listing.name+" ");var msg=document.createTextNode(label);a.appendChild(linkText);dummyDiv.appendChild(a);dummyDiv.appendChild(msg);newTd.appendChild(dummyDiv);var cols=oldTr.getElementsByTagName("td");oldTr.replaceChild(newTd,cols[0]);
for(var i=1;i<cols.length;i++){cols[i].style.display="none";}},reset:function(ev){var row=Appx.closest(ev.target,"TR");var cols=row.getElementsByTagName("td");var lastTd=cols[cols.length-1];var deleteDiv=AppxFavorites.getDeleteContainer(lastTd);var delElem=AppxFavorites.getDeleteElement(deleteDiv);if(Math.abs(ev.deltaX)<AppxFavorites.swipe_drag_limit){AppxFavorites.undragElement(deleteDiv,ev);
AppxFavorites.swipped_once=null;AppxFavorites.hideTrashIcon(delElem);}},swipe:function(ev){if(AppxFavorites.isScrolling!=1){var currentSiteState=Appx.getCurrentSiteState();var bigScreen=(currentSiteState=="m"||currentSiteState=="l"||currentSiteState=="xl");if(!bigScreen){var whichRow=Appx.closest(ev.target,"TR");
var swippedRow=document.getElementById(AppxFavorites.swipped_once);if(swippedRow&&swippedRow.getAttribute("deleted")!="true"){AppxFavorites.rowUndoSwipe(swippedRow,ev);}AppxFavorites.rowSwipe(whichRow,ev);}}},handleTap:function(ev){var currentSiteState=Appx.getCurrentSiteState();var notSmallScreens=(currentSiteState!="s"&&currentSiteState!="xs");
if(notSmallScreens){var row=Appx.closest(ev.target,"TR");var cols=row.getElementsByTagName("td");var lastTd=cols[cols.length-1];var deleteDiv=lastTd.getElementsByClassName("appx-delete")[0];deleteDiv.style.display="block";}},initTouchListeners:function(){var tbody=document.getElementById("appx-favorites-table-body");
if(tbody){var hammertime=new Hammer(tbody,AppxFavorites.swipe_options);hammertime.on("panleft panright",AppxFavorites.swipe).on("panend",AppxFavorites.reset).on("tap",AppxFavorites.handleTap);hammertime.get("pan").set({direction:Hammer.DIRECTION_HORIZONTAL});}},rowSwipe:function(row,ev){var cols=row.getElementsByTagName("td");
var lastTd=cols[cols.length-1];var deleteDiv=AppxFavorites.getDeleteContainer(lastTd);var delElem=AppxFavorites.getDeleteElement(deleteDiv);var isDeleted=row.getAttribute("deleted");if(ev.type=="panleft"&&!isDeleted){AppxFavorites.dragElement(deleteDiv,ev,false);AppxFavorites.swipped_once=row.getAttribute("id");
AppxFavorites.showTrashIcon(delElem);}},rowUndoSwipe:function(row,ev){var cols=row.getElementsByTagName("td");var lastTd=cols[cols.length-1];var deleteDiv=AppxFavorites.getDeleteContainer(lastTd);AppxFavorites.undragElement(deleteDiv,ev);var delElem=AppxFavorites.getDeleteElement(deleteDiv);AppxFavorites.hideTrashIcon(delElem);
},dragElement:function(element,ev,reset){element.style.width=((reset)?AppxFavorites.deleteContainerWidth:(Math.abs(ev.deltaX)<=AppxFavorites.swipe_drag_limit)?Math.abs(ev.deltaX):AppxFavorites.swipe_drag_limit)+"px";element.style.transition=AppxFavorites.swipe_delay;if(Modernizr.flexbox&&Modernizr.flexboxtweener){element.style.height="65px";
}var tr=Appx.closest(element,"TR");tr.getElementsByTagName("td")[0].style.left=-((reset)?AppxFavorites.deleteContainerWidth:(Math.abs(ev.deltaX)<=AppxFavorites.swipe_drag_limit)?Math.abs(ev.deltaX):AppxFavorites.swipe_drag_limit)+"px";tr.getElementsByTagName("td")[0].style.transition=AppxFavorites.swipe_delay_td;
},undragElement:function(element){element.style.width="0px";element.style.transition=AppxFavorites.swipe_delay;var tr=Appx.closest(element,"TR");tr.getElementsByTagName("td")[0].style.left="0px";tr.getElementsByTagName("td")[0].style.transition=AppxFavorites.swipe_delay_td;},fitColsWithScreen:function(){var currentSiteState=Appx.getCurrentSiteState();
var smallToBigScreen=(currentSiteState!="s"&&currentSiteState!="xs");var bigToSmallScreen=(currentSiteState=="s"||currentSiteState=="xs");var tbody=document.getElementById("appx-favorites-table-body");if(tbody){var rows=tbody.getElementsByTagName("tr");var isDeleted;for(var i=0;i<rows.length;i++){isDeleted=rows[i].getAttribute("deleted");
if(isDeleted){var td=rows[i].getElementsByTagName("td")[0];if(td){if(smallToBigScreen){td.setAttribute("colspan",6);}else{if(bigToSmallScreen){td.setAttribute("colspan",1);}}}}}}},fitSpinnerInTable:function(){var tableWrapper=document.getElementById("appx-favorites-table-container-id");if(tableWrapper){var spinner=tableWrapper.getElementsByClassName("appx-spinner_container")[0];
if(spinner){var rectObjTableBody=tableWrapper.getBoundingClientRect();spinner.style.top=rectObjTableBody.top+"px";spinner.style.left=rectObjTableBody.left+"px";spinner.style.right=rectObjTableBody.left+"px";spinner.style.height=tableWrapper.offsetHeight+"px";}}},makeTrashIconVisible:function(deleteElem){deleteElem.style.display="block";
}};domready(function(){if(Appx.is_touch_device()){AppxFavorites.initTouchListeners();var deleteElems=document.querySelectorAll(".appx-favorites-table-tr td:last-of-type div");for(var i=0;i<deleteElems.length;i++){if(deleteElems[i]){deleteElems[i].addEventListener("click",function(){AppxFavorites.makeTrashIconVisible(deleteElems[i]);
});}}}});var appxFavoritesWindowResize=debounce(function(){AppxFavorites.fitColsWithScreen();AppxFavorites.fitSpinnerInTable();},Appx.debounceTime);window.addEventListener("resize",appxFavoritesWindowResize);var initTouchListenersOnResize=function(){if(!AppxFavorites.TouchListenersOnResize){AppxFavorites.TouchListenersOnResize=true;
AppxFavorites.initTouchListeners();}};window.addEventListener("resize",initTouchListenersOnResize);window.addEventListener("scroll",function(){AppxFavorites.isScrolling=1;},{passive:1});window.addEventListener("touchstart",function(){AppxFavorites.isScrolling=0;},{passive:1});window.addEventListener("touchend",function(){AppxFavorites.isScrolling=0;
});var AppxDropdown={dropdownDisplayedId:null,dropdownOptionSelected:null,showBackDrop:false,init:function(klass){if(klass){var clsButtons=klass.split(" ")[0];var clsLinks=klass.split(" ")[1];var targetButton,targetLink;if(clsButtons||clsLinks){var pageContent=document.getElementById("appx_content");
pageContent.addEventListener("click",function(e){var target=e.target;if(target.nodeName.toLowerCase()=="use"||target.nodeName.toLowerCase()=="svg"||target.nodeName.toLowerCase()=="span"){targetButton=Appx.closest(target,"BUTTON");targetLink=Appx.closest(target,"A");}else{targetButton=target;targetLink=target;
}if(targetButton&&targetButton.getAttribute("class")&&(targetButton.getAttribute("class").indexOf(clsButtons)>=0)){AppxDropdown.toggleDropdown(targetButton);}else{if(targetLink&&targetLink.getAttribute("class")&&(targetLink.getAttribute("class").indexOf(clsLinks)>=0)){AppxDropdown.toggleDropdown(targetLink);
}else{AppxDropdown.hideDropdown();}}});var pageBackDrop=document.getElementById("appx_backdrop");if(pageBackDrop){pageBackDrop.addEventListener("click",function(e){AppxDropdown.hideDropdown();});}}}},toggleDropdown:function(element){var wrapper=element.parentElement;var currentId=element.getAttribute("id");
if((AppxDropdown.dropdownDisplayedId==currentId)&&wrapper.classList.contains("slds-is-open")){wrapper.classList.remove("slds-is-open");Appx.closeBackDrop();}else{AppxDropdown.hideDropdown();wrapper.classList.add("slds-is-open");AppxDropdown.backDropOrNot(element);if(AppxDropdown.showBackDrop){Appx.openBackDrop();
}}AppxDropdown.dropdownDisplayedId=currentId;},hideDropdown:function(){var dropdownButton=document.getElementById(AppxDropdown.dropdownDisplayedId);if(dropdownButton){AppxDropdown.backDropOrNot(dropdownButton);var dropdown=dropdownButton.parentElement;dropdown.classList.remove("slds-is-open");Appx.closeBackDrop();
}},hideDropdowns:function(element,containerId){var table=document.getElementById(containerId);var dropdowns=table.getElementsByClassName("slds-dropdown-trigger");for(var i=0;i<dropdowns.length;i++){var dropdown=dropdowns[i];if(element){if(dropdown&&dropdown.getAttribute("id")!=element.getAttribute("id")){if(dropdown&&dropdown.classList.contains("slds-is-open")){dropdown.classList.remove("slds-is-open");
}}}else{if(dropdown&&dropdown.classList.contains("slds-is-open")){dropdown.classList.remove("slds-is-open");}}}},setOptionSelected:function(e){if(e){var span=e.getElementsByTagName("SPAN")[0];AppxDropdown.dropdownOptionSelected=span.innerHTML;var optionSelectedHeader=document.getElementById("appx-page-header-sorted-by-id");
if(AppxDropdown.dropdownOptionSelected&&optionSelectedHeader){optionSelectedHeader.innerHTML=AppxDropdown.dropdownOptionSelected;}}},setOptionSelectedUserId:function(e){if(e){AppxDropdown.removeSelectedClassNamesUserId();e.classList.add("appx-dropdown__selected");var span=e.getElementsByClassName("appx-dropdown__item-main")[0];
if(span){AppxDropdown.dropdownOptionSelected=span.innerHTML;}var optionSelectedHeader=document.getElementById("appx-page-header-userid");if(AppxDropdown.dropdownOptionSelected&&optionSelectedHeader){optionSelectedHeader.innerHTML=AppxDropdown.dropdownOptionSelected;}}},removeSelectedClassNamesUserId:function(){var allOptions=document.getElementById("dropdown_userid").getElementsByTagName("A");
for(var i=0;i<allOptions.length;i++){allOptions[i].classList.remove("appx-dropdown__selected");}},backDropOrNot:function(el){var withBackDrop=el.getAttribute("data-with-backdrop");if(withBackDrop==="true"){AppxDropdown.showBackDrop=true;}else{AppxDropdown.showBackDrop=false;}}};domready(function(){AppxDropdown.init("appx-actions-dropdown-button appx-actions-dropdown-link");
});var AppxCarousel={position:0,demoPosition:0,fullscreen:false,videoIsPlaying:false,swipeSemaphore:true,resizeSemaphore:true,demoTriggered:false,screenShotTriggered:false,mediaCount:0,labelOf:"of",init:function(){AppxCarousel.mediaCount=document.querySelectorAll("div.appx-carousel-media-container").length;
if(AppxCarousel.mediaCount>0){AppxCarousel.miscellaneousEvents();AppxCarousel.buttonEvents();AppxCarousel.swipeEvents();AppxCarousel.keyEvents();AppxCarousel.updateDescription();AppxCarousel.setDemoPosition();if(AppxCarousel.mediaCount===1){AppxCarousel.hideLeftRightButtons();}}else{AppxCarousel.hideLeftRightButtons();
}},hideLeftRightButtons:function(){AppxCarousel.addClass("appx-carousel-navigator-button--right","appx-carousel-hide-buttons");AppxCarousel.addClass("appx-carousel-navigator-button--left","appx-carousel-hide-buttons");},leftButton:function(){var iframe_elem=document.querySelectorAll("div.appx-carousel-media-container")[AppxCarousel.position].children[0];
AppxCarousel.stopVideo(iframe_elem);AppxCarousel.previous();AppxCarousel.addClass("appx-carousel-media-slider","appx-carousel-media-slider--efect");AppxCarousel.update();AppxCarousel.updateDescription();document.getElementsByClassName("appx-carousel-media-swipe")[0].style.zIndex=1;AppxCarousel.triggerScreenshot();
},rightButton:function(){var iframe_elem=document.querySelectorAll("div.appx-carousel-media-container")[AppxCarousel.position].children[0];AppxCarousel.stopVideo(iframe_elem);AppxCarousel.next();AppxCarousel.addClass("appx-carousel-media-slider","appx-carousel-media-slider--efect");AppxCarousel.update();
AppxCarousel.updateDescription();document.getElementsByClassName("appx-carousel-media-swipe")[0].style.zIndex=1;AppxCarousel.triggerScreenshot();},addClass:function(element,classToAdd){var els=document.getElementsByClassName(element);if(els.length!==0){els[0].classList.add(classToAdd);}},removeClass:function(element,classToRemove){var els=document.getElementsByClassName(element);
if(els.length!==0){els[0].classList.remove(classToRemove);}},next:function(){AppxCarousel.position=++AppxCarousel.position%AppxCarousel.mediaCount;},previous:function(){AppxCarousel.position=--AppxCarousel.position;if(AppxCarousel.position==-1){AppxCarousel.position=AppxCarousel.mediaCount-1;}},update:function(){if(AppxCarousel.fullscreen){width=window.innerWidth;
}else{if(Appx.getCurrentSiteState()=="xl"){width=700;}else{if(Appx.getCurrentSiteState()=="l"){width=550;}else{if(Appx.getCurrentSiteState()=="m"){width=440;}else{width=window.innerWidth;}}}}document.getElementsByClassName("appx-carousel-media-slider")[0].style.marginLeft=AppxCarousel.position*-width+"px";
},updateDescription:function(){var descriptionImage=document.getElementsByClassName("appx-carousel-media-slider")[0].querySelectorAll("span")[AppxCarousel.position].innerHTML;if(descriptionImage!=""){descriptionImage=" : "+descriptionImage;}var pagination=(AppxCarousel.position+1)+" "+AppxCarousel.labelOf+" "+AppxCarousel.mediaCount;
setTimeout(function(){var description=document.createTextNode(pagination+descriptionImage);var node=document.getElementsByClassName("appx-carousel-navigator-description")[0];if(node.hasChildNodes()){node.removeChild(node.lastChild);}node.appendChild(description);node.setAttribute("data-carousel-position",AppxCarousel.position+1);
var carouselRightPos=AppxCarousel.position+2;if(carouselRightPos>AppxCarousel.mediaCount){carouselRightPos=1;}var carouselLeftPos=AppxCarousel.position;if(carouselLeftPos<=0){carouselLeftPos=AppxCarousel.mediaCount;}var carouselRightBtn=document.getElementsByClassName("appx-carousel-navigator-button--right")[0];
if(carouselRightBtn){carouselRightBtn.setAttribute("data-carousel-position",carouselRightPos);}var carouselLeftBtn=document.getElementsByClassName("appx-carousel-navigator-button--left")[0];if(carouselLeftBtn){carouselLeftBtn.setAttribute("data-carousel-position",carouselLeftPos);}},300);},activateFullScreen:function(){if(AppxCarousel.swipeSemaphore){var hiddenCarousel=document.getElementById("hidden-carousel");
if(hiddenCarousel!=null){hiddenCarousel.style.position="";}AppxCarousel.removeClass("appx-carousel-media-slider","appx-carousel-media-slider--efect");AppxCarousel.addClass("appx-carousel","appx-carousel-fullscreen");AppxCarousel.fullscreen=true;window.scrollTo(0,0);Appx.preventContentScroll();AppxCarousel.update();
}},deactivateFullScreen:function(){AppxCarousel.removeClass("appx-carousel","appx-carousel-fullscreen");AppxCarousel.fullscreen=false;Appx.allowContentScroll();var iframe_elem=document.querySelectorAll("div.appx-carousel-media-container")[AppxCarousel.position].children[0];AppxCarousel.stopVideo(iframe_elem);
document.getElementsByClassName("appx-carousel-media-swipe")[0].style.zIndex=1;AppxCarousel.update();},stopVideo:function(element){AppxCarousel.videoIsPlaying=false;setTimeout(function(){var new_src=element.src.replace("?autoplay=1","");element.src=new_src;},300);},playVideo:function(element){if(AppxCarousel.swipeSemaphore){AppxCarousel.videoIsPlaying=true;
var new_src=element.src;if(new_src.search("brainshark")==-1){element.src=new_src+"?autoplay=1";}document.getElementsByClassName("appx-carousel-media-swipe")[0].style.zIndex=0;}},setDemoPosition:function(pos){var iframeElement;var carouselItems=document.querySelectorAll("div.appx-carousel-media-container");
for(var pos=0;pos<carouselItems.length;pos++){iframeElement=carouselItems[pos].children[0];if(iframeElement&&(iframeElement.getAttribute("data-is-demo")=="true")){AppxCarousel.demoPosition=pos;}}},triggerScreenshot:function(){if(!AppxCarousel.screenShotTriggered){AppxUserActions.createUserActivity("Screenshot",null);
AppxCarousel.screenShotTriggered=true;}},clickBoxEvent:function(){var iframe_elem=document.querySelectorAll("div.appx-carousel-media-container")[AppxCarousel.position].children[0];if(iframe_elem.nodeName=="IFRAME"){if(window.innerWidth<=747){if(AppxCarousel.fullscreen){document.getElementsByClassName("appx-carousel-media-swipe")[0].style.zIndex=0;
AppxCarousel.activateFullScreen();}}else{if(AppxCarousel.videoIsPlaying){AppxCarousel.stopVideo(iframe_elem);}else{AppxCarousel.playVideo(iframe_elem);}}}else{AppxCarousel.triggerScreenshot();AppxCarousel.activateFullScreen();}},miscellaneousEvents:function(){window.addEventListener("resize",appxCarouselWindowResize);
document.addEventListener("webkitfullscreenchange",AppxCarousel.update,false);document.addEventListener("mozfullscreenchange",AppxCarousel.update,false);document.addEventListener("fullscreenchange",AppxCarousel.update,false);document.addEventListener("MSFullscreenChange",AppxCarousel.update,false);},buttonEvents:function(){document.getElementsByClassName("appx-carousel-navigator-button--left")[0].addEventListener("click",AppxCarousel.leftButton,false);
document.getElementsByClassName("appx-carousel-navigator-button--right")[0].addEventListener("click",AppxCarousel.rightButton,false);document.getElementsByClassName("appx-carousel-navigator-button--close")[0].addEventListener("click",AppxCarousel.deactivateFullScreen,false);document.getElementsByClassName("appx-carousel-media-swipe")[0].addEventListener("click",AppxCarousel.clickBoxEvent,false);
},swipeEvents:function(){var myElement=document.getElementsByClassName("appx-carousel-media-swipe")[0];var mc=new Hammer(myElement);mc.on("swipeleft",function(ev){if(AppxCarousel.swipeSemaphore){AppxCarousel.swipeSemaphore=false;AppxCarousel.rightButton();setTimeout(function(){AppxCarousel.swipeSemaphore=true;
},500);}});mc.on("swiperight",function(ev){if(AppxCarousel.swipeSemaphore){AppxCarousel.swipeSemaphore=false;AppxCarousel.leftButton();setTimeout(function(){AppxCarousel.swipeSemaphore=true;},500);}});},keyEvents:function(){document.onkeydown=function(e){if(e.keyCode=="37"){AppxCarousel.leftButton();
}else{if(e.keyCode=="39"){AppxCarousel.rightButton();}else{if(e.keyCode=="27"){AppxCarousel.deactivateFullScreen();}}}};}};var appxCarouselWindowResize=debounce(function(){AppxCarousel.update();},Appx.debounceTime);domready(function(){AppxCarousel.init();});function AppxSubscriptionManager(discount,subscription,subscriptionPlan,redirectUrls,tax,isOverlay,isEditPayment,ussTax){this.tax=tax;
this.discount=discount;this.subscription=subscription;this.redirectUrls=redirectUrls;this.subscriptionPlan=subscriptionPlan;this.isOverlay=isOverlay;this.isEditPayment=isEditPayment;this.ussSalesTax=ussTax;this.isEditMode=false;this.setSubscriptionPlan=function(plan){this.subscriptionPlan=plan;};this.isOneTimePlan=function(){return this.subscriptionPlan.frequency==="One-Time";
};this.setTax=function(tax){this.tax=tax;};this.setDiscount=function(discount){this.discount=discount;};this.setDiscountSpinnerShown=function(show){this.discount.discountSpinnerShown=show;};this.getDiscountSpinnerShown=function(){return this.discount.discountSpinnerShown===true;};this.setEditPayment=function(editPayment){this.isEditPayment=editPayment;
};this.setUSSalesTax=function(ussTax){this.ussSalesTax=ussTax;};var currentUrl=encodeURI(window.location.href);var hasCtaParam=Appx.extractUrlValue("cta",currentUrl);if(hasCtaParam==null){Appx.hideModalEvents();}else{Appx.redirectToNewListingDetailOnCloseModal();}if(document.getElementById("appx-buy-form-cancel-button")){document.getElementById("appx-buy-form-cancel-button").addEventListener("click",Appx.hideModalCancel,false);
}this.bindClickEvents=function(){var tcLink=document.getElementById("appx_tc_link");if(tcLink){tcLink.addEventListener("click",function(){Appx.showModal("appx_tc_modal");},false);}var hideModalEl2=document.getElementById("tc_modal_close");if(hideModalEl2){hideModalEl2.addEventListener("click",Appx.hideModalCancel,false);
}var hideModalEl3=document.getElementById("tc_modal_cancel");if(hideModalEl3){hideModalEl3.addEventListener("click",Appx.hideModalCancel,false);}var tCLinkEl=document.getElementById("appx_link_tc");var closeModalBtn=document.getElementById("get-now-close-btn");var closeModalReviewBtn=document.getElementById("appx-review-subscription-modal-close");
if(tCLinkEl){tCLinkEl.addEventListener("click",function(){if(closeModalBtn){closeModalBtn.disabled=true;}if(closeModalReviewBtn){closeModalReviewBtn.disabled=true;}document.getElementById("appx_modal_tc").classList.add("slds-fade-in-open");var backDrop=document.getElementById("appx_backdrop_get_it_now");
if(backDrop){backDrop.classList.add("slds-backdrop_open");backDrop.classList.add("appx-backdrop--open");}var backDropReview=document.getElementById("appx_backdrop_review_subscripion");if(backDropReview){backDropReview.classList.add("slds-backdrop_open");backDropReview.classList.add("appx-backdrop--open");
}var hideModalEl=document.getElementById("modal_close");if(hideModalEl){hideModalEl.addEventListener("click",function(e){if(closeModalBtn){closeModalBtn.disabled=false;}if(closeModalReviewBtn){closeModalReviewBtn.disabled=false;}var modal=Appx.findAncestor(e.target,"appx-modal-outer");if(modal){Appx.hideModal(modal,false);
if(backDrop){backDrop.classList.remove("slds-backdrop_open");backDrop.classList.remove("appx-backdrop--open");}if(backDropReview){backDropReview.classList.remove("slds-backdrop_open");backDropReview.classList.remove("appx-backdrop--open");}}});}var hideModalLegal=document.getElementById("legal_modal_close");
if(hideModalLegal){hideModalLegal.addEventListener("click",function(e){if(closeModalBtn){closeModalBtn.disabled=false;}if(closeModalReviewBtn){closeModalReviewBtn.disabled=false;}var modal=Appx.findAncestor(e.target,"appx-modal-outer");if(modal){Appx.hideModal(modal,false);if(backDrop){backDrop.classList.remove("slds-backdrop_open");
backDrop.classList.remove("appx-backdrop--open");}if(backDropReview){backDropReview.classList.remove("slds-backdrop_open");backDropReview.classList.remove("appx-backdrop--open");}}});}});}};this.showDiscountSpinner=function(){if(this.getDiscountSpinnerShown()===false){AppxSpinnerManager.createInput({brand:false,containerId:"appx-discount-spinner-container-id",spinnerId:"appx-discount-spinner",size:"x-small"});
this.setDiscountSpinnerShown(true);}};this.hideError=function(inputContainerId,containerMsgId){var theInput=document.getElementById(inputContainerId);var theMsg=document.getElementById(containerMsgId);if(theInput&&theMsg){theInput.classList.remove("slds-has-error");theMsg.classList.add("slds-hide");if(theMsg.hasChildNodes.length>0){theMsg.removeChild(theMsg.childNodes[0]);
}}};this.checkRelativePath=function(path){var pattern=new RegExp("^/.*");return pattern.test(path);};this.subscriptionFieldsValidation=function(){var numOfUsersElement=document.getElementById("appx-subscription-num-of-users-id");if(numOfUsersElement){return this.checkLicensesNotReducedForOneTime(numOfUsersElement)||this.checkLicensesNotIncreasedAfterReduction(numOfUsersElement);
}return false;};this.checkLicensesNotReducedForOneTime=function(numOfUsersElement){var isInvalid=false;if(this.isOneTimePlan()===true){if(numOfUsersElement){var originalUnits=this.subscription.originalNumOfUnits;var numOfUsersErrorMessageElement=document.getElementById("error-message-num-of-users-id");
var numOfUsersInput=document.getElementById("appx-num-of-users-id");if(numOfUsersInput.value<originalUnits){numOfUsersElement.classList.add("slds-has-error");numOfUsersErrorMessageElement.classList.remove("slds-hide");if(numOfUsersErrorMessageElement.hasChildNodes){numOfUsersErrorMessageElement.removeChild(numOfUsersErrorMessageElement.childNodes[0]);
}var errorTextNode=document.createTextNode(AppxSubscriptionManagerLabels.CANNOT_REDUCE_ONETIME_LICENSES);numOfUsersErrorMessageElement.appendChild(errorTextNode);isInvalid=true;}else{numOfUsersElement.classList.remove("slds-has-error");numOfUsersErrorMessageElement.classList.add("slds-hide");}}}return isInvalid;
};this.checkLicensesNotIncreasedAfterReduction=function(numOfUsersElement){var isInvalid=false;if(this.isOneTimePlan()===false){if(this.subscription.hasPendingReduction&&numOfUsersElement){var originalUnits=this.subscription.originalNumOfUnits;var numOfUsersErrorMessageElement=document.getElementById("error-message-num-of-users-id");
var numOfUsersInput=document.getElementById("appx-num-of-users-id");if(numOfUsersInput.value>originalUnits){numOfUsersElement.classList.add("slds-has-error");numOfUsersErrorMessageElement.classList.remove("slds-hide");if(numOfUsersErrorMessageElement.hasChildNodes){numOfUsersErrorMessageElement.removeChild(numOfUsersErrorMessageElement.childNodes[0]);
}var errorTextNode=document.createTextNode(AppxSubscriptionManagerLabels.CANNOT_INCREASE_AFTER_REDUCE);numOfUsersErrorMessageElement.appendChild(errorTextNode);isInvalid=true;}else{numOfUsersElement.classList.remove("slds-has-error");numOfUsersErrorMessageElement.classList.add("slds-hide");}}}return isInvalid;
};this.validate=function(){var error=true;var subDetailsForm=document.querySelector("[id$=appx-subscription-details-form-container]");if(AppxForm.validateForm(subDetailsForm)===false){error=this.subscriptionFieldsValidation();}return error;};this.copyOriginalPlanHtml=function(){this.originalPaymentPlanHTML=document.getElementById("appx-payment-plan").innerHTML;
};this.copyBilling=function(){var wrapper=document.getElementById("appx-billing-address-values-id");if(wrapper){var elements=wrapper.getElementsByClassName("appx-copy-billing");var i;for(i=0;i<elements.length;i+=1){this.populateShippingValue(elements[i]);}}};this.updateShippingStateText=function(val){var input=document.getElementById("appx-shipping-state-input");
if(input){input.value=val;}};this.toggleInput=function(inputElem,disable){if(inputElem){if(disable){inputElem.setAttribute("disabled","true");inputElem.classList.add("appx-same-as-billing-value");}else{inputElem.removeAttribute("disabled");inputElem.classList.remove("appx-same-as-billing-value");}}};
this.sameAsBilling=function(){AppxSpinnerManager.wholePageOrContent("page");var checked=document.getElementById("same_as_billing").checked;var shippingCountry;if(checked){shippingCountry=document.querySelector("[id$=appx-billing-country]");}else{shippingCountry=document.querySelector("[id$=appx-shipping-country]");
}updateShippingCountry(shippingCountry.value);};this.updateShippingCountryComplete=function(){this.copyBilling();var checked=document.getElementById("same_as_billing").checked;var wrapper=document.getElementById("appx-shipping-address-values-id");if(wrapper){var inputs=wrapper.getElementsByClassName("appx-same-as-billing");
var i;for(i=0;i<inputs.length;i+=1){this.toggleInput(inputs[i],checked);}}};this.getUpdatedAddressInfo=function(){var addressInfo={address1:document.getElementById("appx-billing-street-1").value,address2:document.getElementById("appx-billing-street-2").value,city:document.getElementById("appx-billing-city").value,state:document.getElementById("appx-billing-state-input")!==null?document.getElementById("appx-billing-state-input").value:document.querySelector("[id$=appx-billing-state-select]").value,zip:document.getElementById("appx-billing-zip").value,country:document.querySelector("[id$=appx-billing-country]").value};
return JSON.stringify(addressInfo);};this.calculateVat=function(totalValue){var vatAmount=0;var taxCfg=this.tax;if(taxCfg.vatChargeEnabled===true&&Number.isNaN(totalValue)===false){vatAmount=(taxCfg.vatPercentage*totalValue)/100;}return vatAmount;};this.handlePaymentFailure=function(err){var existingToastContent=document.getElementById("toast-content-detail");
if(existingToastContent===null){ToastManager.createToast({title:AppxSubscriptionManagerLabels.PAYMENT_ERROR_TITLE,body:err.replace("\\",""),severity:ToastManager.severity.error,duration:ToastManager.duration.medium});}Appx.hideSpinnerButton("appx-button-review");Appx.enableButton("appx-button-review");
};this.save=function(isEditingPayment){var self=this;var email=document.getElementById("email-input-id").value;var numOfUsers=document.getElementById("appx-subscription-num-of-users-id")?document.getElementById("appx-num-of-users-id").value:1;var tokenId=null;var paymentMethodId=null;var tokenType=null;
var addressInfo=this.getUpdatedAddressInfo();if(isEditingPayment===true){var token=AppxStripeBillingHandler.getToken();tokenId=token.id;tokenType=token.type;paymentMethodId=AppxStripeBillingHandler.getPaymentMethod();}AppxStripeBillingHandler.validateSession().then(function(){saveSubscriptionApex(tokenId,paymentMethodId,numOfUsers,email,addressInfo,tokenType);
},function(err){if(self.isOverlay===true){AppxCheckoutWizard.showCheckoutWizardError(AppxSubscriptionManagerLabels.SESSION_EXPIRED);Appx.hideSpinnerButton("appx_wizzard_btn_prev");Appx.enableButton("appx_wizzard_btn_prev");Appx.hideSpinnerButton("appx_wizzard-btn_next");Appx.enableButton("appx_wizzard-btn_next");
}else{ToastManager.createToast({severity:ToastManager.severity.error,duration:ToastManager.duration.sticky,title:AppxSubscriptionManagerLabels.GENERIC_ERROR_TITLE,body:AppxSubscriptionManagerLabels.SESSION_EXPIRED});Appx.hideSpinnerButton("appx-buttons-save");Appx.enableButton("appx-buttons-save");}});
};this.calculateNewTotals=function(){var subTotalElems=document.querySelectorAll("[id$=appx-subtotal-id]");var charge=this.subscriptionPlan.charge;var numOfUsersElement=document.getElementById("appx-num-of-users-id");var numOfUsers;var subTotal;if(numOfUsersElement){numOfUsers=parseInt(numOfUsersElement.value);
}else{numOfUsers=1;}var planText="";var planFrequency=this.subscriptionPlan.frequency;if(planFrequency==="Monthly"){planText=AppxSubscriptionManagerLabels.MONTHLY_PAYMENT;}else{if(planFrequency==="Yearly"){planText=AppxSubscriptionManagerLabels.YEARLY_PAYMENT;}else{planText=AppxSubscriptionManagerLabels.ONE_TIME_PAYMENT;
}}if(typeof numOfUsers==="number"){subTotal=(numOfUsers*charge);var subTotalText;if(typeof subTotal==="number"&&Number.isNaN(subTotal)===false){subTotalText=this.subscriptionPlan.currency+subTotal.toFixed(2);}else{subTotalText=this.subscriptionPlan.currency+"0";}for(var i=0;i<subTotalElems.length;i++){subTotalElems[i].innerText=subTotalText;
}}var discountValue=parseInt(this.discount.discountValue);var discountType=this.discount.discountType;var discountToDisplay=(typeof discountValue==="number"&&Number.isNaN(discountValue)===false)?discountValue:0;if(discountToDisplay>=0){var discountElems=document.querySelectorAll("[id$=appx-coupon-discount-id]");
if(discountElems&&discountElems.length){var discountElText;if(discountType==="percent"){discountElText="-"+discountToDisplay+"%";}else{discountElText="-"+this.subscriptionPlan.currency+discountToDisplay;}for(var j=0;j<discountElems.length;j++){discountElems[j].innerText=discountElText;}}}var totalElemTextEls=document.querySelectorAll("[id$=appx-payment-total-text-id]");
for(var l=0;l<totalElemTextEls.length;l++){totalElemTextEls[l].innerText=planText;}var totalValue;if(typeof discountValue==="number"&&discountValue>0){if(discountType==="percent"){totalValue=subTotal-(subTotal*discountValue/100);}else{totalValue=(subTotal-discountValue);}}else{totalValue=subTotal;}var vatValue=this.calculateVat(totalValue);
if(vatValue>0){var vatDetailEls=document.querySelectorAll("[id$=appx-vat-value-id]");if(vatDetailEls&&vatDetailEls.length){for(var k=0;k<vatDetailEls.length;k++){vatDetailEls[k].innerText=this.subscriptionPlan.currency+vatValue.toFixed(2);}}totalValue+=vatValue;}if(!this.isEditMode&&this.ussSalesTax!==undefined){var usstAmount=0;
if(this.ussSalesTax.hasOwnProperty("rate")){usstAmount=this.ussSalesTax.rate*totalValue;}totalValue+=usstAmount;var usstValueToDisplay=this.subscriptionPlan.currency+(Number.isNaN(usstAmount)?"0":String((Number(Math.round(usstAmount*1000)/1000)).toFixed(2)));var usstAmountEls=document.querySelectorAll("[id$=appx-usst-amount-id]");
for(var l=0;l<usstAmountEls.length;l++){usstAmountEls[l].innerText=usstValueToDisplay;}}var totalValueToDisplay=this.subscriptionPlan.currency+(Number.isNaN(totalValue)?"0":String(totalValue.toFixed(2)));var totalElems=document.querySelectorAll("[id$=appx-payment-total-id]");for(var m=0;m<totalElems.length;
m++){totalElems[m].innerText=totalValueToDisplay;}};this.loadDiscount=function(){var coupon=document.getElementById("appx-coupon-code-id");if(coupon&&(coupon.value||this.discount.discountValue>0)){this.showDiscountSpinner("appx-coupon-code-container-id");searchCouponApex(coupon.value);}};this.onCouponSearchComplete=function(){var hasError=this.discount.discountErrorMessage!=="";
if(this.isOverlay===true){if(hasError===true){document.getElementById("appx-coupon-code-id").value="";AppxCheckoutWizard.showCheckoutWizardError(AppxSubscriptionManagerLabels.INVALID_COUPON_CODE);}else{AppxCheckoutWizard.hideCheckoutWizardError();}}else{if(hasError===true){document.getElementById("appx-coupon-code-id").value="";
ToastManager.createToast({severity:ToastManager.severity.error,duration:ToastManager.duration.medium,title:AppxSubscriptionManagerLabels.GENERIC_ERROR_TITLE,body:AppxSubscriptionManagerLabels.INVALID_COUPON_CODE});}}AppxSpinnerManager.hide("appx-discount-spinner");this.setDiscountSpinnerShown(false);
};this.end=function(){if(window.confirm(AppxSubscriptionManagerLabels.END_ARE_YOU_SURE)){cancelSubscriptionApex();AppxSpinnerManager.wholePageOrContent("page");}};this.done=function(){if(this.checkRelativePath(this.redirectUrls.doneUrl)){window.location.href=this.redirectUrls.doneUrl;}};this.renew=function(){renewSubscriptionApex();
AppxSpinnerManager.wholePageOrContent("page");};this.toggleEdit=function(){this.toggleIsEditMode();AppxSpinnerManager.wholePageOrContent("content");this.togglePaymentHistory();toggleEditModeApex();};this.hideCouponSection=function(){if(this.ussSalesTax&&this.ussSalesTax.isCollectUSSalesTaxOn){var couponContainers=document.getElementsByClassName("coupon-section");
if(couponContainers){for(i=0;i<couponContainers.length;i+=1){couponContainers[i].classList.add("slds-hide");}}}};this.toggleCouponSection=function(){if(this.ussSalesTax&&this.ussSalesTax.isCollectUSSalesTaxOn){var couponContainers=document.getElementsByClassName("coupon-section");if(couponContainers){for(i=0;
i<couponContainers.length;i+=1){if(this.isEditMode){couponContainers[i].classList.add("slds-hide");}else{couponContainers[i].classList.remove("slds-hide");}}}}};this.toggleIsEditMode=function(){this.isEditMode=!this.isEditMode;};this.updateUSSTAmountContainer=function(){var usstAmountContainer=document.getElementById("appx-usst-amount-container");
if(usstAmountContainer){if(this.isEditMode){usstAmountContainer.classList.add("slds-hide");}else{usstAmountContainer.classList.remove("slds-hide");}}};this.validateUSSTNumber=function(){var usstAmountContainer=document.getElementById("appx-usst-amount-container");if(usstAmountContainer){if(!this.ussSalesTax.canDisplay&&this.ussSalesTax.isUSShippingCountry){usstAmountContainer.classList.add("slds-hide");
document.getElementById("appx-payment-total-infobubble").classList.add("slds-hide");document.getElementById("appx-payment-total-infobubble-edit").classList.remove("slds-hide");document.getElementById("appx-amount-total-infobubble").classList.add("slds-hide");document.getElementById("appx-amount-total-infobubble-edit").classList.remove("slds-hide");
}}};this.togglePaymentHistory=function(){var paymentHistoryContainer=document.getElementById("appx-payment-history-container");if(paymentHistoryContainer){paymentHistoryContainer.classList.toggle("slds-hide");}};this.toggleEditPayment=function(){var spinnerContainer=AppxSpinnerManager.createWithContainer({brand:false,containerId:"payment-section-container-id",spinnerId:"payment-section-spinner-id",size:"medium"});
var wrapper=document.getElementById("appx-payment-detail-container");AppxSpinnerManager.append(wrapper,spinnerContainer);AppxSpinnerManager.fitIn(wrapper,spinnerContainer);this.isEditPayment=!this.isEditPayment;toggleEditPaymentModeApex();};this.selectRadio=function(selected,fieldSetContainerId){var fieldSet=document.getElementById(fieldSetContainerId);
var radioButtons=fieldSet.getElementsByTagName("input");var i;for(i=0;i<radioButtons.length;i+=1){if(radioButtons[i].getAttribute("id")!==selected.id){radioButtons[i].checked=false;radioButtons[i].removeAttribute("checked");}else{radioButtons[i].checked=true;radioButtons[i].setAttribute("checked",true);
}}};this.updateRequiredFieldsForTabs=function(selectedTab){var tabs=["appx_method_cc","appx_method_usbank1","appx_method_usbank2","appx_method_eurobank"];var i;var tabEl;var disabledRequiredFields;var j;var requiredFields;var k;for(i=0;i<tabs.length;i+=1){tabEl=document.getElementById(tabs[i]);if(tabEl){if(tabs[i]===selectedTab){disabledRequiredFields=tabEl.getElementsByClassName("appx-required-temp-disabled");
for(j=disabledRequiredFields.length-1;j>=0;j-=1){disabledRequiredFields[j].classList.remove("appx-required-temp-disabled");}}else{requiredFields=tabEl.getElementsByClassName("appx-required");for(k=0;k<requiredFields.length;k+=1){requiredFields[k].classList.add("appx-required-temp-disabled");}}}}};this.showPayBlock=function(selected){this.hideAllPayBlocks();
this.resetAllPayBlocksTabs();var clickedId=selected.id;var paymentTextContainer=document.getElementById("appx-install-subscription-detail-payment-method-text");var achLegalTextContainerEl=document.querySelector("[id$=appx-ach-legal-text]");var sepaLegalTextContainerEl=document.querySelector("[id$=appx-sepa-legal-text]");
var elementId;var textContent;switch(clickedId){case"tab_pay_method_cc":elementId="appx_method_cc";textContent=AppxSubscriptionManagerLabels.CREDIT_CARD_LABEL;if(achLegalTextContainerEl!==null){achLegalTextContainerEl.classList.add("slds-hide");}if(sepaLegalTextContainerEl!==null){sepaLegalTextContainerEl.classList.add("slds-hide");
}break;case"tab_pay_method_usbank1":elementId="appx_method_usbank1";textContent=AppxSubscriptionManagerLabels.US_BANK_ACCOUNT_LABEL;achLegalTextContainerEl.classList.remove("slds-hide");if(sepaLegalTextContainerEl!==null){sepaLegalTextContainerEl.classList.add("slds-hide");}break;case"tab_pay_method_usbank2":elementId="appx_method_usbank2";
textContent=AppxSubscriptionManagerLabels.US_BANK_ACCOUNT_LABEL;achLegalTextContainerEl.classList.remove("slds-hide");if(sepaLegalTextContainerEl!==null){sepaLegalTextContainerEl.classList.add("slds-hide");}break;case"tab_pay_method_eurobank":elementId="appx_method_eurobank";textContent=AppxSubscriptionManagerLabels.EU_BANK_ACCOUNT_LABEL;
if(achLegalTextContainerEl!==null){achLegalTextContainerEl.classList.add("slds-hide");}sepaLegalTextContainerEl.classList.remove("slds-hide");break;}this.updateRequiredFieldsForTabs(elementId);var elementById=document.getElementById(elementId);elementById.classList.remove("slds-hide");this.enableRequired(elementById);
paymentTextContainer.textContent=textContent;selected.parentNode.classList.add("slds-is-active");};this.hideAllPayBlocks=function(){var payBlockOuter=document.getElementById("appx_checkout_payment_method_outer");if(payBlockOuter){var payBlocks=payBlockOuter.getElementsByClassName("appx-tabs_scoped__content");
var i;for(i=0;i<payBlocks.length;i+=1){payBlocks[i].classList.remove("slds-show");payBlocks[i].classList.add("slds-hide");this.tempDisableRequired(payBlocks[i]);}}};this.resetAllPayBlocksTabs=function(){var payBlockOuter=document.getElementById("appx_checkout_payment_method_outer");if(payBlockOuter){var payBlockTabs=payBlockOuter.getElementsByClassName("slds-tabs_scoped__item");
var i;for(i=0;i<payBlockTabs.length;i+=1){payBlockTabs[i].classList.remove("slds-is-active");}}};this.tempDisableRequired=function(extraBlock){var reqEls=extraBlock.getElementsByClassName(".appx-required");var i;for(i=0;i<reqEls.length;i+=1){reqEls[i].classList.add("appx-required-temp-disabled");}};this.enableRequired=function(extraBlock){var reqEls=extraBlock.getElementsByClassName(".appx-required");
var i;for(i=0;i<reqEls.length;i+=1){reqEls[i].classList.remove("appx-required-temp-disabled");}};this.populateShippingValue=function(billingInput){var sameAsBillingInput=document.getElementById("same_as_billing");var shippingInput;var isVisualforceGeneratedId=billingInput.id.indexOf(":")!==-1;if(sameAsBillingInput&&sameAsBillingInput.checked){if(isVisualforceGeneratedId===true){var colonSeparatedParts=billingInput.id.split(":");
var lastPart=colonSeparatedParts[colonSeparatedParts.length-1].replace("billing","shipping");shippingInput=document.querySelector("[id$="+lastPart+"]");if(!shippingInput){if(lastPart.endsWith("select")){lastPart=lastPart.replace("select","input");}else{if(lastPart.endsWith("input")){lastPart=lastPart.replace("input","select");
}}shippingInput=document.querySelector("[id$="+lastPart+"]");}}else{var shippingInputId=billingInput.id.replace("billing","shipping");shippingInput=document.getElementById(shippingInputId);if(!shippingInput){shippingInput=$("[id$='"+shippingInputId+"'")[0];}}if(shippingInput){if(billingInput.selectedOptions&&shippingInput.name.endsWith("appx-shipping-state-input")){shippingInput.value=billingInput.selectedOptions[0].label;
}else{shippingInput.value=billingInput.value;}if(shippingInput.value!==""&&shippingInput.value!==AppxSubscriptionManagerLabels.EMPTY_VALUE_PICKLIST){var containerId=shippingInput.getAttribute("data-container-id");var containerMsgId=shippingInput.getAttribute("data-error-container-id");this.hideError(containerId,containerMsgId);
}}}};this.validateVatNumber=function(){if(this.hasVatIdNumber()===true&&this.hasUpdatedVatIdNumber()===true){var vatNumber=document.getElementById("appx-vat-number-id").value;if(this.isOverlay===false){this.hideError("appx-vat-number-id","error-message-vat-number-id");}else{AppxCheckoutWizard.hideCheckoutWizardError();
}if(vatNumber!==undefined){validateVatNumberApex(vatNumber);}}else{this.generateStripeToken();}};this.onVatNumberValidationComplete=function(){var taxConfig=this.tax;if(this.isOverlay===true){AppxCheckoutWizard.vatValidationFinished(taxConfig.isValidVatNumber);}else{if(taxConfig.isValidVatNumber===false){document.getElementById("appx-vat-number-id").classList.add("slds-has-error");
ToastManager.createToast({severity:ToastManager.severity.error,duration:ToastManager.duration.medium,title:AppxSubscriptionManagerLabels.GENERIC_ERROR_TITLE,body:AppxSubscriptionManagerLabels.INVALID_VAT_NUMBER});Appx.hideSpinnerButton("appx-button-review");Appx.enableButton("appx-button-review");}else{document.getElementById("appx-vat-number-id").classList.remove("slds-has-error");
if(this.isEditPayment===true){this.generateStripeToken();}else{AppxCheckoutWizard.fillSubscriptionDetailData(false);this.callReviewChangesModal();}}}};this.changeSubscriptionPlan=function(planEl){var planId=planEl.getAttribute("data-plan-id");if(planId!==undefined&&planId!==null){AppxSpinnerManager.wholePageOrContent("page");
changePlanApex(planId);this.selectRadio(planEl,"subscription-plans-id");}};this.updateRequiredFieldsForReviewChanges=function(enableAsRequired){var checks=["checkbox_tc_payment"];var i;var checkEl;for(i=0;i<checks.length;i+=1){checkEl=document.getElementById(checks[i]);if(enableAsRequired){checkEl.classList.remove("appx-required-temp-disabled");
}else{checkEl.classList.add("appx-required-temp-disabled");}}};this.resetLegalFinePrintChecks=function(){var checks=["checkbox_tc_payment"];var i;var checkEl;for(i=0;i<checks.length;i+=1){checkEl=document.getElementById(checks[i]);checkEl.checked=false;}};this.generateStripeToken=function(){if(this.isEditPayment===true){var self=this;
AppxStripeBillingHandler.generateStripeToken().then(function(){self.validateUSShippingAddress();},function(err){self.handlePaymentFailure(err);});}else{this.validateUSShippingAddress();}};this.reviewSubscription=function(){var self=this;Appx.showSpinnerButton("appx-button-review");Appx.disableButton("appx-button-review");
if(this.validate()===false){this.validateVatNumber();}else{Appx.hideSpinnerButton("appx-button-review");Appx.enableButton("appx-button-review");}};this.onReviewSubscriptionCompleted=function(){if(this.ussSalesTax&&!this.ussSalesTax.isValidShippingAddress&&document.querySelector("[id$=appx-shipping-country]")&&document.querySelector("[id$=appx-shipping-country]").value=="US"){ToastManager.createToast({severity:ToastManager.severity.error,duration:ToastManager.duration.sticky,title:AppxSubscriptionManagerLabels.GENERIC_ERROR_TITLE,body:AppxSubscriptionManagerLabels.USST_GENERIC_ERROR});
Appx.hideSpinnerButton("appx-button-review");Appx.enableButton("appx-button-cancel");Appx.enableButton("appx-button-review");}else{this.toggleIsEditMode();this.calculateNewTotals();this.pasteOriginalPlan();AppxCheckoutWizard.fillSubscriptionDetailData(false);this.callReviewChangesModal();}};this.callReviewChangesModal=function(){document.getElementById("appx-payment-increase-banner").classList.add("slds-hide");
document.getElementById("appx-payment-reduction-banner").classList.add("slds-hide");Appx.showModal("appx_edit_subscription_review_changes_modal");if(this.ussSalesTax&&this.ussSalesTax.isCollectUSSalesTaxOn){var numOfUsers=document.getElementById("appx-subscription-num-of-users-id")?document.getElementById("appx-num-of-users-id").value:1;
var originalUnits=this.subscription.originalNumOfUnits;if(numOfUsers<originalUnits){document.getElementById("appx-payment-reduction-banner").classList.remove("slds-hide");}else{if(numOfUsers>originalUnits){document.getElementById("appx-payment-increase-banner").classList.remove("slds-hide");}}this.hideCouponSection();
}};this.validateUSShippingAddress=function(){if(document.querySelector("[id$=appx-shipping-country]")&&document.querySelector("[id$=appx-shipping-country]").value=="US"){validateUSShippingAddressAction();}else{this.onReviewSubscriptionCompleted();}};this.pasteOriginalPlan=function(){document.getElementById("appx-review-subscription-current").innerHTML=this.originalPaymentPlanHTML;
};this.hasUpdatedVatIdNumber=function(){return !this.tax.originalVatNumber||this.tax.originalVatNumber!=document.getElementById("appx-vat-number-id").value;};this.hasVatIdNumber=function(){var vatIdNumberEl=document.getElementById("appx-vat-number-id");return vatIdNumberEl&&vatIdNumberEl.value&&vatIdNumberEl.value.trim()!=="";
};this.saveReviewSubscription=function(){this.updateRequiredFieldsForReviewChanges(true);Appx.showSpinnerButton("appx-buttons-save");Appx.disableButton("appx-buttons-save");Appx.disableButton("appx-buttons-cancel");Appx.disableButton("appx-review-subscription-modal-close");if(this.validate()===false){if(this.isEditPayment){AppxStripeBillingHandler.createStripePaymentMethod().then(function(){paymentMethodId=AppxStripeBillingHandler.getPaymentMethod();
createSetupIntentApex(paymentMethodId);},function(err){handlePaymentFailure(err);});}else{this.save(this.isEditPayment);}this.togglePaymentHistory();}else{Appx.hideSpinnerButton("appx-buttons-save");Appx.enableButton("appx-buttons-save");Appx.enableButton("appx-buttons-cancel");Appx.enableButton("appx-review-subscription-modal-close");
}};this.cancelReviewSubscription=function(){Appx.hideSpinnerButton("appx-button-review");Appx.enableButton("appx-button-review");Appx.enableButton("appx-button-end");Appx.enableButton("appx-button-cancel");this.toggleIsEditMode();this.updateUSSTAmountContainer();this.calculateNewTotals();};this.onReviewSubscriptionClick=function(){this.updateRequiredFieldsForReviewChanges(false);
if(this.validate()===false){Appx.disableButton("appx-button-review");Appx.disableButton("appx-button-cancel");Appx.disableButton("appx-button-end");}appxSubMgr.reviewSubscription();};this.onSaveSubscriptionComplete=function(){Appx.hideSpinnerButton("appx-buttons-save");Appx.enableButton("appx-buttons-save");
Appx.enableButton("appx-buttons-cancel");Appx.enableButton("appx-review-subscription-modal-close");Appx.enableButton("appx-button-review");Appx.enableButton("appx-button-end");Appx.enableButton("appx-button-cancel");this.bindClickEvents();this.resetLegalFinePrintChecks();this.togglePaymentHistory();if(this.isEditPayment){this.isEditPayment=!this.isEditPayment;
}};}Number.isNaN=Number.isNaN||function(value){return value!==value;};var AppxCheckoutWizard=(function(){var _headerLabels;var _labels={};var _buttonLabels;var _isTrial;var _isUSSTFeatureFlagOn;var CUSTOMER_INFO_WIZARD_STEP=0;var SUBSCRIPTION_INFO_WIZARD_STEP=1;var PAYMENT_METHOD_WIZARD_STEP=2;var SUBSCRIPTION_CONFIRM_WIZARD_STEP=3;
var _updateHeaderText=function(index){var headerEl=document.getElementById("appx-header-text");var subheaderEl=document.getElementById("appx-header-subtext");if(headerEl!==null&&subheaderEl!==null){if(_headerLabels[index]!==undefined){headerEl.textContent=_headerLabels[index].header;subheaderEl.textContent=_headerLabels[index].subheader;
}else{headerEl.textContent="";subheaderEl.textContent="";}}};var init=function(cfg){if(cfg){_headerLabels=cfg.headerLabels||[];_updateHeaderText(0);if(cfg.labels){_labels=cfg.labels;}_buttonLabels=cfg.buttonLabels;_isTrial=cfg.isTrial;if(cfg.isUSSTFeatureFlagOn){_isUSSTFeatureFlagOn=cfg.isUSSTFeatureFlagOn;
}}};var _getLabels=function(){return _labels;};var setLabels=function(labels){_labels=labels;};var _getLabelsButton=function(){return _buttonLabels;};var _getIsTrial=function(){return _isTrial;};var _getFormattedAddress=function(street1,street2,city,state,zip,country){var formattedAddress={};var street=street1;
if(street2&&street2!==""){street=street+", "+street2;}var countryStateInfo=city+", "+state+". "+zip+", "+country;formattedAddress.street=street;formattedAddress.countryStateInfo=countryStateInfo;return formattedAddress;};var _fillContactAndBillingInfo=function(){var contactNameContainer=document.getElementById("text-input-id-1");
var contactLastNameContainer=document.getElementById("text-input-id-2");var contactEmailContainer=document.getElementById("email-input-id");var streetContainerPart1=document.getElementById("appx-billing-street-1");var streetContainerPart2=document.getElementById("appx-billing-street-2");var cityContainer=document.getElementById("appx-billing-city");
var zipContainer=document.getElementById("appx-billing-zip");var countryContainer=document.querySelector("[id$=appx-billing-country]");var stateContainer=document.querySelector("[id$=appx-billing-state-select]")?document.querySelector("[id$=appx-billing-state-select]"):document.getElementById("appx-billing-state-input");
var shippingAddressSection=document.getElementById("appx-shipping-address-values-id");var formattedAddress;if(contactNameContainer&&contactLastNameContainer&&contactEmailContainer){document.getElementById("appx-contact-name").innerText=contactNameContainer.value+" "+contactLastNameContainer.value;document.getElementById("appx-contact-email").innerText=contactEmailContainer.value;
}if(streetContainerPart1&&streetContainerPart2&&cityContainer&&zipContainer&&countryContainer&&stateContainer){formattedAddress=_getFormattedAddress(streetContainerPart1.value,streetContainerPart2.value,cityContainer.value,stateContainer.value,zipContainer.value,countryContainer.value);document.getElementById("appx-street-name").innerText=formattedAddress.street;
document.getElementById("appx-state-country-name").innerText=formattedAddress.countryStateInfo;if(shippingAddressSection){document.getElementById("appx-shipping-address-section").classList.remove("slds-hide");var sameAsBilling=document.getElementById("same_as_billing");if(sameAsBilling&&sameAsBilling.checked){document.getElementById("appx-street-name-shipping").innerText=formattedAddress.street;
document.getElementById("appx-state-country-name-shipping").innerText=formattedAddress.countryStateInfo;}else{_fillShippingInfo();}}else{document.getElementById("appx-shipping-address-section").classList.add("slds-hide");}}};var _fillPaymentMethodInfo=function(){var selectedTab=_selectedTab();var ccSection=document.getElementById("appx-cc-section");
var achSection=document.getElementById("appx-ach-section");var sepaSection=document.getElementById("appx-sepa-section");ccSection.classList.add("slds-hide");achSection.classList.add("slds-hide");sepaSection.classList.add("slds-hide");switch(selectedTab){case"credit-card":ccSection.classList.remove("slds-hide");
document.getElementById("appx-payment-title").innerText=_getLabels().PAYMENT_METHOD;document.getElementById("appx-credit-card-payment-method").innerText=_getLabels().CREDIT_CARD;break;case"ach":var nameAccountSection=document.getElementById("appx-us-bank-name-account-id");var routingNumberSection=document.getElementById("appx-us-bank-account-routing");
var accountNumber=document.getElementById("appx-us-bank-account-number");achSection.classList.remove("slds-hide");document.getElementById("appx-payment-title").innerText=_getLabels().BANK_ACCOUNT;if(nameAccountSection&&routingNumberSection&&accountNumber){document.getElementById("appx-name-on-account").innerText=nameAccountSection.value;
document.getElementById("appx-routing-number").innerText=routingNumberSection.value;document.getElementById("appx-account-number").innerText=accountNumber.value;}break;case"sepa":var nameAccountSepaSection=document.getElementById("appx-eu-bank-name-account-id");var bankNameSection=document.getElementById("appx-eu-bank-name-id");
var ibanSection=document.getElementById("appx-eu-bank-iban-number-id");sepaSection.classList.remove("slds-hide");document.getElementById("appx-payment-title").innerText=_getLabels().BANK_ACCOUNT;if(nameAccountSepaSection&&bankNameSection&&ibanSection){document.getElementById("appx-name-on-account-sepa").innerText=nameAccountSepaSection.value;
document.getElementById("appx-bank-name").innerText=bankNameSection.value;document.getElementById("appx-iban-number").innerText=ibanSection.value;}break;default:throw new Error("Invalid payment type selected.");}};var _selectedTab=function(){var creditCardTab=document.getElementById("appx_pay_method_cc_li");
var bankAccountTab=document.getElementById("appx_pay_usbank_1_li");var europeanBankTab=document.getElementById("appx_pay_eurobank_li");if(creditCardTab&&creditCardTab.classList.contains("slds-is-active")){return"credit-card";}else{if(bankAccountTab&&bankAccountTab.classList.contains("slds-is-active")){return"ach";
}else{if(europeanBankTab&&europeanBankTab.classList.contains("slds-is-active")){return"sepa";}}}};var _fillShippingInfo=function(){var streetContainerPart1=document.querySelector("[id$=appx-shipping-street-1]");var streetContainerPart2=document.querySelector("[id$=appx-shipping-street-2]");var cityContainer=document.querySelector("[id$=appx-shipping-city]");
var zipContainer=document.querySelector("[id$=appx-shipping-zip]");var countryContainer=document.querySelector("[id$=appx-shipping-country]");var stateContainer=document.querySelector("[id$=appx-shipping-state-select]")?document.querySelector("[id$=appx-shipping-state-select]"):document.querySelector("[id$=appx-shipping-state-input]");
if(streetContainerPart1&&streetContainerPart2&&cityContainer&&zipContainer&&countryContainer&&stateContainer){var formattedAddress=_getFormattedAddress(streetContainerPart1.value,streetContainerPart2.value,cityContainer.value,stateContainer.value,zipContainer.value,countryContainer.value);document.getElementById("appx-street-name-shipping").innerText=formattedAddress.street;
document.getElementById("appx-state-country-name-shipping").innerText=formattedAddress.countryStateInfo;}};var _fillVatInfo=function(){var vatContainer=document.getElementById("appx-vat-number-id");var vatContainerOutput=document.getElementById("appx-vat-number-id-output");if(vatContainer&&vatContainerOutput){vatContainerOutput.innerText=vatContainer.value;
}};var _fillSubscriptionInfo=function(){var usersContainer=document.getElementById("appx-num-of-users-id");if(usersContainer!==null){document.querySelector("[id$=appx-num-of-users-output]").innerText=usersContainer.value;var couponContainer=document.getElementById("appx-coupon-code-id");if(couponContainer!==null){if(document.querySelector("[id$=appx-coupon-output]")){document.querySelector("[id$=appx-coupon-output]").innerText=couponContainer.value;
}}}};var fillSubscriptionDetailData=function(editPaymentMethod){_fillContactAndBillingInfo();_fillVatInfo();_fillSubscriptionInfo();if(editPaymentMethod===true){_fillPaymentMethodInfo();}};var showWizardTooltip=function(tooltipId,step){var wizardSteps=document.getElementsByClassName("appx-checkout-wizard-step");
var tooltip=document.getElementById(tooltipId);var leftPosition=(100/(wizardSteps.length-1)*(step)).toString();tooltip.classList.remove("slds-hide");if(step===0){tooltip.style="position: absolute; left:calc("+leftPosition+"% + -90px); top: -50px";}else{if(step===1){tooltip.style="position: absolute; left:calc("+leftPosition+"% + -47px); top: -50px";
}else{if(step===2){tooltip.style="position: absolute; left:calc("+leftPosition+"% + -80px); top: -50px";}else{if(step===3){tooltip.style="position: absolute; left: calc(99% - 73px); top: -50px; width: 136px;";}}}}};var hideWizardTooltip=function(tooltipId){var tooltip=document.getElementById(tooltipId);
tooltip.classList.add("slds-hide");};var _updateProgressBarOneStepForward=function(step,wizardSteps){var progressBarSteps=document.getElementsByClassName("slds-progress__item");var progressBar=document.getElementsByClassName("slds-progress-bar__value")[0];var stepButton=progressBarSteps[step].children[0];
var progressBarWidth=(100/(wizardSteps)*(step+1));progressBarSteps[step].classList.remove("slds-is-active");progressBarSteps[step].classList.add("slds-is-completed");stepButton.classList.add("slds-button_icon","slds-progress__marker_icon");progressBarSteps[step+1].classList.add("slds-is-active");progressBar.style.width=progressBarWidth.toString()+"%";
};var _updateProgressBarOneStepBackwards=function(step,wizardSteps){var progressBarSteps=document.getElementsByClassName("slds-progress__item");var progressBar=document.getElementsByClassName("slds-progress-bar__value")[0];var stepButton=progressBarSteps[step-1].children[0];var progressBarWidth=(100/(wizardSteps)*(step-1));
progressBarSteps[step-1].classList.add("slds-is-active");progressBarSteps[step-1].classList.remove("slds-is-completed");stepButton.classList.remove("slds-button_icon","slds-progress__marker_icon");progressBarSteps[step].classList.remove("slds-is-active");progressBar.style.width=progressBarWidth.toString()+"%";
};var _onNextStepReached=function(currentStepIndex,wizardSteps){var wizardPrevButton=document.getElementById("appx_wizzard_btn_prev");wizardSteps[currentStepIndex-1].classList.add("slds-hide");wizardSteps[currentStepIndex].classList.remove("slds-hide");AppxTooltip.init();_updateHeaderText(currentStepIndex);
_updateProgressBarOneStepForward(currentStepIndex-1,wizardSteps.length-1);if(currentStepIndex!==CUSTOMER_INFO_WIZARD_STEP){wizardPrevButton.classList.remove("slds-hide");}if(currentStepIndex===wizardSteps.length-1){var wizardNextButton=document.getElementById("appx_wizzard-btn_next");fillSubscriptionDetailData(true);
if(_getIsTrial().IS_TRIAL===true){wizardNextButton.innerHTML="<span>"+_getLabelsButton().START_TRIAL+"</span>";}else{wizardNextButton.innerHTML="<span>"+_getLabelsButton().PURCHASE+"</span>";}}};var _purchase=function(){if(AppxForm.validateForm(document.getElementById("appx_getitnow_buy_modal"))===false){if(appxSubMgr!==undefined){_disableButton("appx_wizzard-btn_next");
_disableButton("appx_wizzard_btn_prev");appxSubMgr.save(true);}else{throw new Error("Subscription manager has not been defined.");}}};var goToNextStep=function(){hideCheckoutWizardError();var wizardSteps=document.getElementsByClassName("appx-checkout-wizard-step");var shouldShowNextStep,shouldShowVatSection=false;
var vatSection=document.getElementById("appx-payment-plan-vat-number-outer");var i;var el;for(i=0;i<wizardSteps.length;i+=1){el=wizardSteps[i];var hasValidationErrors=AppxForm.validateForm(wizardSteps[i]);if(hasValidationErrors===false){if(i===CUSTOMER_INFO_WIZARD_STEP&&(el.classList.contains("slds-hide")===false)){var showVatSectionElement=document.querySelector("[id$=appx-show-vat-section]");
if(i===0&&(showVatSectionElement&&document.getElementById("appx-shipping-address-values-id")!==null)){if(showVatSectionElement.value){shouldShowVatSection=true;}}if(vatSection){if(shouldShowVatSection){vatSection.classList.remove("slds-hide");}else{if(i===1){vatSection.classList.add("slds-hide");}}}if(document.querySelector("[id$=appx-shipping-country]")&&document.querySelector("[id$=appx-shipping-country]").value==="US"){AppxSpinnerManager.wholePageOrContent("page");
validateUSShippingAddress();}else{_onNextStepReached(SUBSCRIPTION_INFO_WIZARD_STEP,wizardSteps);}break;}else{if(i===SUBSCRIPTION_INFO_WIZARD_STEP&&(el.classList.contains("slds-hide")===false)){if(appxSubMgr.hasVatIdNumber()===true){_disableButton("appx_wizzard-btn_next");appxSubMgr.validateVatNumber();
}else{_onNextStepReached(PAYMENT_METHOD_WIZARD_STEP,wizardSteps);}break;}else{if(i===PAYMENT_METHOD_WIZARD_STEP&&(el.classList.contains("slds-hide")===false)){_disableButton("appx_wizzard-btn_next");AppxStripeBillingHandler.generateStripeToken().then(function(){if(_getIsTrial().IS_TRIAL||_isUSSTFeatureFlagOn){AppxStripeBillingHandler.createStripePaymentMethod();
}_enableButton("appx_wizzard-btn_next");_onNextStepReached(SUBSCRIPTION_CONFIRM_WIZARD_STEP,wizardSteps);},function(err){_handlePaymentFailure(err);_enableButton("appx_wizzard-btn_next");});break;}else{if(i===SUBSCRIPTION_CONFIRM_WIZARD_STEP&&(el.classList.contains("slds-hide")===false)){_purchase();
}}}}}else{break;}}};var vatValidationFinished=function(isValid){if(isValid===true){AppxCheckoutWizard.hideCheckoutWizardError();document.getElementById("appx-vat-number-id").classList.remove("slds-has-error");_onNextStepReached(PAYMENT_METHOD_WIZARD_STEP,document.getElementsByClassName("appx-checkout-wizard-step"));
}else{document.getElementById("appx-vat-number-id").classList.add("slds-has-error");AppxCheckoutWizard.showCheckoutWizardError(AppxSubscriptionManagerLabels.INVALID_VAT_NUMBER);}_enableButton("appx_wizzard-btn_next");};var onAfterShippingAddressValidation=function(isValid){if(isValid===true){_onNextStepReached(1,document.getElementsByClassName("appx-checkout-wizard-step"));
document.getElementById("appx-vat-number-id").classList.remove("slds-has-error");}else{AppxCheckoutWizard.showCheckoutWizardError(AppxSubscriptionManagerLabels.USST_GENERIC_ERROR);}_enableButton("appx_wizzard-btn_next");};var _disableButton=function(btnId){Appx.showSpinnerButton(btnId);Appx.disableButton(btnId);
};var _enableButton=function(btnId){Appx.hideSpinnerButton(btnId);Appx.enableButton(btnId);};var goToPreviousStep=function(){hideCheckoutWizardError();var wizardPrevButton=document.getElementById("appx_wizzard_btn_prev");var wizardNextButton=document.getElementById("appx_wizzard-btn_next");var wizardSteps=document.getElementsByClassName("appx-checkout-wizard-step");
var shouldShowPreviousStep=false;var i;var el;for(i=wizardSteps.length-1;i>=0;i-=1){el=wizardSteps[i];if(i===0){wizardPrevButton.classList.add("slds-hide");}if(i===wizardSteps.length-1){wizardNextButton.innerHTML="<span>"+_getLabelsButton().NEXT+"</span>";}if(shouldShowPreviousStep===true){el.classList.remove("slds-hide");
_updateHeaderText(i);break;}else{if(i>0&&el.classList.contains("slds-hide")===false){shouldShowPreviousStep=true;el.classList.add("slds-hide");_updateProgressBarOneStepBackwards(i,wizardSteps.length-1);_removeFormErrors(el);}}}};var _removeFormErrors=function(el){if(el){var errorEls=el.getElementsByClassName("slds-has-error");
var i;for(i=errorEls.length-1;i>=0;i-=1){errorEls[i].classList.remove("slds-has-error");}}};var showCheckoutWizardError=function(errText){document.getElementById("appx-modal-errors").classList.remove("slds-hide");document.getElementById("appx-checkout-error-message").innerText=errText;};var hideCheckoutWizardError=function(){document.getElementById("appx-modal-errors").classList.add("slds-hide");
document.getElementById("appx-checkout-error-message").innerText="";};var _handlePaymentFailure=function(errMsg){showCheckoutWizardError(errMsg.replace("\\",""));};return{setLabels:setLabels,goToNextStep:goToNextStep,goToPreviousStep:goToPreviousStep,showWizardTooltip:showWizardTooltip,hideWizardTooltip:hideWizardTooltip,fillSubscriptionDetailData:fillSubscriptionDetailData,init:init,hideCheckoutWizardError:hideCheckoutWizardError,showCheckoutWizardError:showCheckoutWizardError,vatValidationFinished:vatValidationFinished,onAfterShippingAddressValidation:onAfterShippingAddressValidation};
}());var ListingDetails={eventButtonSubmit:null,currentStarValue:0,userStarValue:0,userComment:"",userTitle:"",editMode:null,userReviewId:"",editModePrevious:null,remoteLikeAction:"",remoteUnLikeAction:"",buttonCommentId:"",listingId:"",isLoggedIn:false,moreFromProviderPageNo:0,showLoadMoreBtn:true,init:function(){var review_bars=document.querySelectorAll(".appx-extended-detail-review-bar");
var bar_length=review_bars.length;for(var i=0;i<=bar_length;i++){this.update_bar(review_bars[i]);}this.check_review_overflow();this.register_show_more();this.register_show_new_comment();this.register_show_report_abuse();this.register_write_review();this.register_report_abuse_submit();this.register_review_submit();
this.register_review_click();this.register_tab_click();this.register_tc_click();this.register_multilinefix();this.register_like_review_event();ListingDetails.loadEventCommentOnReview();Appx.hideModalEventsCTA();var review_stars=document.querySelectorAll(".appx-rating-interactive-group input[type=radio]");
ListingDetails.setup_star_flips(0,review_stars);},update_bar:function(bar){if(bar){var count_reviews=bar.getAttribute("data-review-count");var total_reviews=bar.getAttribute("data-review-total");var container_width=bar.parentNode.offsetWidth;var new_width=(count_reviews/total_reviews)*container_width;
if(new_width>container_width){new_width=container_width;}bar.style.width=new_width+"px";}},check_review_overflow:function(){var reviews=document.querySelectorAll(".appx-review-content");var review_length=reviews.length;for(var i=0;i<=review_length;i++){var review=reviews[i];if(review){var reviewText=review.querySelector(".appx-review-text");
var showMoreLink=review.querySelectorAll(".appx-review-show-more")[0];if(showMoreLink){if(reviewText.scrollHeight>reviewText.clientHeight){showMoreLink.style.display="inline";}else{showMoreLink.style.display="none";}}}}},register_show_more:function(){var show_more_links=document.querySelectorAll(".appx-review-show-more");
var show_more_links_length=show_more_links.length;for(var i=0;i<=show_more_links_length;i++){var link=show_more_links[i];if(link){link.onclick=function(){this.parentElement.previousElementSibling.classList.remove("appx-review-text-overflow");this.style.display="none";};}}},register_show_new_comment:function(){var show_new_comment_links=document.querySelectorAll(".appx-create-new-comment");
var show_new_comment_links_length=show_new_comment_links.length;for(var i=0;i<=show_new_comment_links_length;i++){var link=show_new_comment_links[i];if(link){link.onclick=function(){var selector=this.parentElement.parentElement.nextElementSibling;if(this.parentElement.className==="appx-review-content"){selector=this.nextElementSibling;
}selector.style.display="block";selector.querySelector(".slds-card textarea").focus();};}}},loadEventCommentOnReview:function(){var addComment=document.querySelectorAll(".appx-review-in-comment-btn");for(var i=0;i<=addComment.length;i++){if(addComment[i]){addComment[i].onclick=function(event){event.preventDefault();
var button=event.currentTarget;var id=button.dataset.comp;var form=document.getElementById("review-form-"+id);if(form){if(!ListingDetails.check_required_fields(form)){var commentRevId=ListingDetails.getIdReview(event.target.dataset.id);var commentRev=document.getElementsByClassName("comment"+id)[0].value;
ListingDetails.buttonCommentId="appx-review-in-comment-btn-"+id;Appx.showSpinnerButton(ListingDetails.buttonCommentId);Appx.disableButton(ListingDetails.buttonCommentId);appxCommentInReview(commentRevId,commentRev);}}};}}},register_show_report_abuse:function(){var show_abuse_links=document.querySelectorAll(".appx-report-abuse");
var show_abuse_links_length=show_abuse_links.length;for(var i=0;i<=show_abuse_links_length;i++){var link=show_abuse_links[i];if(link){link.onclick=function(){Appx.showModal("appx-abuse-modal");ListingDetails.userReviewId=ListingDetails.getIdReview(event.target.dataset.id);document.getElementById("appx-report-abuse-textarea").focus();
};}}},register_write_review:function(){var link=document.querySelectorAll(".appx-write-review-button")[0];if(link){link.onclick=function(){ListingDetails.register_load_review();Appx.showModal("appx-review-modal");document.getElementById("appx-review-title").focus();};}},register_load_review:function(){if(ListingDetails.editModePrevious){var buttonStar=document.getElementById(ListingDetails.userStarValue+"_star");
buttonStar.setAttribute("data-rateactive","true");var review_stars=document.querySelectorAll(".appx-rating-interactive-group input[type=radio]");ListingDetails.setup_star_flips(ListingDetails.userStarValue,review_stars);document.getElementById("appx-review-title").value=ListingDetails.userTitle;document.getElementById("appx-review-comment").value=ListingDetails.userComment;
}},register_report_abuse_submit:function(){var button=document.getElementById("appx-abuse-submit");var form=document.getElementById("appx-report-abuse-form");if(button&&form){button.onclick=function(event){event.preventDefault();if(!ListingDetails.check_required_fields(form)){var comment=document.getElementById("appx-report-abuse-textarea").value;
var revId=ListingDetails.userReviewId;appxReportAbuse(revId,comment);ListingDetails.eventButtonSubmit=event;ListingDetails.register_report_abuse_save();}return false;};}},register_review_submit:function(){var button=document.getElementById("appx_btn_submitreview");var form=document.getElementById("appx-review-form");
if(button&&form){button.onclick=function(event){if(!ListingDetails.check_required_fields(form)){var title=document.getElementById("appx-review-title").value;var comment=document.getElementById("appx-review-comment").value;ListingDetails.eventButtonSubmit=event;ListingDetails.editMode=ListingDetails.editModePrevious;
Appx.showSpinnerButton("appx_btn_submitreview");ListingDetails.disableButtonsReview();appxSaveReview(ListingDetails.currentStarValue,title,comment);}return false;};}},enableButtonsReview:function(){Appx.enableButton("appx_btn_deletereview");Appx.enableButton("appx_btn_submitreview");Appx.enableButton("appx_btn_cancelreview");
Appx.enableButton("appx_btn_closereview");},disableButtonsReview:function(){Appx.disableButton("appx_btn_deletereview");Appx.disableButton("appx_btn_submitreview");Appx.disableButton("appx_btn_cancelreview");Appx.disableButton("appx_btn_closereview");},register_review_finish_save:function(){Appx.hideModalCancel(ListingDetails.eventButtonSubmit);
if(ListingDetails.editMode){ToastManager.createToast({duration:ToastManager.duration.medium,severity:ToastManager.severity.success,title:Appx.label.reviewEdit});}else{ToastManager.createToast({duration:ToastManager.duration.medium,severity:ToastManager.severity.success,title:Appx.label.reviewSubmit});
}ListingDetails.enableButtonsReview();},register_review_finish_delete:function(){Appx.hideModalCancel(ListingDetails.eventButtonSubmit);ListingDetails.editMode=false;ToastManager.createToast({duration:ToastManager.duration.medium,severity:ToastManager.severity.success,title:Appx.label.reviewDelete});
ListingDetails.enableButtonsReview();},register_comment_finish_save:function(){Appx.hideSpinnerButton(ListingDetails.buttonCommentId);Appx.enableButton(ListingDetails.buttonCommentId);},register_report_abuse_save:function(){Appx.hideModalCancel(ListingDetails.eventButtonSubmit);ToastManager.createToast({duration:ToastManager.duration.medium,severity:ToastManager.severity.success,title:Appx.label.reportAbuse});
},register_review_click:function(){var review_stars=document.querySelectorAll(".appx-rating-interactive-group input[type=radio]");var review_stars_length=review_stars.length;var touched=false;for(var i=0;i<=review_stars_length;i++){var star=review_stars[i];if(star){star.onclick=function(){var current_number=this.getAttribute("data-number");
ListingDetails.currentStarValue=current_number;ListingDetails.setup_star_flips(current_number,review_stars);for(var i=0;i<review_stars.length;i++){review_stars[i].setAttribute("data-rateactive","false");}this.setAttribute("data-rateactive","true");};var star_label=star.nextElementSibling;star_label.onmouseover=function(){var current_number=this.previousElementSibling.getAttribute("data-number");
ListingDetails.setup_star_flips(current_number,review_stars);};star_label.ontouchstart=function(){var current_number=this.previousElementSibling.getAttribute("data-number");ListingDetails.currentStarValue=current_number;ListingDetails.setup_star_flips(current_number,review_stars);for(var i=0;i<review_stars.length;
i++){review_stars[i].setAttribute("data-rateactive","false");}this.setAttribute("data-rateactive","true");touched=true;};star_label.onmouseout=function(){if(!touched){var active_star=document.querySelector("[data-rateactive=true]");if(active_star){ListingDetails.setup_star_flips(active_star.getAttribute("data-number"),review_stars);
}else{ListingDetails.setup_star_flips(0,review_stars);}}};}}},flip_other_star_ratings:function(children,klass){for(var i=0;i<children.length;i++){var child=children[i];if(child.classList.contains(klass)){child.style.display="inline-block";}else{child.style.display="none";}}},setup_star_flips:function(current_number,review_stars){for(var i=0;
i<review_stars.length;i++){var parent=review_stars[i];if(parent&&parent.getAttribute("data-number")){var number=parent.getAttribute("data-number");var children=parent.nextElementSibling.firstElementChild.children;if(number<=current_number){ListingDetails.flip_other_star_ratings(children,"filled");}else{if(number>current_number){ListingDetails.flip_other_star_ratings(children,"open");
}}}}},check_required_fields:function(form_element){var error=false;var required_elements=form_element.querySelectorAll(".required");for(var i=0;i<required_elements.length;i++){var req=required_elements[i];var elem=req;if(req.tagName.toLowerCase()==="fieldset"){req=document.querySelector("[data-rateactive=true]");
if(!req){elem.classList.add("slds-has-error");error=true;elem.nextElementSibling.style.display="block";}else{elem.classList.remove("slds-has-error");elem.nextElementSibling.style.display="none";}}else{if(!req.value){elem.parentElement.classList.add("slds-has-error");error=true;elem.nextElementSibling.style.display="block";
elem.nextElementSibling.style.cssFloat="left";}else{elem.parentElement.classList.remove("slds-has-error");elem.nextElementSibling.style.display="none";}}}return error;},register_tab_click:function(){var overviewTab=document.getElementById("tab-default-1__item");var reviewsTab=document.getElementById("tab-default-2__item");
var expertiseTab=document.getElementById("tab-default-3__item");if(overviewTab){overviewTab.addEventListener("click",function(){ListingDetails.showContent("overview");},false);}if(reviewsTab){reviewsTab.addEventListener("click",function(){ListingDetails.showContent("reviews");},false);}if(expertiseTab){expertiseTab.addEventListener("click",function(){ListingDetails.showContent("expertise");
},false);}},showContent:function(content,revId){var url=window.location.href;var reg=/&revId=[\w]+/;if(content!=="reviewId"&&url.indexOf("revId")>0){var newurl=url.replace(reg,"");window.history.replaceState("newurl","",newurl);}if(content==="overview"){var contentBlock=document.getElementById("tab-default-1");
}if(content==="reviews"){var contentBlock=document.getElementById("tab-default-2");}if(content==="expertise"){var contentBlock=document.getElementById("tab-default-3");}if(content==="reviewId"&&url.indexOf("revId")<0){var newurl=url+"&revId="+revId;window.history.replaceState("newurl","",newurl);var contentBlock=document.getElementById("tab-default-2");
}if(contentBlock){var viewAllReviewsLink=document.getElementById("view-all-reviews-link");ListingDetails.hideAllContentBlocks();if(contentBlock.getAttribute("data-loaded")==="true"&&content!="reviewId"&&!viewAllReviewsLink){ListingDetails.showContentNow(contentBlock);}else{ListingDetails.showHideSpinner("show");
fetchContentBlock(contentBlock);}Eventbus.publish("analytics_listing_tab_switch",{content:content});}},showHideSpinner:function(action){var spinner=document.getElementById("appx_tab_spinner");if(spinner){if(action==="show"){spinner.classList.add("slds-show");spinner.classList.remove("slds-hide");}else{spinner.classList.add("slds-hide");
spinner.classList.remove("slds-show");}}},hideAllContentBlocks:function(){var allBlocks=document.getElementsByClassName("appx-tabs__content");for(var i=0;i<allBlocks.length;i++){allBlocks[i].classList.add("slds-hide");allBlocks[i].classList.remove("slds-show");}},showContentNow:function(contentBlock){ListingDetails.showHideSpinner("hide");
if(!contentBlock){var contentBlock=document.getElementById("tab-default-2");}ListingDetails.highlightTab(contentBlock);contentBlock.classList.add("slds-show");contentBlock.classList.remove("slds-hide");contentBlock.setAttribute("data-loaded","true");AppxSvgIE.buildSVGForIEAfterRerender();},showFooter:function(){var scrolledLimitDown=120;
var container=document.getElementsByClassName("appx-brand-1")[0];var hasScroll=container&&((container.scrollHeight-scrolledLimitDown)>container.clientHeight);if(!hasScroll){var footer=document.getElementsByClassName("appx-detail-footer");if(footer[0]&&footer[0].classList.contains("appx-detail-footer-initial-hide")){footer[0].classList.remove("appx-detail-footer-initial-hide");
}}},hideFooter:function(){var scrolledLimitDown=120;var container=document.getElementsByClassName("appx-brand-1")[0];var hasScroll=container&&((container.scrollHeight-scrolledLimitDown)>container.clientHeight);if(!hasScroll){var footer=document.getElementsByClassName("appx-detail-footer");if(footer[0]&&!footer[0].classList.contains("appx-detail-footer-initial-hide")){footer[0].classList.add("appx-detail-footer-initial-hide");
}}},highlightTab:function(contentBlock){var contentBlockId=contentBlock.getAttribute("id");var tabId=contentBlockId+"__item";var tab=document.getElementById(tabId);if(tab){var tabUl=Appx.findAncestor(tab,"slds-tabs_default__nav");var tabLi=Appx.findAncestor(tab,"appx-detail-tab");var allTabs=tabUl.getElementsByClassName("appx-detail-tab");
for(var i=0;i<allTabs.length;i++){if(allTabs[i]===tabLi){allTabs[i].classList.add("slds-active");}else{allTabs[i].classList.remove("slds-active");}}}},showMoreFromProviderSectionSpinner:function(){var cfg={brand:false,containerId:"more-from-provider-spinner-container-id",spinnerId:"more-from-provider-spinner-id",size:"medium"};
var spinnerContainer=AppxSpinnerManager.createWithContainer(cfg);spinnerContainer.style.background="none";var wrapperId="section-container";var wrapper=document.getElementById(wrapperId);AppxSpinnerManager.append(wrapper,spinnerContainer);},hideMoreFromPoviderSectionSpinner:function(){var wrapper=document.querySelector("#section-container");
var spinnerContainer=wrapper.getElementsByClassName("slds-spinner_container")[0];if(wrapper&&spinnerContainer){wrapper.removeChild(spinnerContainer);}},loadMoreFromProvider:function(listingtId,appType,exchangeSiteName,publisherId,totalApps,maxListings){Appx.showSpinnerButton("appx_load_more_from_provider");
Appx.disableButton("appx_load_more_from_provider");var auxiliaryPageUrl="appxLoadMoreFromProviderAjax?listingId="+listingtId;auxiliaryPageUrl+="&Type="+appType;auxiliaryPageUrl+="&ExchangeSiteName="+exchangeSiteName;auxiliaryPageUrl+="&publisherId="+publisherId;auxiliaryPageUrl+="&pageNo="+ListingDetails.moreFromProviderPageNo;
auxiliaryPageUrl+="&totalApps="+totalApps;ListingDetails.moreFromProviderPageNo=ListingDetails.moreFromProviderPageNo+1;Appx.httpGetAsync(auxiliaryPageUrl,function(response){parser=new DOMParser();var doc=parser.parseFromString(response,"text/html");ListingDetails.afterLoadMoreListings(doc);AppxTile.init();
AppxSvgIE.buildSVGForIE();var showMoreBtn=totalApps>(ListingDetails.moreFromProviderPageNo*maxListings);if(showMoreBtn===false){var showMore=document.getElementById("appx-load-more-btn-id");if(showMore){showMore.classList.add("slds-hide");}}});},afterLoadMoreListings:function(doc){var listingsProviderAjax=doc.getElementById("appx_more_provider_ajax");
var listingsProvider=document.getElementById("appx_more_provider");var providerChildren=listingsProviderAjax.querySelectorAll("li");var len=providerChildren.length;for(var i=len;i>0;i--){var newElem=providerChildren[i-1].cloneNode(true);listingsProvider.appendChild(newElem);}for(var j=providerChildren.length;
j>0;j--){providerChildren[j-1].parentNode.removeChild(providerChildren[j-1]);}ListingDetails.hideMoreFromPoviderSectionSpinner();Appx.hideSpinnerButton("appx_load_more_from_provider");Appx.enableButton("appx_load_more_from_provider");AppxTile.init();},register_tc_click:function(){var tcLink=document.getElementById("appx_tc_link");
if(tcLink){tcLink.addEventListener("click",function(){Appx.showModal("appx_tc_modal");},false);}},register_multilinefix:function(){Appx.fixAllMultilines();},register_delete_review:function(e){ListingDetails.eventButtonSubmit=e;var confirmDelete=confirm("Are you sure you want to delete this review?");
if(confirmDelete==true){Appx.showSpinnerButton("appx_btn_deletereview");ListingDetails.disableButtonsReview();appxDeleteReview();}},register_like_review_event:function(e){var reviews=document.querySelectorAll(".appx-endorse");for(var i=0;i<reviews.length;i++){var rev=reviews[i];if(rev){rev.onclick=function(event){var button=event.currentTarget;
if(ListingDetails.isLoggedIn){var id=button.dataset.id;var revId=ListingDetails.getIdReview(button.dataset.revid);var LikeElements=document.getElementsByClassName("appx-review-content");var remoteActionSent=true;for(var i=0;i<LikeElements.length;i++){if(ListingDetails.getIdReview(LikeElements[i].dataset.revid)==revId){ListingDetails.setlikeToElement(LikeElements[i],revId,remoteActionSent);
remoteActionSent=false;}}}};}}},setlikeToElement:function(elementContainer,revId,remoteActionSent){var button=elementContainer.getElementsByClassName("appx-endorse")[0];var spanLikes=elementContainer.getElementsByClassName("appxLikeCounts")[0];var spanLabel=elementContainer.getElementsByClassName("appxLikeLabel")[0];
var likesInt=parseInt(spanLikes.dataset.likes);if(button.classList.contains("appx-active-endorse")){button.classList.remove("appx-active-endorse");likesInt-=1;if(remoteActionSent){ListingDetails.remoteUnLikeReview(revId);}}else{button.classList.add("appx-active-endorse");likesInt+=1;if(remoteActionSent){ListingDetails.remoteLikeReview(revId);
}}if(likesInt==1){spanLabel.innerText=Appx.label.like;}else{spanLabel.innerText=Appx.label.likes;}spanLikes.dataset.likes=likesInt;spanLikes.innerHTML=likesInt;},remoteLikeReview:function(revId){Visualforce.remoting.Manager.invokeAction(ListingDetails.remoteLikeAction,revId,ListingDetails.listingId,function(result,event){},{escape:true});
},remoteUnLikeReview:function(revId){Visualforce.remoting.Manager.invokeAction(ListingDetails.remoteUnLikeAction,revId,function(result,event){},{escape:true});},getIdReview:function(reviewId){if(reviewId){if((reviewId.substring(0,2)=="MP")||(reviewId.substring(0,2)=="MN")){return reviewId.substring(2,reviewId.length);
}}return reviewId;},findAncestor:function(el,cls){while(!el.classList.contains(cls)){el=el.parentNode;}return el;},fireAsyncTilesEvent:function(loaded_tiles){if(loaded_tiles!==undefined){var ev=new CustomEvent("analytic_async_tiles",{detail:{tiles:loaded_tiles}});document.body.dispatchEvent(ev);}}};domready(function(){ListingDetails.init();
});var appxListingDetailsResize=debounce(function(){ListingDetails.check_review_overflow();},Appx.debounceTime);window.onresize=function(){appxListingDetailsResize();};var AppxRecommendedAuth={init:function(){document.body.classList.add("appx-recommended-auth");}};var AppxRecommended={init:function(){document.body.classList.add("appx-recommended");
},enableTileBlockSpinner:function(sectionId){var cfg=new Object();cfg.brand=false;cfg.containerId="appx_spinner_tile_container_"+sectionId;cfg.spinnerId="appx_spinner_tile_spinner_"+sectionId;cfg.size="medium";var spinner=AppxSpinnerManager.create(cfg);var wrapper=document.getElementById("appx_spinner_tile_outer_"+sectionId);
wrapper.classList.add("appx-spinner-tile_outer");AppxSpinnerManager.append(wrapper,spinner);},disableTileBlockSpinner:function(sectionId){AppxSpinnerManager.hide("appx_spinner_tile_spinner_"+sectionId);var wrapper=document.getElementById("appx_spinner_tile_outer_"+sectionId);wrapper.classList.remove("appx-spinner-tile_outer");
}};var AppxSpinnerManager={ASSISTIVE_TEXT_LABEL:"Loading",spinners:null,create:function(cfg){var spinner=document.createElement("DIV");AppxSpinnerManager.insert(cfg.spinnerId);spinner.setAttribute("id",cfg.spinnerId);spinner.classList.add("slds-spinner");spinner.classList.add("slds-spinner_"+cfg.size);
var span=document.createElement("SPAN");span.setAttribute("class","slds-assistive-text");span.innerHTML=AppxSpinnerManager.ASSISTIVE_TEXT_LABEL;var dot_a=document.createElement("DIV");var dot_b=document.createElement("DIV");dot_a.setAttribute("class","slds-spinner__dot-a");dot_b.setAttribute("class","slds-spinner__dot-b");
spinner.appendChild(dot_a);spinner.appendChild(dot_b);return spinner;},createInput:function(cfg){var spinner=AppxSpinnerManager.create(cfg);AppxSpinnerManager.insert(cfg.spinnerId);spinner.classList.add("slds-spinner");spinner.classList.add("slds-spinner_"+cfg.size);spinner.classList.add("slds-input__spinner");
if(cfg.brand){spinner.classList.add("slds-spinner_brand");}var container=document.getElementById(cfg.containerId);if(container){container.appendChild(spinner);}return container;},createWithContainer:function(cfg){var container=document.createElement("DIV");container.setAttribute("id",cfg.containerId);
container.setAttribute("class","slds-spinner_container");container.setAttribute("role","status");var spinner=AppxSpinnerManager.create(cfg);spinner.classList.add("slds-spinner_"+cfg.size);spinner.setAttribute("has-container",cfg.containerId);container.appendChild(spinner);return container;},fitIn:function(wrapper,spinner){if(wrapper&&spinner){var rectObjWrapper=wrapper.getBoundingClientRect();
spinner.style.top=rectObjWrapper.top+window.scrollY+"px";spinner.style.left=rectObjWrapper.left+"px";spinner.style.right=rectObjWrapper.left+"px";spinner.style.height=wrapper.offsetHeight+"px";}},wholePageOrContent:function(type){if(type){var cfg=new Object();cfg.brand=false;cfg.containerId=(type=="page")?"appx-page-container-id":"appx-content-container-id";
cfg.spinnerId=(type=="page")?"appx-page-spinner-id":"appx-content-spinner-id";cfg.size="large";var spinnerContainer=AppxSpinnerManager.createWithContainer(cfg);spinnerContainer.classList.add("slds-is-fixed");AppxSpinnerManager.insert(cfg.spinnerId);var wrapperId=(type=="page")?"appx_outer":"appx_content";
var wrapper=document.getElementById(wrapperId);AppxSpinnerManager.append(wrapper,spinnerContainer);if(type!="page"){spinnerContainer.style.zIndex="1";}return cfg;}},append:function(wrapper,spinner){if(wrapper&&spinner){wrapper.appendChild(spinner);}},hide:function(spinnerId){var parent;var spinner=document.getElementById(spinnerId);
if(spinner&&AppxSpinnerManager.spinners&&AppxSpinnerManager.spinners.length>0){parent=spinner.parentElement;parent.removeChild(spinner);AppxSpinnerManager.remove(spinnerId);if(AppxSpinnerManager.spinners.length==0){AppxSpinnerManager.spinnerDisplayed=false;}}},insert:function(spinnerId){if(!AppxSpinnerManager.spinners){AppxSpinnerManager.spinners=new Array();
}AppxSpinnerManager.spinners.push(spinnerId);},remove:function(spinnerId){if(AppxSpinnerManager.spinners){var index=AppxSpinnerManager.spinners.indexOf(spinnerId);if(index>-1){AppxSpinnerManager.spinners.splice(index,1);}}}};var AppxBanner={rotateTimer:8000,intervalID:null,mediaCount:0,rotateSemaphore:true,dotSelected:0,swipeSemaphore:true,touchOrClick:null,isWaitingToActivateRotate:true,init:function(){AppxBanner.dotSelected=0;
AppxBanner.intervalManager(false);AppxBanner.mediaCount=document.querySelectorAll("div.appx-banner-media-container").length;if(AppxBanner.mediaCount===1){if(document.querySelector("appx-banner-dots-container")){AppxBanner.addClass("appx-banner-dots-container","appx-banner-hide",0);}}else{if(AppxBanner.mediaCount>1){AppxBanner.addDotsControl();
AppxBanner.addEventButtons();AppxBanner.addRotatingFunctionality();AppxBanner.addSwipeFunctionality();}}},addDotsControl:function(){for(var i=0;i<AppxBanner.mediaCount;i++){div=document.createElement("div");div.setAttribute("id","dot_"+i);div.classList.add("appx-banner-dot");if(i==0){div.classList.add("appx-banner-selected");
}else{div.classList.add("appx-banner-parcialselected");}var dotContainer=document.getElementsByClassName("appx-banner-dots-container")[0];dotContainer.appendChild(div);}},addEventButtons:function(){var dots=document.getElementsByClassName("appx-banner-dots-container")[0];dots.addEventListener("click",AppxBanner.dotClickTouch);
dots.addEventListener("touchend",AppxBanner.dotClickTouch);},dotClickTouch:function(e){AppxBanner.touchOrClick=e.type;var target=e.target;if((target.className!="appx-banner-dots-container")){var newDotSelected=parseInt(target.getAttribute("id").substring(4,5));AppxBanner.changeBanner(newDotSelected);
AppxBanner.intervalManager(false);AppxBanner.intervalManager(true);}},addRotatingFunctionality:function(){var container=document.getElementsByClassName("appx-banner")[0];container.addEventListener("mouseenter",function(e){if(AppxBanner.touchOrClick!="touchend"){AppxBanner.rotateSemaphore=false;AppxBanner.intervalManager(false);
}});container.addEventListener("mouseleave",function(e){AppxBanner.rotateSemaphore=true;AppxBanner.intervalManager(true);});AppxBanner.intervalManager(true);},addSwipeFunctionality:function(){var myElement=document.getElementsByClassName("appx-banner")[0];var mc=new Hammer(myElement);mc.on("swipeleft",function(ev){if(AppxBanner.swipeSemaphore){AppxBanner.next();
AppxBanner.deactivateSemaphores();}AppxBanner.intervalManager(false);AppxBanner.intervalManager(true);});mc.on("swiperight",function(ev){if(AppxBanner.swipeSemaphore){AppxBanner.previous();AppxBanner.deactivateSemaphores();}AppxBanner.intervalManager(false);AppxBanner.intervalManager(true);});},deactivateSemaphores:function(){AppxBanner.swipeSemaphore=false;
AppxBanner.rotateSemaphore=false;setTimeout(function(){AppxBanner.swipeSemaphore=true;},500);if(AppxBanner.isWaitingToActivateRotate){AppxBanner.isWaitingToActivateRotate=false;setTimeout(function(){AppxBanner.rotateSemaphore=true;AppxBanner.isWaitingToActivateRotate=true;},5000);}},next:function(){var banners=document.getElementsByClassName("appx-banner");
if(typeof banners!=="undefined"&&banners.length>0){AppxBanner.changeBanner((AppxBanner.dotSelected+1)%AppxBanner.mediaCount);}},previous:function(){if(AppxBanner.dotSelected==0){AppxBanner.changeBanner(AppxBanner.mediaCount-1);}else{AppxBanner.changeBanner(AppxBanner.dotSelected-1);}},addClass:function(element,classToAdd,index){document.getElementsByClassName(element)[index].classList.add(classToAdd);
},removeClass:function(element,classToRemove,index){document.getElementsByClassName(element)[index].classList.remove(classToRemove);},changeBanner:function(newDotSelected){AppxBanner.addClass("appx-banner-dot","appx-banner-parcialselected",AppxBanner.dotSelected);AppxBanner.addClass("appx-banner-media-container","appx-banner-notselected",AppxBanner.dotSelected);
setTimeout(function(){AppxBanner.addClass("appx-banner-media-container","appx-banner-hide",AppxBanner.dotSelected);AppxBanner.dotSelected=newDotSelected;AppxBanner.removeClass("appx-banner-dot","appx-banner-parcialselected",AppxBanner.dotSelected);AppxBanner.removeClass("appx-banner-media-container","appx-banner-hide",AppxBanner.dotSelected);
AppxBanner.removeClass("appx-banner-media-container","appx-banner-notselected",AppxBanner.dotSelected);},300);},intervalManager:function(flag){if(flag){if(AppxBanner.intervalID==null){AppxBanner.intervalID=setInterval(function(){if(AppxBanner.rotateSemaphore){AppxBanner.next();}},AppxBanner.rotateTimer);
}}else{clearInterval(AppxBanner.intervalID);AppxBanner.intervalID=null;}}};domready(function(){AppxBanner.init();});var AppxFilter={desktopButtons:false,filterOuter:null,showAllString:"Show all",onlyString:"only",showAllStringGeneric:"Show More +",init:function(){AppxFilter.filterOuter=document.getElementById("appx_filters");
window.addEventListener("scroll",AppxFilter.fixButtons,false);if(AppxFilter.filterOuter!==null){AppxFilter.formGroupEvents();AppxFilter.phoneInit();AppxFilter.filtersHide();AppxFilter.buttons();AppxFilter.countryStateActions();}},formGroupEvents:function(){var formGroups=AppxFilter.filterOuter.getElementsByClassName("appx-form-group");
for(var i=0;i<formGroups.length;i++){AppxFilter.createShowAllLink(formGroups[i]);AppxFilter.checkboxEvents(formGroups[i]);AppxFilter.createOnlyLinks(formGroups[i]);AppxFilter.alwaysOneChecked(formGroups[i]);}var formGroups2=AppxFilter.filterOuter.getElementsByClassName("appx-form-group2");for(var i=0;
i<formGroups2.length;i++){AppxFilter.selectEvents(formGroups2[i]);}},createShowAllLink:function(formGroup){var legend=formGroup.getElementsByClassName("appx-form-element__legend")[0];var a=document.createElement("A");var t=document.createTextNode(AppxFilter.showAllString);a.setAttribute("href","javascript:void(0)");
a.setAttribute("class","appx-form-element__legend-link");a.appendChild(t);legend.appendChild(a);a.addEventListener("click",function(){AppxFilter.clickShowAllLinks(formGroup);},false);AppxFilter.showHideAllLink(formGroup);AppxFilter.muteUnmuteGroup(formGroup);},clickShowAllLinks:function(formGroup){var checkBoxes=formGroup.getElementsByTagName("input");
for(var i=0;i<checkBoxes.length;i++){checkBoxes[i].checked=true;}AppxFilter.showHideAllLink(formGroup);AppxFilter.muteUnmuteGroup(formGroup);AppxFilter.filterAction();},showHideAllLink:function(formGroup){var checkBoxes=formGroup.getElementsByTagName("input");var showAllLink=formGroup.getElementsByClassName("appx-form-element__legend-link")[0];
var show=false;for(var i=0;i<checkBoxes.length;i++){if(checkBoxes[i].checked===false){show=true;}}if(show===true){showAllLink.classList.add("appx-form-element__legend-link-show");}else{showAllLink.classList.remove("appx-form-element__legend-link-show");}},muteUnmuteGroup:function(formGroup){var checkBoxes=formGroup.getElementsByTagName("input");
var uncheckedCount=0;for(var i=0;i<checkBoxes.length;i++){if(checkBoxes[i].checked===false){uncheckedCount++;}}if(uncheckedCount===checkBoxes.length&&checkBoxes.length>0){formGroup.classList.add("appx-form-group__muted");}else{formGroup.classList.remove("appx-form-group__muted");}},checkboxEvents:function(formGroup){var checkBoxes=formGroup.getElementsByTagName("input");
for(var i=0;i<checkBoxes.length;i++){checkBoxes[i].addEventListener("click",function(){AppxFilter.showHideAllLink(formGroup);AppxFilter.muteUnmuteGroup(formGroup);},false);checkBoxes[i].addEventListener("click",AppxFilter.filterAction,false);}},selectEvents:function(formGroup){var selectEls=formGroup.getElementsByTagName("select");
for(var i=0;i<selectEls.length;i++){selectEls[i].addEventListener("change",AppxFilter.filterAction,false);}},createOnlyLinks:function(formGroup){var checkBoxBlock=formGroup.getElementsByClassName("slds-checkbox");for(var i=0;i<checkBoxBlock.length;i++){checkBoxBlock[i].classList.add("appx-checkbox");
var label=checkBoxBlock[i].getElementsByTagName("label")[0];var a=document.createElement("A");var t=document.createTextNode(AppxFilter.onlyString);a.setAttribute("href","javascript:void(0)");a.setAttribute("class","appx-form-element__label-link");a.appendChild(t);label.appendChild(a);a.addEventListener("click",function(event){AppxFilter.clickOnlyLinks(event,formGroup);
},false);}},clickOnlyLinks:function(e,formGroup){var link=e.target;e.preventDefault();var checkBoxBlock=Appx.findAncestor(link,"slds-checkbox");var checkBox=checkBoxBlock.getElementsByTagName("input")[0];var checkBoxes=formGroup.getElementsByTagName("input");for(var i=0;i<checkBoxes.length;i++){if(checkBoxes[i]===checkBox){checkBoxes[i].checked=true;
}else{checkBoxes[i].checked=false;}}AppxFilter.showHideAllLink(formGroup);AppxFilter.muteUnmuteGroup(formGroup);AppxFilter.filterAction();},phoneInit:function(){var icon=document.getElementsByClassName("appx-global-header__button--icon-filter")[0];if(icon){icon.classList.add("appx-global-header__button--icon-filter-yes");
icon.addEventListener("click",AppxFilter.openCloseFilterPhone,false);}},openCloseFilterPhone:function(){if(AppxFilter.filterOuter.classList.contains("appx-filters-open")){AppxFilter.filterOuter.classList.remove("appx-filters-open");}else{AppxFilter.filterOuter.classList.add("appx-filters-open");document.location="#top";
}},filtersHide:function(){var filtersOuter=document.getElementsByClassName("appx-form-group");for(var i=0;i<filtersOuter.length;i++){var filterCutoff=filtersOuter[i].getAttribute("data-cutoff");if(filterCutoff!==null&&filterCutoff!=="-1"){var filterBlocks=filtersOuter[i].getElementsByClassName("slds-checkbox");
var filterBlocksLength=filterBlocks.length;var filtersBlockChecked=filtersOuter[i].querySelectorAll('input[class="appx-filter-checkbox"]:checked').length;var hasSelectedAllorNoneFilterBlockChecks=!((filtersBlockChecked>0)&&(filtersBlockChecked<filterBlocksLength));if(filterBlocksLength>filterCutoff&&hasSelectedAllorNoneFilterBlockChecks){for(var j=0;
j<filterBlocksLength;j++){if(j>=filterCutoff){filterBlocks[j].classList.add("appx-checkbox-hidden");}}var filterShowAllText=filtersOuter[i].getAttribute("data-showall-string");if(filterShowAllText===null||filterShowAllText===""){filterShowAllText=AppxFilter.showAllStringGeneric;}var a=document.createElement("A");
var t=document.createTextNode(filterShowAllText);a.setAttribute("href","javascript:void(0)");a.setAttribute("class","appx-form-show-more");a.appendChild(t);filtersOuter[i].appendChild(a);a.addEventListener("click",AppxFilter.showAllFilters,false);}}}},showAllFilters:function(e){var showAllLink=e.target;
var filterOuter=Appx.findAncestor(showAllLink,"appx-form-group");if(filterOuter){var filterBlocks=filterOuter.getElementsByClassName("slds-checkbox");var filterOuterLength=filterBlocks.length;for(var i=0;i<filterOuterLength;i++){filterBlocks[i].classList.remove("appx-checkbox-hidden");}showAllLink.style.display="none";
}},buttons:function(){var buttonOuter=document.getElementsByClassName("appx-filters-button-outer")[0];if(buttonOuter&&AppxFilter.desktopButtons===true){buttonOuter.classList.add("appx-filters-button-outer-visible");}var clearBtn=document.getElementById("appx_btn_filter_clear");var applyBtn=document.getElementById("appx_btn_filter_apply");
if(clearBtn){clearBtn.addEventListener("click",function(event){event.preventDefault();AppxFilter.clickClearBtn();},false);}if(applyBtn){applyBtn.addEventListener("click",function(event){event.preventDefault();AppxFilter.apply("false");},false);}},clickClearBtn:function(){var formGroups=AppxFilter.filterOuter.getElementsByClassName("appx-form-group");
for(var i=0;i<formGroups.length;i++){AppxFilter.clickShowAllLinks(formGroups[i]);}AppxFilter.apply("true");},filterAction:function(){var phoneView=(Appx.getCurrentSiteState()==="s"||Appx.getCurrentSiteState()==="xs");if(phoneView||AppxFilter.desktopButtons===true){AppxFilter.highlightApplyBtn();}else{AppxFilter.apply("false");
}},highlightApplyBtn:function(revert){if(typeof revert==="undefined"){var revert="no";}var applyBtn=document.getElementById("appx_btn_filter_apply");var btnOuter=document.getElementById("appx_filters_btn_outer");if(applyBtn){if(revert==="revert"){applyBtn.classList.remove("slds-button_brand");btnOuter.classList.remove("appx-filters-button-outer-active");
}else{applyBtn.classList.add("slds-button_brand");btnOuter.classList.add("appx-filters-button-outer-active");}AppxFilter.fixButtons();}},fixButtons:function(){var btnOuter=document.getElementById("appx_filters_btn_outer");var phoneView=(Appx.getCurrentSiteState()==="s"||Appx.getCurrentSiteState()==="xs");
var header=document.getElementById("appx_header");var headerHeight=0;if(header){headerHeight=Appx.getDimensions(header).h;}var positionFiltersY=Appx.getPosition(AppxFilter.filterOuter).y;if(btnOuter&&btnOuter.classList.contains("appx-filters-button-outer-active")){if(phoneView||headerHeight>positionFiltersY){btnOuter.classList.add("appx-filters-button-outer-fixed");
}else{btnOuter.classList.remove("appx-filters-button-outer-fixed");}}},apply:function(isReset){AppxFilter.submit(isReset);},alwaysOneChecked:function(formGroup){if(formGroup.getAttribute("data-always-one-checked")=="true"){var checkboxesInFieldset=formGroup.querySelectorAll("input[type=checkbox]");for(var j=0;
j<checkboxesInFieldset.length;j++){checkboxesInFieldset[j].addEventListener("click",function(event){AppxFilter.alwaysOneCheckedClick(event,formGroup);},false);}}},alwaysOneCheckedClick:function(e,formGroup){var checkboxesInFieldset=formGroup.querySelectorAll("input[type=checkbox]:checked");if(checkboxesInFieldset.length==0){e.preventDefault();
var targetElement=e.target||e.srcElement;targetElement.checked=true;AppxFilter.muteUnmuteGroup(formGroup);}},countryStateActions:function(e){var countryObj=document.getElementById("select_country");if(countryObj!=undefined){countryObj.addEventListener("change",function(){var stateObjs=document.getElementsByClassName("appx-state-options");
for(var i=0;i<stateObjs.length;i++){stateObjs[i].style.display="none";}var stateObj=document.getElementById("select_state");stateObj.style.display="block";if(countryObj.value.includes("US")){stateObj.style.display="none";stateObj=document.getElementById("select_state_us");stateObj.style.display="block";
stateObj.disabled=false;}else{if(countryObj.value.includes("CA")){stateObj.style.display="none";stateObj=document.getElementById("select_state_ca");stateObj.style.display="block";stateObj.disabled=false;}}});}}};domready(function(){AppxFilter.init();});var appxFilterWindowResize=debounce(function(){AppxFilter.fixButtons();
},Appx.debounceTime);window.addEventListener("resize",appxFilterWindowResize);var AppxForm={validateForm:function(form){var errors=false;var focusedOnFirstErrorEl=false;var firstReqEl;var reqEls=form.querySelectorAll(".appx-required:not(.appx-required-temp-disabled)");for(var i=0;i<reqEls.length;i++){var reqEl=reqEls[i];
firstReqEl=reqEl;if(reqEl.tagName.toLowerCase()==="input"){if(reqEl.type==="text"){var reqElValue=reqEl.value.trim();var greaterThanCheck=reqEl.getAttribute("data-required-number-greaterthan");var reqValue=parseInt(reqEl.getAttribute("data-required-number-greaterthan-value"));var minChars=reqEl.getAttribute("data-required-text-minchars");
var minCharsValue=parseInt(reqEl.getAttribute("data-required-text-minchars-value"));var noNumbersAllowed=reqEl.getAttribute("data-required-text-no-numbers");var numbers=/^[0-9]+$/;var hasNoNumbers=/^\D*$/;if(reqElValue===""){errors=true;AppxForm.addErrorToUi(reqEl);}else{if(reqEl.classList.contains("appx-required-number")&&!reqElValue.match(numbers)){errors=true;
AppxForm.addErrorToUi(reqEl);}else{if(greaterThanCheck==="true"&&reqElValue<=reqValue){errors=true;AppxForm.addErrorToUi(reqEl);}else{if(minChars==="true"&&reqElValue.length<minCharsValue){errors=true;AppxForm.addErrorToUi(reqEl);}else{if(noNumbersAllowed==="true"&&!reqElValue.match(hasNoNumbers)){errors=true;
AppxForm.addErrorToUi(reqEl);}else{AppxForm.removeErrorFromUi(reqEl);}}}}}}if(reqEl.type==="checkbox"){if(!reqEl.checked){errors=true;AppxForm.addErrorToUi(reqEl);}else{AppxForm.removeErrorFromUi(reqEl);}}if(reqEl.type==="date"){if(reqEl.value===""){errors=true;AppxForm.addErrorToUi(reqEl);}else{AppxForm.removeErrorFromUi(reqEl);
}}if(reqEl.type==="email"){if(AppxForm.isEmailValid(reqEl.value)===true){AppxForm.removeErrorFromUi(reqEl);}else{errors=true;AppxForm.addErrorToUi(reqEl);}}}else{if(reqEl.tagName.toLowerCase()==="select"){var reqElValue=reqEl.options[reqEl.selectedIndex].value;if(reqElValue===""){errors=true;AppxForm.addErrorToUi(reqEl);
}else{AppxForm.removeErrorFromUi(reqEl);}}else{if(reqEl.tagName.toLowerCase()==="textarea"){if(reqEl.value.trim()===""){errors=true;AppxForm.addErrorToUi(reqEl);}else{AppxForm.removeErrorFromUi(reqEl);}}else{if(reqEl.tagName.toLowerCase()==="fieldset"){if(reqEl.classList.contains("appx-required__checkboxgroup")){var checkboxes=reqEl.querySelectorAll(".appx-checkbox input");
var checkedCount=0;for(var j=0;j<checkboxes.length;j++){if(checkboxes[j].checked){checkedCount++;}}if(checkedCount===0){errors=true;AppxForm.addErrorToUi(reqEl);firstReqEl=checkboxes[0];}else{AppxForm.removeErrorFromUi(reqEl);}}if(reqEl.classList.contains("appx-required__radiogroup")){var radioB=reqEl.querySelectorAll(".appx-radio_button input");
var checkedCount=0;for(var j=0;j<radioB.length;j++){if(radioB[j].checked){checkedCount++;}}if(checkedCount===0){errors=true;AppxForm.addErrorToUi(reqEl);firstReqEl=radioB[0];}else{AppxForm.removeErrorFromUi(reqEl);}}}}}}if(errors===true&&focusedOnFirstErrorEl===false){focusedOnFirstErrorEl=true;firstReqEl.focus();
}}return errors;},addErrorToUi:function(el){if(el.classList.contains("slds-form-element")){el.classList.add("slds-has-error");}else{var parent=Appx.findAncestor(el,"slds-form-element");if(parent){parent.classList.add("slds-has-error");}}},removeErrorFromUi:function(el){if(el.classList.contains("slds-form-element")){el.classList.remove("slds-has-error");
}else{var parent=Appx.findAncestor(el,"slds-form-element");if(parent){parent.classList.remove("slds-has-error");}}},isEmailValid:function(email){var mailformatRegex=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
if(email&&mailformatRegex.test(email)){return true;}return false;}};var AppxJobs={init:function(){AppxJobs.postJobInit();},postJobInit:function(){var postBtns=document.getElementsByClassName("appx-btn__post-job");for(var i=0;i<postBtns.length;i++){postBtns[i].addEventListener("click",AppxJobs.postJob,false);
}},postJob:function(){Appx.showModal("appx_postjob_modal");}};domready(function(){AppxJobs.init();});var AppxListingDetailsFooter={actionPerformed:null,hasExternalDemo:false,init:function(){var footer=document.getElementsByClassName("appx-detail-footer");if(footer.length>0){if(!footer[0].classList.contains("appx-detail-footer-initial-hide")){document.body.classList.add("appx-detail-footer-on-page");
}var saveB=footer[0].querySelector(".appx-btn-save");if(saveB!==null){saveB.addEventListener("click",AppxUserActions.save,false);document.body.addEventListener("appxListingDetailsFooterWasSaved",AppxListingDetailsFooter.saveEnd,false);}var watchDemoB=footer[0].querySelector(".appx-btn-watchdemo");if(watchDemoB!==null){watchDemoB.addEventListener("click",AppxUserActions.watchDemo,false);
}var testDriveB=footer[0].querySelector(".appx-btn-testdrive");if(testDriveB!==null){testDriveB.addEventListener("click",AppxUserActions.testDrive,false);}var getItNowB=footer[0].querySelector(".appx-btn-getitnow");if(getItNowB!==null){getItNowB.addEventListener("click",AppxUserActions.installFlow,false);
}var learnMoreB=footer[0].querySelector(".appx-btn-learnmore");if(learnMoreB!==null){learnMoreB.addEventListener("click",AppxUserActions.learnMore,false);}var applyNowB=footer[0].querySelector(".appx-btn-applynow");if(applyNowB!==null){applyNowB.addEventListener("click",AppxListingDetailsFooter.applyNow,false);
}var applyNow2B=footer[0].querySelector(".appx-btn-applynow2");if(applyNow2B!==null){applyNow2B.addEventListener("click",AppxListingDetailsFooter.applyNow2,false);}var editJobB=footer[0].querySelector(".appx-btn-editjob");if(editJobB!==null){editJobB.addEventListener("click",AppxListingDetailsFooter.editJob,false);
}var reopenJobB=footer[0].querySelector(".appx-btn__reopen-job");if(reopenJobB!==null){reopenJobB.addEventListener("click",AppxListingDetailsFooter.reopenJob,false);}var markCompleteB=footer[0].querySelector(".appx-btn__mark-complete");if(markCompleteB!==null){markCompleteB.addEventListener("click",AppxListingDetailsFooter.markComplete,false);
}var cancelJobB=footer[0].querySelector(".appx-btn__cancel-job");if(cancelJobB!==null){cancelJobB.addEventListener("click",AppxListingDetailsFooter.cancelJob,false);}var watchDemoPage=document.querySelector(".appx-headline-details-categories-plus .appx-btn-watchdemo");if(watchDemoPage!==null){watchDemoPage.addEventListener("click",AppxUserActions.watchDemo,false);
}var testDrivePage=document.querySelector(".appx-headline-details-categories-plus .appx-btn-testdrive");if(testDrivePage!==null){testDrivePage.addEventListener("click",AppxUserActions.testDrive,false);}var getItNowPage=document.querySelector(".appx-detail-section-primary-action .appx-btn-getitnow");if(getItNowPage!==null){getItNowPage.addEventListener("click",AppxUserActions.installFlow,false);
}var learnMorePage=document.querySelector(".appx-summary-bar .appx-btn-learnmore");if(learnMorePage!==null){learnMorePage.addEventListener("click",AppxUserActions.learnMore,false);}}AppxListingDetailsFooter.checkAndOpenApplyNowOverlay();},save:function(event){var evtTarget=event.target;var evtTargetTag=evtTarget.tagName.toUpperCase();
if(evtTargetTag==="SVG"||evtTargetTag==="USE"||evtTargetTag==="SPAN"){var btn=Appx.findAncestor(evtTarget,"appx-btn-save");}else{var btn=evtTarget;}btn.classList.add("appx-btn-save--active");btn.disabled=true;var listingId=btn.getAttribute("data-listing-id");var listingName=btn.getAttribute("data-listing-name");
var state="save";if(btn.classList.contains("appx-btn-save-saved")){state="saved";}var appxListingDetailsFooterSaveBtnEvent=new CustomEvent("appxListingDetailsFooterSaveBtn",{detail:{listingId:listingId,listingName:listingName,btn:btn,state:state,btnLocation:"footer"}});document.body.dispatchEvent(appxListingDetailsFooterSaveBtnEvent);
},saveEnd:function(e){var btn=e.detail.btn;var state=e.detail.state;btn.classList.remove("appx-btn-save--active");if(state==="saved"){btn.classList.add("appx-btn-save-saved");}else{btn.classList.remove("appx-btn-save-saved");}btn.disabled=false;},applyNow:function(e){Appx.showModal("appx_applynow_modal");
AppxUserActions.applyNow();},privacyPromptContent:function(type){AppxListingDetailsFooter.actionPerformed=type;var headers=document.getElementsByClassName("appx-privacy-prompt-header");for(var i=0;i<headers.length;i++){var headingText=headers[i];if(headingText){if(headingText.getAttribute("id").indexOf(type)>0){if(headingText.classList.contains("slds-hide")){headingText.classList.remove("slds-hide");
}}else{if(!headingText.classList.contains("slds-hide")){headingText.classList.add("slds-hide");}}}}var intros=document.getElementsByClassName("appx-privacy-prompt-intro");for(var i=0;i<intros.length;i++){var introText=intros[i];if(introText){if(introText.getAttribute("id").indexOf(type)>0){if(introText.classList.contains("slds-hide")){introText.classList.remove("slds-hide");
}}else{if(!introText.classList.contains("slds-hide")){introText.classList.add("slds-hide");}}}}},goToTestDriveOrg:function(url){AppxListingDetailsFooter.sameTab(url);},goToLearnMore:function(url){AppxListingDetailsFooter.sameTab(url);},goToWatchDemo:function(url){AppxListingDetailsFooter.sameTab(url);
},newTab:function(url){if(url){var newTab=window.open(url,"_blank");newTab.focus();}else{throw new Error("Url not valid!");}},sameTab:function(url){if(url){location.href=url;}else{throw new Error("Url not valid!");}},applyNow2:function(e){Appx.showModal("appx_applynow2_modal");},reopenJob:function(e){reopenJob.confirm();
},markComplete:function(e){Appx.showModal("appx_completejob_modal");},cancelJob:function(e){Appx.showModal("appx_canceljob_modal");},editJob:function(e){Appx.showModal("appx_reviewjob_modal");},checkAndOpenApplyNowOverlay:function(){var field="applynow";var url=window.location.href;if(url.indexOf(field)!=-1){document.getElementById("applyNowButton").click();
}}};domready(function(){AppxListingDetailsFooter.init();});var AppxStripeBillingHandler=(function(){var _labels={};var _stripe=null;var _cardNumber=null;var _cardCvc=null;var _cardExpiry=null;var _canCreateCardPayment=false;var _canCreateAchPayment=false;var _canCreateSepaPayment=false;var _token=null;
var _isTrial=null;var _paymentMethod=null;var getPaymentMethod=function(){return _paymentMethod;};var getToken=function(){return _token;};var _bindErrors=function(element,errorEl){if(!errorEl){throw new Error("Could not bind errors, invalid selector specified.");}if(!element){throw new Error("The Stripe element was not present or has not been initialized.");
}element.addEventListener("change",function(event){if(event.error){element.update({classes:{base:"slds-input StripeElement",invalid:""},style:{invalid:{color:"#16325c"}}});errorEl.textContent=event.error.message;errorEl.classList.add("slds-hide");}else{errorEl.textContent="";}});};var _handleTokenResult=function(result,resolve,reject){if(result.error){_token=null;
if(_labels.validationErrorMapping[result.error.code]!==undefined){reject(_labels.validationErrorMapping[result.error.code]);}else{reject(result.error.message);}}else{var token;if(result.token){token=result.token;}else{if(result.source){token=result.source;}}_token=token;resolve(token);}reject();};var validateSession=function(){return new Promise(function(resolve,reject){SessionController.getIsSessionOk(function(result,event){if(event.status){if(result===true){resolve();
}else{reject(_labels.SESSION_EXPIRED);}}else{reject(event.message);}});});};var processCardPaymentResult=function(result){if(result.error){AppxCheckoutWizard.showCheckoutWizardError(_labels.PAYMENT_ERROR_TITLE);activateFooterButtons();}else{if(result.paymentIntent.status==="succeeded"){showAuthenticationSucceededMessage();
}}};var confirmCardPayment=function(clientSecret,paymentMethod,functionToExecuteOnResult){var functionToExecute=functionToExecuteOnResult!==undefined?functionToExecuteOnResult:processCardPaymentResult;if(paymentMethod!==undefined){_stripe.confirmCardPayment(clientSecret,paymentMethod).then(function(result){functionToExecute(result);
});}else{_stripe.confirmCardPayment(clientSecret).then(function(result){functionToExecute(result);});}};var confirmCardSetup=function(clientSecret){return new Promise(function(resolve,reject){_stripe.confirmCardSetup(clientSecret,{payment_method:getPaymentMethod().id},{name:_getFullName(),address_line1:document.getElementById("appx-billing-street-1").value,address_country:document.querySelector("[id$=appx-billing-country]").value,address_line2:document.getElementById("appx-billing-street-2").value,address_city:document.getElementById("appx-billing-city").value,address_state:document.getElementById("appx-billing-state-input")!==null?document.getElementById("appx-billing-state-input").value:document.querySelector("[id$=appx-billing-state-select]").value,address_zip:document.getElementById("appx-billing-zip").value}).then(function(result){if(result.error){handlePaymentFailure(result.error.message);
Appx.hideSpinnerButton("appx-buttons-save");Appx.enableButton("appx-buttons-save");Appx.enableButton("appx-buttons-cancel");Appx.enableButton("appx-review-subscription-modal-close");document.getElementById("appx-review-subscription-modal-close").click();}else{resolve();}});});};this.handlePaymentFailure=function(err){var existingToastContent=document.getElementById("toast-content-detail");
if(existingToastContent===null){ToastManager.createToast({title:AppxSubscriptionManagerLabels.PAYMENT_ERROR_TITLE,body:err.replace("\\",""),severity:ToastManager.severity.error,duration:ToastManager.duration.sticky});}Appx.hideSpinnerButton("appx-button-review");Appx.enableButton("appx-button-review");
};var handleCardSetup=function(clientSecret,showAuthenticationSucceededMessage){_stripe.handleCardSetup(clientSecret,{payment_method:getPaymentMethod().id},{payment_method_data:{billing_details:{name:_getFullName()}}}).then(function(result){if(result.error){if(_isTrial){AppxCheckoutWizard.showCheckoutWizardError(_labels.PAYMENT_TRIAL_ERROR_TITLE);
Appx.hideSpinnerButton("appx_wizzard-btn_next");Appx.hideSpinnerButton("appx_wizzard_btn_prev");}else{AppxCheckoutWizard.showCheckoutWizardError(_labels.PAYMENT_ERROR_TITLE);activateFooterButtons();}}else{if(result.setupIntent.status==="succeeded"){showAuthenticationSucceededMessage();}}});};var _getFullName=function(){if(document.getElementById("text-input-id-1")!==null&&document.getElementById("text-input-id-2")!==null){return document.getElementById("text-input-id-1").value+" "+document.getElementById("text-input-id-2").value;
}else{return document.querySelector("[id$=appx-contact-info-firstname-output]").textContent+" "+document.querySelector("[id$=appx-contact-info-lastname-output]").textContent;}};var _getSelectedPaymentMethod=function(containerId){var tabContainer=document.getElementById(containerId);var tabs=tabContainer.getElementsByTagName("li");
var i;if(tabs.length>0){for(i=0;i<tabs.length;i+=1){if(tabs[i].classList.contains("slds-is-active")){return _tabIdToRadioSelected(tabs[i].id);}}}};var _tabIdToRadioSelected=function(tabId){switch(tabId){case"appx_pay_method_cc_li":return"credit-card-detail";break;case"appx_pay_usbank_1_li":return"us-bank-account";
break;case"appx_pay_usbank_2_li":return"us-bank-account-personal";break;case"appx_pay_eurobank_li":return"european-bank-account";break;default:return"credit-card-detail";}};var generateStripeToken=function(){var tokenPromise=null;var selectedPaymentType=_getSelectedPaymentMethod("appx-fieldset-pay-method-tab");
if(selectedPaymentType){switch(selectedPaymentType){case"credit-card-detail":tokenPromise=createStripeCardToken;break;case"us-bank-account":tokenPromise=createStripeBankAccountToken;break;case"us-bank-account-personal":tokenPromise=createStripePersonalBankAccountToken;break;case"european-bank-account":tokenPromise=createStripeSepaSource;
break;default:throw new Error("Invalid payment type specified: "+selectedPaymentType);}if(tokenPromise!==null&&typeof tokenPromise==="function"){return tokenPromise.call(this);}}};var createStripeSepaSource=function(){return new Promise(function(resolve,reject){if(_canCreateSepaPayment===true){validateSession().then(function(){if(_stripe!==undefined&&_stripe!==null){_stripe.createSource({type:"sepa_debit",sepa_debit:{iban:document.getElementById("appx-eu-bank-iban-number-id").value},currency:"eur",owner:{name:_getFullName(),email:document.getElementById("email-input-id").value,address:{city:document.getElementById("appx-billing-city").value,country:document.querySelector("[id$=appx-billing-country]").value,line1:document.getElementById("appx-billing-street-1").value,line2:document.getElementById("appx-billing-street-2").value||"",postal_code:document.getElementById("appx-billing-zip").value,state:document.getElementById("appx-billing-state-input")!==null?document.getElementById("appx-billing-state-input").value:document.querySelector("[id$=appx-billing-state-select]").value}}}).then(function(result){_handleTokenResult(result,resolve,reject);
},function(err){reject(err);});}},function(err){reject(err);});}else{throw new Error("You do not have permission to perform this action.");}});};var createStripeBankAccountToken=function(){return new Promise(function(resolve,reject){if(_canCreateAchPayment===true){validateSession().then(function(){if(_stripe!==undefined&&_stripe!==null){_stripe.createToken("bank_account",{country:document.querySelector("[id$=appx-billing-country]").value.toLowerCase(),currency:"usd",routing_number:document.getElementById("appx-us-bank-account-routing").value,account_number:document.getElementById("appx-us-bank-account-number").value,account_holder_name:document.getElementById("appx-us-bank-name-account-id").value,account_holder_type:"Company"}).then(function(result){_handleTokenResult(result,resolve,reject);
},function(err){reject(err);});}},function(err){reject(err);});}else{throw new Error("You do not have permission to perform this action.");}});};var createStripePersonalBankAccountToken=function(){return new Promise(function(resolve,reject){reject(_labels.PERSONAL_BANK_ACCOUNTS_DISALLOWED);});};var createStripeCardToken=function(){return new Promise(function(resolve,reject){if(_canCreateCardPayment===true){validateSession().then(function(){if(_stripe&&_cardNumber){_stripe.createToken(_cardNumber,{name:_getFullName(),address_line1:document.getElementById("appx-billing-street-1").value,address_country:document.querySelector("[id$=appx-billing-country]").value,address_line2:document.getElementById("appx-billing-street-2").value,address_city:document.getElementById("appx-billing-city").value,address_state:document.getElementById("appx-billing-state-input")!==null?document.getElementById("appx-billing-state-input").value:document.querySelector("[id$=appx-billing-state-select]").value,address_zip:document.getElementById("appx-billing-zip").value}).then(function(result){_handleTokenResult(result,resolve,reject);
},function(err){reject(err);});}else{reject("Stripe form has not been initialized.");}},function(err){reject(err);});}else{throw new Error("You do not have permission to perform this action.");}});};var createStripePaymentMethod=function(){return new Promise(function(resolve,reject){if(_canCreateCardPayment===true){validateSession().then(function(){if(_stripe&&_cardNumber){_stripe.createPaymentMethod("card",{card:{"token":getToken().id}},{name:_getFullName(),address_line1:document.getElementById("appx-billing-street-1").value,address_country:document.querySelector("[id$=appx-billing-country]").value,address_line2:document.getElementById("appx-billing-street-2").value,address_city:document.getElementById("appx-billing-city").value,address_state:document.getElementById("appx-billing-state-input")!==null?document.getElementById("appx-billing-state-input").value:document.querySelector("[id$=appx-billing-state-select]").value,address_zip:document.getElementById("appx-billing-zip").value,}).then(function(result){if(result.paymentMethod){_paymentMethod=result.paymentMethod.id;
resolve();}},function(err){reject(err);});}else{reject("Stripe form has not been initialized.");}},function(err){reject(err);});}else{throw new Error("You do not have permission to perform this action.");}});};var init=function(publishableKey,opts){if(opts){if(opts.permissions){_canCreateCardPayment=opts.permissions.canCreateCardPayment;
_canCreateAchPayment=opts.permissions.canCreateAchPayment;_canCreateSepaPayment=opts.permissions.canCreateSepaPayment;_isTrial=opts.permissions.isTrial;}if(opts.labels){_labels=opts.labels;}}_stripe=Stripe(publishableKey);if(_canCreateCardPayment===true){var elements=_stripe.elements();var classes={base:"slds-input StripeElement",invalid:"slds-has-error"};
var style={base:{fontFamily:"'Salesforce Sans', Arial, sans-serif",fontSize:"12px"}};_cardNumber=elements.create("cardNumber",{classes:classes,style:style,placeholder:_labels.PLACEHOLDER_CARD_TEXT});_cardCvc=elements.create("cardCvc",{classes:classes,style:style,placeholder:""});_cardExpiry=elements.create("cardExpiry",{classes:classes,style:style});
_bindErrors(_cardNumber,document.getElementById("error-message-card-number-id"));_bindErrors(_cardCvc,document.getElementById("error-message-card-cvc-id"));_bindErrors(_cardExpiry,document.getElementById("error-message-card-expiry-id"));_cardNumber.mount("#card-number-element");_cardCvc.mount("#card-cvc-element");
_cardExpiry.mount("#card-expiry-element");}};return{init:init,generateStripeToken:generateStripeToken,getToken:getToken,validateSession:validateSession,confirmCardPayment:confirmCardPayment,handleCardSetup:handleCardSetup,createStripePaymentMethod:createStripePaymentMethod,getPaymentMethod:getPaymentMethod,confirmCardSetup:confirmCardSetup};
}());var AppxTooltip={xPos:0,yPos:0,tooltipWidth:320,marginVerticalTooltip:14,tooltipHeight:0,targetWidth:0,targetHeight:0,hideSemaphore:false,isFixed:false,init:function(){var totalTooltips=document.querySelectorAll(".appx-tooltip-trigger").length;if(totalTooltips>0){AppxTooltip.create();AppxTooltip.handle();
}},create:function(){var tooltip=document.createElement("div");tooltip.id="tooltip";tooltip.setAttribute("class","slds-popover slds-popover_tooltip appx-tooltip-text");tooltip.setAttribute("role","tooltip");var textInTooltip=document.createElement("div");textInTooltip.setAttribute("class","slds-popover__body");
textInTooltip.id="texttooltip";tooltip.appendChild(textInTooltip);var body=document.body;body.appendChild(tooltip);},dotClickTouch:function(e){hideTooltipTimeOut=setTimeout(function(){AppxTooltip.hideTooltip();},350);},handle:function(){var triggers=document.getElementsByClassName("appx-tooltip-trigger");
for(var i=0;i<triggers.length;i++){var trigger=triggers[i];trigger.addEventListener("click",AppxTooltip.dotClickTouch);trigger.addEventListener("touchend",AppxTooltip.dotClickTouch);trigger.addEventListener("mouseenter",function(e){AppxTooltip.hideSemaphore=false;clearTimeout(hideTooltipTimeOut);AppxTooltip.isFixed=e.target.classList.contains("appx-tooltip-trigger-fixed");
AppxTooltip.getPosition(e.target);var tooltipMessage=document.getElementById("texttooltip");tooltipMessage.innerText="";var tooltip=document.getElementById("tooltip");tooltip.style.top="-1000px";tooltip.setAttribute("class","slds-popover slds-popover_tooltip appx-tooltip-text");var message=e.target.getElementsByClassName("appx-tooltip-text")[0].innerText;
if(e.target&&message){tooltipMessage.appendChild(document.createTextNode(message));}AppxTooltip.targetWidth=e.target.clientWidth;AppxTooltip.targetHeight=e.target.clientHeight;setTimeout(function(){AppxTooltip.tooltipHeight=tooltipMessage.clientHeight;AppxTooltip.tooltipWidth=tooltip.clientWidth;var positionUp=(AppxTooltip.yPos-(AppxTooltip.tooltipHeight+AppxTooltip.marginVerticalTooltip));
var positionDown=(AppxTooltip.yPos+(AppxTooltip.targetHeight+AppxTooltip.marginVerticalTooltip));var diffarrowBorderTooltip=24;var tooltipGoesUp=positionUp-document.body.scrollTop>0;if(AppxTooltip.isFixed){tooltipGoesUp=positionUp>0;}var positionCenter=AppxTooltip.xPos-((AppxTooltip.tooltipWidth-AppxTooltip.targetWidth)/2);
var positionLeft=AppxTooltip.xPos-AppxTooltip.tooltipWidth+(AppxTooltip.targetWidth/2)+diffarrowBorderTooltip;var positionRight=AppxTooltip.xPos+(AppxTooltip.targetWidth/2)-diffarrowBorderTooltip;if(positionRight<0){positionRight=0;}var tooltipGoesRight=positionCenter<0;var tooltipGoesLeft=positionCenter+AppxTooltip.tooltipWidth>window.innerWidth;
var positionVertical=0;var positionHorizontal=0;if((tooltipGoesRight)&&(tooltipGoesUp)){tooltip.classList.add("slds-nubbin_bottom-left");positionHorizontal=positionRight;positionVertical=positionUp;}else{if((tooltipGoesRight)&&(!tooltipGoesUp)){tooltip.classList.add("slds-nubbin_top-left");positionVertical=positionDown;
positionHorizontal=positionRight;}else{if((tooltipGoesLeft)&&(tooltipGoesUp)){tooltip.classList.add("slds-nubbin_bottom-right");positionHorizontal=positionLeft;positionVertical=positionUp;}else{if((tooltipGoesLeft)&&(!tooltipGoesUp)){tooltip.classList.add("slds-nubbin_top-right");positionVertical=positionDown;
positionHorizontal=positionLeft;}else{if(tooltipGoesUp){tooltip.classList.add("slds-nubbin_bottom");positionVertical=positionUp;positionHorizontal=positionCenter;}else{tooltip.classList.add("slds-nubbin_top");positionVertical=positionDown;positionHorizontal=positionCenter;}}}}}tooltip.style.top=positionVertical+"px";
tooltip.style.left=positionHorizontal+"px";tooltip.style.opacity=1;},1);tooltip.style.display="block";tooltip.style.opacity=0;if(AppxTooltip.isFixed){tooltip.style.position="fixed";}else{tooltip.style.position="";}},false);trigger.addEventListener("mouseleave",function(e){AppxTooltip.hideSemaphore=true;
hideTooltipTimeOut=setTimeout(function(){AppxTooltip.hideTooltip();},250);},false);}var tooltipMessage=document.getElementById("tooltip");tooltipMessage.addEventListener("mouseenter",function(e){clearTimeout(hideTooltipTimeOut);});tooltipMessage.addEventListener("mouseleave",function(e){hideTooltipTimeOut=setTimeout(function(){AppxTooltip.hideTooltip();
},250);});},hideTooltip:function(){if(AppxTooltip.hideSemaphore){var tooltip=document.getElementById("tooltip");tooltip.style.display="none";var textInTooltip=document.getElementById("texttooltip");textInTooltip.innerHTML="";tooltip.removeAttribute("style");}},getPosition:function(el){var posEl=Appx.getPosition(el,AppxTooltip.isFixed);
AppxTooltip.xPos=posEl.x;AppxTooltip.yPos=posEl.y;if(!AppxTooltip.isFixed){AppxTooltip.yPos+=Appx.getScrollYPosition();}}};var hideTooltipTimeOut;domready(function(){AppxTooltip.init();});var AppxRate={init:function(querySel){var rateOuter=document.querySelectorAll(querySel);for(var i=0;i<rateOuter.length;
i++){var radioButtons=rateOuter[i].querySelectorAll(".appx-rate-radio");var radioLabels=rateOuter[i].querySelectorAll(".appx-radio_button__label");for(var j=0;j<radioButtons.length;j++){radioButtons[j].addEventListener("click",AppxRate.radioClick,false);radioLabels[j].addEventListener("mouseenter",AppxRate.radioEnter,false);
radioLabels[j].addEventListener("mouseleave",AppxRate.radioLeave,false);}AppxRate.radioLeave(null,radioLabels[0]);}},radioClick:function(e){AppxRate.radioLeave(e);},radioEnter:function(e){AppxRate.setStarCount(e.target,e.target.getAttribute("data-star"));},radioLeave:function(e,el){if(typeof el==="undefined"){var eTarget=e.target;
}else{var eTarget=el;}var selStar=AppxRate.selectedStar(eTarget);AppxRate.setStarCount(eTarget,selStar);},setStarCount:function(el,rating){var starGroupOuter=Appx.findAncestor(el,"appx-radio_button-group");if(starGroupOuter){starGroupOuter.classList.remove("appx-rate-0");starGroupOuter.classList.remove("appx-rate-1");
starGroupOuter.classList.remove("appx-rate-2");starGroupOuter.classList.remove("appx-rate-3");starGroupOuter.classList.remove("appx-rate-4");starGroupOuter.classList.remove("appx-rate-5");if(rating!==0){starGroupOuter.classList.add("appx-rate-"+rating);}}},selectedStar:function(el){var starGroupOuter=Appx.findAncestor(el,"appx-radio_button-group");
var selStar=0;if(starGroupOuter){var radioButtons=starGroupOuter.querySelectorAll(".appx-rate-radio");for(var i=0;i<radioButtons.length;i++){if(radioButtons[i].checked){selStar=i+1;}}}return selStar;}};domready(function(){AppxRate.init(".appx-form-element-rate");});var AppxScroll={prevScrollY:null,scrolledLimitDown:120,scrolledLimitUp:80,extraClassName:"appx-scrolled-down",scrollTempOff:false,resetTime:100,header:null,footer:null,headerClassName:"appx-header-with-store-switcher",footerClassName:"appx-detail-footer-on-page",footerInitialHideClassName:"appx-detail-footer-initial-hide",init:function(){AppxScroll.addEvents();
AppxScroll.headerInit();AppxScroll.footerInit();AppxScroll.duplBtnInit();AppxScroll.scrollEvent(true);},addEvents:function(){window.addEventListener("scroll",AppxScroll.scrollEvent);},resetEvents:function(){AppxScroll.scrollTempOff=true;window.setTimeout(function(){AppxScroll.scrollTempOff=false;},AppxScroll.resetTime);
},headerInit:function(){var header=document.getElementsByClassName("appx-header");if(header.length>0){var storeSwitcher=header[0].getElementsByClassName("sf-store-switcher");if(storeSwitcher.length>0){AppxScroll.header=header[0];}}},footerInit:function(){var footer=document.getElementsByClassName("appx-detail-footer");
if(footer.length>0){AppxScroll.footer=footer[0];}},duplBtnInit:function(){var btn1=document.querySelector(".appx-detail-section-primary-action .appx-btn-getitnow");var btn2=document.querySelector(".appx-headline-details-categories-plus .appx-btn-watchdemo");var btn3=document.querySelector(".appx-headline-details-categories-plus .appx-btn-testdrive");
var btn4=document.querySelector(".appx-summary-bar .appx-btn-learnmore");if(btn1===null&&btn2===null&&btn3===null&&btn4===null){if(AppxScroll.footer!==null){AppxScroll.footer.classList.remove(AppxScroll.footerInitialHideClassName);}}},scrollEvent:function(init){var scrollY=window.pageYOffset;if(AppxScroll.scrollTempOff===false){if((AppxScroll.prevScrollY!==null&&AppxScroll.prevScrollY<scrollY)||init===true){if(scrollY>=AppxScroll.scrolledLimitDown&&!document.body.classList.contains(AppxScroll.extraClassName)){AppxScroll.actionScrollDown();
}}else{if(AppxScroll.prevScrollY!==null&&AppxScroll.prevScrollY>scrollY){if(scrollY<AppxScroll.scrolledLimitUp&&document.body.classList.contains(AppxScroll.extraClassName)){AppxScroll.actionScrollUp();}}}}AppxScroll.prevScrollY=scrollY;},actionScrollDown:function(){document.body.classList.add(AppxScroll.extraClassName);
if(AppxScroll.header!==null){AppxScroll.header.classList.remove(AppxScroll.headerClassName);}if(AppxScroll.footer!==null){document.body.classList.add(AppxScroll.footerClassName);}AppxScroll.resetEvents();},actionScrollUp:function(){document.body.classList.remove(AppxScroll.extraClassName);if(AppxScroll.header!==null){AppxScroll.header.classList.add(AppxScroll.headerClassName);
}if(AppxScroll.footer!==null){document.body.classList.remove(AppxScroll.footerClassName);}AppxScroll.resetEvents();}};domready(function(){AppxScroll.init();});var AppxAccordion={init:function(accordion){var acc=document.getElementById(accordion);if(acc!==null){var accBtns=acc.querySelectorAll(".slds-accordion__summary-action");
for(var i=0;i<accBtns.length;i++){accBtns[i].addEventListener("click",AppxAccordion.btnClick,false);}}},btnClick:function(e){var btn=e.currentTarget;var section=AppxAccordion.parentSection(btn);if(section!==null){if(section.classList.contains("slds-is-open")){section.classList.remove("slds-is-open");
}else{section.classList.add("slds-is-open");}}},parentSection:function(el){return Appx.findAncestor(el,"slds-accordion__section");}};var AppxPopover={init:function(){var triggers=document.getElementsByClassName("appx-popover-trigger_el");for(var i=0;i<triggers.length;i++){AppxPopover.triggerClickInit(triggers[i]);
AppxPopover.closeClickInit(triggers[i]);}},triggerClickInit:function(trigger){trigger.addEventListener("click",AppxPopover.triggerClick);},closeClickInit:function(trigger){var triggerOuter=Appx.findAncestor(trigger,"appx-popover-outer");if(triggerOuter){var closeBtns=triggerOuter.getElementsByClassName("slds-popover__close");
for(var i=0;i<closeBtns.length;i++){closeBtns[i].addEventListener("click",AppxPopover.closeClick);}}},triggerClick:function(){var triggerEl=this;var triggerOuter=Appx.findAncestor(triggerEl,"appx-popover-outer");if(triggerOuter){if(triggerOuter.classList.contains("appx-popover-hide")){AppxPopover.showPopover(triggerOuter);
}else{AppxPopover.hidePopover(triggerOuter);}}},closeClick:function(){var closeEl=this;var triggerOuter=Appx.findAncestor(closeEl,"appx-popover-outer");if(triggerOuter){AppxPopover.hidePopover(triggerOuter);}},showPopover:function(triggerOuter){triggerOuter.classList.remove("appx-popover-hide");},hidePopover:function(triggerOuter){triggerOuter.classList.add("appx-popover-hide");
}};domready(function(){AppxPopover.init();});var AppxSplitSDK=(function(){var attributes=null;var _sdkReady=false;var _factory=null;var _client=null;var init=function(apikey,userId,tt){if(_factory==null){_factory=splitio({core:{authorizationKey:apikey,key:userId,trafficType:tt},startup:{readyTimeout:3,requestTimeoutBeforeReady:3}});
}if(_client==null){_client=_factory.client();_client.on(_client.Event.SDK_READY,function(){_sdkReady=true;});}};var getFeatureFlagClient=function(userId){return _factory.client(userId);};var isSdkReady=function(){return _sdkReady;};var getTreatmentOn=function(treatmentId){return new Promise(function(resolve,reject){if(_sdkReady===true){var TreatmentResult=attributes==null?_client.getTreatmentWithConfig(treatmentId):_client.getTreatment(treatmentId,attributes);
var treatment=TreatmentResult.treatment;if(treatment=="on"){resolve();}else{if(treatment=="off"){reject("treatment off");}}}else{_client=_factory.client();_client.on(_client.Event.SDK_READY,function(){_sdkReady=true;var TreatmentResult=attributes==null?_client.getTreatmentWithConfig(treatmentId):_client.getTreatment(treatmentId,attributes);
var treatment=TreatmentResult.treatment;if(treatment=="on"){resolve();}else{if(treatment=="off"){reject("treatment off");}else{reject("treamtent not ready yet");}}});}});};var trackEvent=function(event,value,properties){if(_client!=null){_client.track(event,value,properties);}};var destroyFeatureFlagClient=function(){if(_client!=null){_client.destroy();
_client=null;}};var getCookie=function(name){var userTokenCookie=document.cookie.match("(^|;) ?"+name+"=([^;]*)(;|$)");return userTokenCookie?userTokenCookie[2]:null;};return{attributes:attributes,client:_client,init:init,isSdkReady:isSdkReady,getFeatureFlagClient:getFeatureFlagClient,destroyFeatureFlagClient:destroyFeatureFlagClient,getTreatmentOn:getTreatmentOn,trackEvent:trackEvent,getUserTokenFromCookie:getCookie};
}());